{"version":3,"file":"js/935.f9a5b7ff.js","mappings":"46CAoIA,MAAM,EAAEA,EAAC,OAAEC,IAAWC,EAAAA,EAAAA,MAChBC,GAAiBC,EAAAA,EAAAA,IAAI,GACrBC,IAAeD,EAAAA,EAAAA,IAAI,GACnBE,IAAkBF,EAAAA,EAAAA,IAAI,GACtBG,IAAqBH,EAAAA,EAAAA,IAAI,GAEzBI,IAAcJ,EAAAA,EAAAA,IAAI,GAExBK,eAAeC,GAAeC,GAC5B,IACE,MAAMC,EAASC,aAAaC,QAAQ,SACpC,IAAKF,EAAQ,OAEb,MAAMG,QAAiBC,MAAM,GAAGC,EAAAA,8BAA0C,CACxEC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEC,KAAMX,EAAQP,aAAcM,MAG/Ca,QAAaT,EAASU,OAET,GAAfD,EAAKE,OACPlB,GAAYmB,MAAQH,EAAKA,KAEzBhB,GAAYmB,MAAQ,CAGxB,CAAE,MAAOC,GACPC,QAAQD,MAAM,0BAA2BA,EAC3C,CACF,CAGA,MAAME,IAAU1B,EAAAA,EAAAA,IAAI,GACd2B,IAAW3B,EAAAA,EAAAA,IAAI,GAErBK,eAAeuB,GAAcrB,GAC3B,IACE,MAAMC,EAASC,aAAaC,QAAQ,SACpC,IAAKF,EAAQ,OAEb,MAAMG,QAAiBC,MAAM,GAAGC,EAAAA,6BAAyC,CACvEC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEC,KAAMX,EAAQP,aAAcM,MAG/Ca,QAAaT,EAASU,OAE5B,GAAmB,GAAfD,EAAKE,OAAa,CAEpB,MAAMO,EAAgBT,EAAKA,KAE3BM,GAAQH,MAAQO,KAAKC,MAAMF,EAAgB,IAC3CF,GAASJ,MAAQO,KAAKC,MAAMF,EAAgB,GAC9C,MACEH,GAAQH,MAAQ,EAChBI,GAASJ,MAAQ,CAGrB,CAAE,MAAOC,GACPC,QAAQD,MAAM,0BAA2BA,EAC3C,CACF,CAOA,MAAMQ,IAAahC,EAAAA,EAAAA,IAAI,IACjBiC,IAAWjC,EAAAA,EAAAA,IAAI,IACfkC,IAAclC,EAAAA,EAAAA,IAAI,IAClBmC,IAAenC,EAAAA,EAAAA,IAAI,IAEzBoC,EAAAA,GAAQC,SAASC,EAAAA,GAAYC,EAAAA,GAAeC,EAAAA,GAAaC,EAAAA,GAASC,EAAAA,GAAQC,EAAAA,GAE1E,MAAMC,IAAUC,EAAAA,EAAAA,KAAS,KAAM,CAC7BC,OAAQd,GAAWT,MACnBwB,SAAU,CACR,CACEC,MAAO,GACP5B,KAAMa,GAASV,MACf0B,gBAAiB,UACjBC,aAAc,GACdC,aAAc,GACdC,WAAY,eAIZC,GAAa,CACjBC,OAAQ,CACNC,QAAS,CACPC,IAAK,KAGTC,YAAY,EACZC,QAASA,CAACC,EAAKC,KACb,IAAKA,EAASC,OAAQ,OAEtB,MAAMC,EAAQF,EAAS,GAAGE,MACpBC,EAAO7B,GAAYX,MAAMuC,GAE1BC,GAELC,GAAYD,EAAK,EAEnBE,QAAS,CACPC,OAAQ,CACNC,SAAS,EACTrB,OAAQ,CACNS,QAAS,GACTa,MAAO,OACPC,UAAW,IAGfC,WAAY,CACVC,OAAQ,MACRC,MAAO,QACPC,QAAS,GACTxB,gBAAiB,UACjBE,aAAc,IACdiB,MAAO,UACPM,KAAM,CACJC,OAAQ,MACRC,KAAM,IAERrB,QAAS,CACPC,IAAK,EACLqB,OAAQ,EACRC,KAAM,EACNC,MAAO,GAETC,UAAYzD,GAAUA,IAG1B0D,OAAQ,CACNC,EAAG,CACDC,aAAa,EACbC,MAAO,CACLjB,SAAS,GAEXkB,KAAM,CACJlB,SAAS,IAGb5D,EAAG,CACD8E,KAAM,CACJlB,SAAS,MAMjB,SAASH,GAAYD,GASnB,OAPA5B,GAAaZ,MAAM+D,KAAK,CACtBrF,aAAcA,GAAasB,MAC3BgE,IAAKrF,GAAgBqB,MACrBiE,OAAQrF,GAAmBoB,QAIH,GAAtBtB,GAAasB,OACfrB,GAAgBqB,MAAQwC,EAAK0B,IAC7BxF,GAAasB,MAAQ,OACrBmE,MAKwB,GAAtBzF,GAAasB,OACfpB,GAAmBoB,MAAQwC,EAAK0B,IAChCxF,GAAasB,MAAQ,OACrBmE,WAHF,CAMF,CAEA,SAASC,KACP,IAAKxD,GAAaZ,MAAMsC,OAAQ,OAEhC,MAAM+B,EAAWzD,GAAaZ,MAAMsE,MAEpC5F,GAAasB,MAAQqE,EAAS3F,aAC9BC,GAAgBqB,MAAQqE,EAASL,IACjCpF,GAAmBoB,MAAQqE,EAASJ,OAEpCE,IACF,CAEArF,eAAeqF,KACb,IACE,MAAMlF,EAASC,aAAaC,QAAQ,SACpC,IAAKF,EAAQ,OAEb,MAAMG,QAAiBC,MAAM,GAAGC,EAAAA,uBAAmC,CACjEC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEC,KAAMX,EAAQP,aAAcA,GAAasB,MAAOuE,KAAM,EAAGP,IAAKrF,GAAgBqB,MAAOiE,OAAQrF,GAAmBoB,UAGnIH,QAAaT,EAASU,OAE5B,GAAmB,GAAfD,EAAKE,QAA4B,IAAbF,EAAKA,KAAY,CACvC,MAAM2E,EAAa9E,KAAK+E,MAAM5E,EAAKA,MACnCc,GAAYX,MAAQwE,EAEM,GAAtB9F,GAAasB,MACfS,GAAWT,MAAQwE,EAAWE,KAAIlC,GAAQ,CACxCA,EAAKmC,OAAOC,UAAU,EAAG,GACzBpC,EAAK0B,OAIPzD,GAAWT,MAAQwE,EAAWE,KAAIlC,GAAQ,CACxCA,EAAKmC,OAAOC,UAAU,EAAG,MAI7BlE,GAASV,MAAQwE,EAAWE,KAAIlC,GAAQA,EAAKqC,gBAC/C,MAEEpE,GAAWT,MAAQ,GACnBU,GAASV,MAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAExC,CAAE,MAAOC,GACPC,QAAQD,MAAM,0BAA2BA,EAC3C,CACF,CAGA,MAAM6E,GAAkB,CACtB,UACA,UACA,UACA,UACA,UACA,WAEIC,GAAY,CAAC,QAAS,SAAU,YAAa,SAAU,UAAW,SAAU,WAC5EC,IAAcvG,EAAAA,EAAAA,IAAI,CAAC,GACnBwG,GAAS,CACb,MAAS,MACT,OAAU,MACV,YAAa,MACb,OAAU,MACV,QAAW,MACX,SAAU,MACV,QAAW,OAQPC,IAAe5D,EAAAA,EAAAA,KAAS,IAGF,GAAtB5C,GAAasB,MACR+E,GAIiB,GAAtBrG,GAAasB,MACR,CAAC,QAAS,QAAS,QAAS,QAAS,SAIvC,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,SAGjFmF,IAAY7D,EAAAA,EAAAA,KAAS,KACzB,GAAqB,OAAjBhD,EAAO0B,MAAgB,OAAOgF,GAAYhF,MAE9C,MAAMoF,EAAa,CAAC,EACpB,IAAK,MAAMlB,KAAOa,GAChBK,EAAWH,GAAOf,IAAQc,GAAYhF,MAAMkE,IAAQ,GAEtD,OAAOkB,CAAU,IAmBbC,IAAe/D,EAAAA,EAAAA,KAAS,IACrBf,KAAK+E,OAAOJ,GAAalF,MAAM0E,KAAIa,GAAOJ,GAAUnF,MAAMuF,IAAMjD,QAAU,IAAI,KAEjFkD,GAAaA,CAACD,EAAKE,KACvB,MAAMjD,EAAO2C,GAAUnF,MAAMuF,KAAOE,GACpC,OAAOjD,EAAOA,EAAKkD,UAAY,IAAI,EAQrC,SAASC,GAAWJ,EAAKE,GACvB,MAAMjD,EAAO2C,GAAUnF,MAAMuF,KAAOE,GAGpC,OAAKjD,GAGAA,EAAKoD,UAA8B,IAAlBpD,EAAKoD,UAGpBd,GAAgBtC,EAAKqD,UANV,MAOpB,CAoDA/G,eAAegH,GAAiB9G,GAC9B,IACE,MAAMC,EAASC,aAAaC,QAAQ,SACpC,IAAKF,EAAQ,OAEb,MAAMG,QAAiBC,MAAM,GAAGC,EAAAA,gCAA4C,CAC1EC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEC,KAAMX,EAAQP,aAAcM,MAG/Ca,QAAaT,EAASU,OAE5B,GADAI,QAAQ6F,IAAIlG,EAAKA,MACG,IAAhBA,EAAKE,SAAiBF,EAAKA,KAE7B,YADAmF,GAAYhF,MAAQ,CAAC,GAIvB,MAAMgG,EAAStG,KAAK+E,MAAM5E,EAAKA,MAI/B,GAAS,GAALb,EAAQ,CACV,MAAMiH,EAAU,CAAC,EACjBlB,GAAUmB,SAAQC,GAAKF,EAAQE,GAAK,CAAC,IAErCH,EAAOE,SAAQ1D,IACb,MAAM0B,EAAM1B,EAAK4D,IACXC,EAAQ,GAAG7D,EAAK8D,aAAa9D,EAAK+D,UAGnCN,EAAQ/B,KAER+B,EAAQ/B,GAAKmC,KAChBJ,EAAQ/B,GAAKmC,GAAS,CACpBX,UAAWlD,EAAK8D,UAChBT,QAASrD,EAAK+D,QACdX,SAAU,IAIdK,EAAQ/B,GAAKmC,GAAOT,UAAYpD,EAAKgE,eAAa,IAIpD,MAAMC,EAAS,CAAC,EAMhB,OALA1B,GAAUmB,SAAQC,IAChBM,EAAON,GAAKO,OAAOC,OAAOV,EAAQE,GAAG,SAGvCnB,GAAYhF,MAAQyG,EAEtB,CAEA,GAAS,GAALzH,EAAQ,CACV,MAAM4H,EAAU,CAAC,QAAS,QAAS,QAAS,QAAS,SAE/CX,EAAU,CAAC,EACjBW,EAAQV,SAAQW,GAAKZ,EAAQY,GAAK,CAAC,IAEnCb,EAAOE,SAAQ1D,IACb,MAAMsE,EAAM,OAAStE,EAAKuE,OACpBV,EAAQ,GAAG7D,EAAK8D,aAAa9D,EAAK+D,UAGnCN,EAAQa,KAERb,EAAQa,GAAKT,KAChBJ,EAAQa,GAAKT,GAAS,CACpBX,UAAWlD,EAAK8D,UAChBT,QAASrD,EAAK+D,QACdX,SAAU,IAIdK,EAAQa,GAAKT,GAAOT,UAAYpD,EAAKgE,eAAa,IAGpD,MAAMC,EAAS,CAAC,EAMhB,OALAG,EAAQV,SAAQW,IACdJ,EAAOI,GAAKH,OAAOC,OAAOV,EAAQY,GAAG,SAGvC7B,GAAYhF,MAAQyG,EAEtB,CAOA,GAAS,GAALzH,EAAQ,CACV,MAAMgI,EAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAGtFf,EAAU,CAAC,EACjBe,EAAMd,SAAQe,GAAKhB,EAAQgB,GAAK,CAAC,IAEjCjB,EAAOE,SAAQ1D,IACb,MAAMwB,EAAMxB,EAAK0E,MACXb,EAAQ,GAAG7D,EAAK8D,aAAa9D,EAAK+D,UAGnCN,EAAQjC,KAGRiC,EAAQjC,GAAKqC,KAChBJ,EAAQjC,GAAKqC,GAAS,CACpBX,UAAWlD,EAAK8D,UAChBT,QAASrD,EAAK+D,QACdX,SAAU,IAKdK,EAAQjC,GAAKqC,GAAOT,UAAYpD,EAAKgE,eAAa,IAKpD,MAAMC,EAAS,CAAC,EAMhB,OALAO,EAAMd,SAAQe,IACZR,EAAOQ,GAAKP,OAAOC,OAAOV,EAAQgB,GAAG,SAGvCjC,GAAYhF,MAAQyG,EAEtB,CAyBF,CAAE,MAAOU,GACPjH,QAAQD,MAAM,iBAAkBkH,EAClC,CACF,CAMA,SAASC,GAASpI,GAChBN,GAAasB,MAAQhB,EACrBL,GAAgBqB,MAAQ,EACxBpB,GAAmBoB,MAAQ,EAC3BjB,GAAeC,GACfqB,GAAcrB,GACdmF,KACA2B,GAAiB9G,EACnB,C,OAZAqI,EAAAA,EAAAA,KAAU,KACRD,GAAS5I,EAAewB,MAAM,I,6nICppBhC,MAAMsH,IAA2B,QAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,S","sources":["webpack://angerpulse/./src/components/GuiaDashboard.vue","webpack://angerpulse/./src/components/GuiaDashboard.vue?1075"],"sourcesContent":["<template>\n  <div>\n    <label class=\"b-24-black\" v-html=\"t('activity.title')\"></label>\n    <br><br>\n    <div>\n      <p class=\"r-16-gray px-4 pt-2 pb-1 text-center\" v-html=\"t('activity.info')\">\n      </p>\n    </div>\n  </div>\n  <div class=\"text-start px-4 pt-3\">\n    <p class=\"b-16-gray\" v-html=\"t('activity.temporalidad')\"></p>\n    <select id=\"FilterTempo\" class=\"form-control w-100 select-ap\" v-model=\"selectedOption\"\n      @change=\"GetDatos(selectedOption)\" v-html=\"t('activity.ultsem')\">\n    </select>\n    <div class=\"numeralia d-flex py-3\">\n      <div class=\"num-circle\">\n        <div class=\"circle-black b-48-gray p-3\">\n          <label class=\"m-auto\">{{ countAudios }}</label>\n        </div>\n      </div>\n      <div class=\"data-rec b-20-gray w-100\">\n        <label class=\"m-auto px-3 b-20-gray\" v-html=\"t('activity.audio')\"></label>\n      </div>\n    </div>\n    <div class=\"numeralia d-flex py-3\">\n      <div v-if=\"minutos > 0\" class=\"num-circle\">\n        <div class=\"circle-black b-20-gray p-3\">\n          <label class=\"m-auto\">{{ minutos + ':' + segundos.toString().padStart(2, '0') + 'm' }}</label>\n           <!-- <p class=\"m-auto\">{{ minutos + 'm' }}</p> \n           <br/>\n           <p class=\"m-auto\">{{  segundos.toString().padStart(2, '0') + 's' }}</p> -->\n        </div>\n      </div>\n      <div v-else class=\"num-circle\">\n        <div class=\"circle-black b-32-gray p-3\">\n          <label class=\"m-auto\">{{ segundos.toString().padStart(2, '0') + 's' }}</label>\n        </div>\n      </div>\n      <div class=\"data-rec b-20-gray w-100\">\n        <label class=\"m-auto px-3 b-20-gray\" v-html=\"t('activity.horas')\"></label>\n      </div>\n    </div>\n  </div>\n  <!-- GrÃ¡fica de barras -->\n  <div class=\"py-3 px-4\">\n    <p class=\"b-16-gray pt-2 pb-1 text-start\" v-html=\"t('activity.dias')\"></p>\n    <div>\n      <div v-if=\"historyStack.length > 0\" @click=\"goBack\" class=\"d-flex justify-content-start px-0\">\n        <div>\n          <button class=\"btn-back\">\n            <img width=\"20\" src=\"../assets/back.png\" class=\"m-auto\">\n          </button>\n        </div>\n        <div class=\"ps-0\">\n          <label class=\"b-18-gray\">Regresar</label>\n        </div>\n      </div>\n    </div>\n    <div>\n      <Bar style=\"overflow-y: visible;\" :data=\"barData\" :options=\"barOptions\" />\n    </div>\n  </div>\n  <!--GrÃ¡fica de calor-->\n  <div class=\"py-3 px-4\">\n    <p class=\"b-16-gray pt-2 pb-1 text-start\" v-html=\"t('activity.momentos')\">\n\n    </p>\n    <div style=\"display: flex; justify-content: center;\">\n      <table border=\"1\" style=\"border-collapse: collapse; width: 100%;\">\n        <tbody>\n          <!-- Generar filas desde la mÃ¡s alta hacia la mÃ¡s baja -->\n          <tr v-for=\"rowColor in maxRowsColor\" :key=\"rowColor\">\n            <td v-for=\"col in columnsColor\" :key=\"col\"\n              :style=\"{ backgroundColor: getColorAt(col, maxRowsColor - rowColor) }\" style=\"text-align:center;\">\n              {{ getValueAt(col, maxRowsColor - rowColor) ?? '' }}\n            </td>\n          </tr>\n\n          <!-- Fila inferior con nombres de los dÃ­as -->\n          <tr v-if=\"temporalidad != 2\">\n            <td v-for=\"col in columnsColor\" :key=\"col\" style=\"font-weight: bold; text-align: center;\">\n              {{ col.substring(0, 3) }}\n            </td>\n          </tr>\n          <tr v-else>\n            <td v-for=\"col in columnsColor\" :key=\"col\" style=\"font-weight: bold; text-align: center;\">\n              {{ col.substring(0, 5) }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"d-flex justify-content-start pt-4\">\n      <div class=\"mini-square\" style=\"background-color: #efefef;\"></div>\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.registro')\">\n\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-4\">\n      <div class=\"mini-square\" style=\"background-color: #E3FCFF;\"></div>\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.act')\">\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #FFE4B3;\"></div>\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.mente')\">\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #FFC4B3;\"></div>\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.lugares')\">\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #FF9797;\"></div>\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.palabras')\">\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #fb5353;\"></div>\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.hablar')\">\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n//Generales\nimport { useI18n } from 'vue-i18n'\nimport { ref, computed, onMounted } from 'vue'\nimport { API_BASE_URL } from '@/config/api'\n\nconst { t, locale } = useI18n();\nconst selectedOption = ref(1)\nconst temporalidad = ref(1)\nconst mesSeleccionado = ref(0)\nconst semanaSeleccionada = ref(0)\n// Cantidad de audios\nconst countAudios = ref(0)\n\nasync function GetAudiosCount(x) {\n  try {\n    const sesion = localStorage.getItem(\"token\")\n    if (!sesion) return\n\n    const response = await fetch(`${API_BASE_URL}/api/config/GetCountAudios`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ user: sesion, temporalidad: x })\n    })\n\n    const data = await response.json()\n\n    if (data.status == 1) {\n      countAudios.value = data.data\n    } else {\n      countAudios.value = 0\n    }\n\n  } catch (error) {\n    console.error(\"Error al cargar audios:\", error)\n  }\n}\n\n//Tiempo de escucha\nconst minutos = ref(0);\nconst segundos = ref(0);\n\nasync function GetTimeAudios(x) {\n  try {\n    const sesion = localStorage.getItem(\"token\")\n    if (!sesion) return\n\n    const response = await fetch(`${API_BASE_URL}/api/config/GetTimeAudios`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ user: sesion, temporalidad: x })\n    })\n\n    const data = await response.json()\n\n    if (data.status == 1) {\n\n      const totalSegundos = data.data;\n      // OpciÃ³n 1: Guardar en variables separadas\n      minutos.value = Math.floor(totalSegundos / 60);\n      segundos.value = Math.floor(totalSegundos % 60);\n    } else {\n      minutos.value = 0\n      segundos.value = 0\n    }\n\n  } catch (error) {\n    console.error(\"Error al cargar audios:\", error)\n  }\n}\n\n//GrÃ¡fica de barras\nimport { Chart as ChartJS, BarElement, CategoryScale, LinearScale, Tooltip, Legend } from 'chart.js'\nimport ChartDataLabels from 'chartjs-plugin-datalabels'\nimport { Bar } from 'vue-chartjs'\n\nconst daysLabels = ref([])\nconst daysData = ref([])\nconst drillSource = ref([])\nconst historyStack = ref([]);\n\nChartJS.register(BarElement, CategoryScale, LinearScale, Tooltip, Legend, ChartDataLabels)\n\nconst barData = computed(() => ({\n  labels: daysLabels.value,\n  datasets: [\n    {\n      label: '',\n      data: daysData.value, // ðŸ”¹ ahora usa los datos dinÃ¡micos\n      backgroundColor: '#AAAAAA',\n      barThickness: 14,\n      borderRadius: 10,\n      pointStyle: 'circle',\n    }\n  ]\n}))\nconst barOptions = {\n  layout: {\n    padding: {\n      top: 10\n    }\n  },\n  responsive: true,\n  onClick: (evt, elements) => {\n    if (!elements.length) return;\n\n    const index = elements[0].index;\n    const item = drillSource.value[index];\n\n    if (!item) return;\n\n    handleDrill(item);\n  },\n  plugins: {\n    legend: {\n      display: true,\n      labels: {\n        padding: 10,\n        color: '#555',\n        boxHeight: 0\n      },\n    },\n    datalabels: {\n      anchor: 'end',\n      align: 'start',\n      offset: -30,\n      backgroundColor: '#000000',\n      borderRadius: 999,\n      color: '#ffffff',\n      font: {\n        weight: '500',\n        size: 10,\n      },\n      padding: {\n        top: 8,\n        bottom: 8,\n        left: 9,\n        right: 9,\n      },\n      formatter: (value) => value,\n    },\n  },\n  scales: {\n    y: {\n      beginAtZero: true,\n      ticks: {\n        display: false,\n      },\n      grid: {\n        display: true\n      },\n    },\n    x: {\n      grid: {\n        display: false,\n      }\n    },\n  }\n}\n\nfunction handleDrill(item) {\n  // Guardamos estado actual ANTES de cambiar\n  historyStack.value.push({\n    temporalidad: temporalidad.value,\n    mes: mesSeleccionado.value,\n    semana: semanaSeleccionada.value\n  });\n\n  // â¬‡ï¸ Si estÃ¡s viendo aÃ±o â†’ pasar a meses\n  if (temporalidad.value == 3) {\n    mesSeleccionado.value = item.dia;   // â† viene del backend\n    temporalidad.value = 2;\n    GetDays();\n    return;\n  }\n\n  // â¬‡ï¸ Si estÃ¡s viendo mes â†’ pasar a semanas\n  if (temporalidad.value == 2) {\n    semanaSeleccionada.value = item.dia;  // â† viene del backend\n    temporalidad.value = 1;\n    GetDays();\n    return;\n  }\n}\n\nfunction goBack() {\n  if (!historyStack.value.length) return;\n\n  const previous = historyStack.value.pop();\n\n  temporalidad.value = previous.temporalidad;\n  mesSeleccionado.value = previous.mes;\n  semanaSeleccionada.value = previous.semana;\n\n  GetDays();\n}\n\nasync function GetDays() {\n  try {\n    const sesion = localStorage.getItem(\"token\")\n    if (!sesion) return\n\n    const response = await fetch(`${API_BASE_URL}/api/config/GetDays`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ user: sesion, temporalidad: temporalidad.value, anio: 0, mes: mesSeleccionado.value, semana: semanaSeleccionada.value })\n    })\n\n    const data = await response.json()\n\n    if (data.status == 1 && data.data != \"\") {\n      const parsedData = JSON.parse(data.data);\n      drillSource.value = parsedData;\n\n      if (temporalidad.value != 3) {\n        daysLabels.value = parsedData.map(item => [\n          item.nombre.substring(0, 3),\n          item.dia\n        ])\n      }\n      else {\n        daysLabels.value = parsedData.map(item => [\n          item.nombre.substring(0, 3)\n        ])\n      }\n\n      daysData.value = parsedData.map(item => item.cantidadAudios)\n    }\n    else {\n      daysLabels.value = []\n      daysData.value = [0, 0, 0, 0, 0, 0, 0];\n    }\n  } catch (error) {\n    console.error(\"Error al cargar audios:\", error)\n  }\n}\n\n//Mapa de calor\nconst coloresMomentos = [\n  \"#efefef\", // 0 â†’ Registro\n  \"#E3FCFF\", // 1 â†’ Act\n  \"#FFE4B3\", // 2 â†’ Mente\n  \"#FFC4B3\", // 3 â†’ Lugares\n  \"#FF9797\", // 4 â†’ Palabras\n  \"#fb5353\"  // 5 â†’ Hablar\n];\nconst diasOrden = ['Lunes', 'Martes', 'MiÃ©rcoles', 'Jueves', 'Viernes', 'SÃ¡bado', 'Domingo'];\nconst dataColorEs = ref({});\nconst dayMap = {\n  'Lunes': 'Mon',\n  'Martes': 'Tue',\n  'MiÃ©rcoles': 'Wed',\n  'Jueves': 'Thu',\n  'Viernes': 'Fri',\n  'SÃ¡bado': 'Sat',\n  'Domingo': 'Sun'\n};\n// const columnsColor = computed(() => {\n//   return locale.value === 'es'\n//     ? diasOrden \n//     : diasOrden.map(dia => dayMap[dia]);\n// });\n\nconst columnsColor = computed(() => {\n\n  // Semana â†’ DÃ­as\n  if (temporalidad.value == 1) {\n    return diasOrden\n  }\n\n  // Mes â†’ Semanas\n  if (temporalidad.value == 2) {\n    return [\"Sem 1\", \"Sem 2\", \"Sem 3\", \"Sem 4\", \"Sem 5\"]\n  }\n\n  // AÃ±o â†’ Meses\n  return [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"]\n})\n\nconst dataColor = computed(() => {\n  if (locale.value === 'es') return dataColorEs.value;\n\n  const translated = {};\n  for (const dia of diasOrden) {\n    translated[dayMap[dia]] = dataColorEs.value[dia] || [];\n  }\n  return translated;\n});\n\n// const dataColor = computed(() => {\n\n//   if (temporalidad.value === 1) {\n//     if (locale.value === 'es') return dataColorEs.value;\n\n//     const translated = {};\n//     for (const dia of diasOrden) {\n//       translated[dayMap[dia]] = dataColorEs.value[dia] || [];\n//     }\n//     return translated;\n//   }\n\n//   return dataColorEs.value;\n// });\n\n\nconst maxRowsColor = computed(() => {\n  return Math.max(...columnsColor.value.map(col => dataColor.value[col]?.length || 0), 0);\n});\nconst getValueAt = (col, rowIndex) => {\n  const item = dataColor.value[col]?.[rowIndex];\n  return item ? item.intervalo : null;\n};\n\n// function getColorAt(col, rowIndex) {\n//   const item = dataColor.value[col]?.[rowIndex];\n//   if (!item) return \"#fff\";\n//   return coloresMomentos[item.momento] || \"#fff\";\n// }\nfunction getColorAt(col, rowIndex) {\n  const item = dataColor.value[col]?.[rowIndex];\n\n  // Si no hay item â†’ blanco\n  if (!item) return \"#fff\";\n\n  // Si la cantidad es 0 â†’ blanco\n  if (!item.cantidad || item.cantidad === 0) return \"#fff\";\n\n  // Si hay dato â†’ pinta color\n  return coloresMomentos[item.momento] || \"#fff\";\n}\n\n// async function GetMomentsAudios(x) {\n//   try {\n//     const sesion = localStorage.getItem(\"token\")\n//     if (!sesion) return\n\n//     const response = await fetch(`${API_BASE_URL}/api/config/GetMomentsAudios`, {\n//       method: \"POST\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify({user: sesion, temporalidad: x  })\n//     })\n\n//     const data = await response.json()\n\n//     if (data.status === 1 && data.data) {\n//       const parsed = JSON.parse(data.data);\n//       console.log(data.data)\n\n//       // Inicializa todos los dÃ­as vacÃ­os\n//       const grouped = {};\n//       diasOrden.forEach(dia => { grouped[dia] = []; });\n\n//       // Agrupa los datos por dÃ­a\n//       parsed.forEach(item => {\n//         const dia = item.Dia; // Ej. \"SÃ¡bado\"\n//         const intervalo = item.Intervalo;\n//         const momento = item.Momento;\n//         const cantidad = item.CantidadAudios;\n\n//         if (grouped[dia]) {\n//           // ðŸ”¹ Puedes repetir segÃºn cantidad si quieres densidad visual\n//           for (let i = 0; i < cantidad; i++) {\n//             grouped[dia].push({ intervalo, momento });\n//           }\n//         }\n//       });\n\n//       dataColorEs.value = grouped;\n//       console.log(\"Momentos agrupados:\", grouped);\n//     } else {\n//       // ðŸ”¹ Siempre mantiene estructura de dÃ­as vacÃ­os\n//       const empty = {};\n//       diasOrden.forEach(dia => { empty[dia] = []; });\n//       dataColorEs.value = empty;\n//     }\n\n//   } catch (error) {\n//     console.error(\"Error al cargar audios:\", error)\n//   }\n// }\n\nasync function GetMomentsAudios(x) {\n  try {\n    const sesion = localStorage.getItem(\"token\")\n    if (!sesion) return\n\n    const response = await fetch(`${API_BASE_URL}/api/config/GetMomentsAudios`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ user: sesion, temporalidad: x })\n    })\n\n    const data = await response.json()\n    console.log(data.data)\n    if (data.status !== 1 || !data.data) {\n      dataColorEs.value = {}\n      return;\n    }\n\n    const parsed = JSON.parse(data.data)\n    // -------------------------\n    // ðŸŽ¯ SEMANA\n    // -------------------------\n    if (x == 1) {\n      const grouped = {}\n      diasOrden.forEach(d => grouped[d] = {})   // OBJETO, no array\n\n      parsed.forEach(item => {\n        const dia = item.Dia\n        const clave = `${item.Intervalo}-${item.Momento}`\n        // const intervalo = item.Intervalo\n\n        if (!grouped[dia]) return\n\n        if (!grouped[dia][clave]) {\n          grouped[dia][clave] = {\n            intervalo: item.Intervalo,\n            momento: item.Momento,\n            cantidad: 0\n          }\n        }\n\n        grouped[dia][clave].cantidad += item.CantidadAudios\n      })\n\n      // Convertimos OBJETO â†’ ARRAY\n      const result = {}\n      diasOrden.forEach(d => {\n        result[d] = Object.values(grouped[d])\n      })\n\n      dataColorEs.value = result\n      return\n    }\n\n    if (x == 2) {\n      const semanas = [\"Sem 1\", \"Sem 2\", \"Sem 3\", \"Sem 4\", \"Sem 5\"]\n\n      const grouped = {}\n      semanas.forEach(s => grouped[s] = {})\n\n      parsed.forEach(item => {\n        const key = \"Sem \" + item.Semana\n        const clave = `${item.Intervalo}-${item.Momento}`\n        //const intervalo = item.Intervalo\n\n        if (!grouped[key]) return\n\n        if (!grouped[key][clave]) {\n          grouped[key][clave] = {\n            intervalo: item.Intervalo,\n            momento: item.Momento,\n            cantidad: 0\n          }\n        }\n\n        grouped[key][clave].cantidad += item.CantidadAudios\n      })\n\n      const result = {}\n      semanas.forEach(s => {\n        result[s] = Object.values(grouped[s])\n      })\n\n      dataColorEs.value = result\n      return\n    }\n\n    // -------------------------\n    // ðŸŽ¯ AÃ‘O  (Meses)\n    // -------------------------\n\n\n    if (x == 3) {\n      const meses = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"]\n\n      // Primero organizamos por mes pero como OBJETO, no arreglo\n      const grouped = {}\n      meses.forEach(m => grouped[m] = {})\n\n      parsed.forEach(item => {\n        const mes = item.Label\n        const clave = `${item.Intervalo}-${item.Momento}`\n        //const intervalo = item.Intervalo\n\n        if (!grouped[mes]) return\n\n        // Si no existe ese intervalo aÃºn, crÃ©alo\n        if (!grouped[mes][clave]) {\n          grouped[mes][clave] = {\n            intervalo: item.Intervalo,\n            momento: item.Momento,\n            cantidad: 0\n          }\n        }\n\n        // Sumamos los audios\n        grouped[mes][clave].cantidad += item.CantidadAudios\n      })\n\n      // ðŸ”¥ ImportantÃ­simo:\n      // Tu componente espera ARRAYS, asÃ­ que convertimos de objeto â†’ arreglo\n      const result = {}\n      meses.forEach(m => {\n        result[m] = Object.values(grouped[m])\n      })\n\n      dataColorEs.value = result\n      return\n    }\n\n    //  if (x == 3){\n    //       const meses = [\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"]\n\n    //       const grouped = {}\n    //       meses.forEach(m => grouped[m] = [])\n\n    //       parsed.forEach(item => {\n    //         const key = item.Label   \n\n    //         if(!grouped[key]) return\n\n    //         for(let i = 0; i < item.CantidadAudios; i++){\n    //           grouped[key].push({\n    //             intervalo: item.Intervalo,\n    //             momento: item.Momento\n    //           })\n    //         }\n    //       })\n\n    //       dataColorEs.value = grouped\n    //       return\n    //     }\n\n  } catch (e) {\n    console.error(\"Error momentos\", e)\n  }\n}\n\nonMounted(() => {\n  GetDatos(selectedOption.value)\n})\n\nfunction GetDatos(x) {\n  temporalidad.value = x;\n  mesSeleccionado.value = 0;\n  semanaSeleccionada.value = 0;\n  GetAudiosCount(x);\n  GetTimeAudios(x);\n  GetDays();\n  GetMomentsAudios(x);\n}\n</script>\n\n<style scoped>\ntable td,\ntable th {\n  border: 1px solid #ccc;\n}\n\n.h6 {\n  height: 24px;\n  width: 32px;\n}\n</style>","import script from \"./GuiaDashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./GuiaDashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./GuiaDashboard.vue?vue&type=style&index=0&id=6de6a518&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6de6a518\"]])\n\nexport default __exports__"],"names":["t","locale","useI18n","selectedOption","ref","temporalidad","mesSeleccionado","semanaSeleccionada","countAudios","async","GetAudiosCount","x","sesion","localStorage","getItem","response","fetch","API_BASE_URL","method","headers","body","JSON","stringify","user","data","json","status","value","error","console","minutos","segundos","GetTimeAudios","totalSegundos","Math","floor","daysLabels","daysData","drillSource","historyStack","ChartJS","register","BarElement","CategoryScale","LinearScale","Tooltip","Legend","ChartDataLabels","barData","computed","labels","datasets","label","backgroundColor","barThickness","borderRadius","pointStyle","barOptions","layout","padding","top","responsive","onClick","evt","elements","length","index","item","handleDrill","plugins","legend","display","color","boxHeight","datalabels","anchor","align","offset","font","weight","size","bottom","left","right","formatter","scales","y","beginAtZero","ticks","grid","push","mes","semana","dia","GetDays","goBack","previous","pop","anio","parsedData","parse","map","nombre","substring","cantidadAudios","coloresMomentos","diasOrden","dataColorEs","dayMap","columnsColor","dataColor","translated","maxRowsColor","max","col","getValueAt","rowIndex","intervalo","getColorAt","cantidad","momento","GetMomentsAudios","log","parsed","grouped","forEach","d","Dia","clave","Intervalo","Momento","CantidadAudios","result","Object","values","semanas","s","key","Semana","meses","m","Label","e","GetDatos","onMounted","__exports__"],"sourceRoot":""}