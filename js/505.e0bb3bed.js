"use strict";(self["webpackChunkangerpulse"]=self["webpackChunkangerpulse"]||[]).push([[505],{5505:function(t,a,e){e.r(a),e.d(a,{default:function(){return Ct}});e(8111),e(2489),e(7588),e(1701),e(8237),e(9112),e(3110);var l=e(6768),i=e(144),s=e(5130),r=e(4232),n=e(2674),u=e(5384),o=e(8077),c=e(1010),v=e(17),d=e(3408);const p=["innerHTML"],y={class:"text-start px-4 pt-3"},g=["innerHTML"],m=["innerHTML"],k={class:"numeralia d-flex py-3"},h={class:"num-circle"},b={class:"circle-black b-48-gray p-3"},L={class:"m-auto"},f={class:"data-rec b-20-gray w-100"},x=["innerHTML"],_={class:"numeralia d-flex py-3"},E={key:0,class:"num-circle"},R={class:"circle-black b-20-gray p-3"},C={class:"m-auto"},M={key:1,class:"num-circle"},w={class:"circle-black b-20-gray p-3"},F={class:"m-auto"},W={key:2,class:"num-circle"},X={class:"circle-black b-20-gray p-3"},T={class:"m-auto"},q={class:"data-rec b-20-gray w-100"},H=["innerHTML"],S={class:"card p-4 mt-4 shadow-sm"},j=["innerHTML"],K={class:"d-flex align-items-center mb-3"},B={style:{height:"300px",width:"100%"}},$={key:1,class:"d-flex justify-content-center align-items-center h-100"},A={class:"text-muted"},I={class:"py-3 px-4"},O=["innerHTML"],P={class:"pila-table"},N={key:0,class:"bloque-celda-wrapper"},J=["onClick"],Q={key:0,class:"custom-tooltip"},V={class:"d-flex justify-content-start pt-4"},U={class:"ps-3"},z={class:"b-14-gray text-start"},D={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},G={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},Z={class:"d-flex justify-content-start pt-4"},Y={class:"ps-3"},tt={class:"b-14-gray text-start"},at={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},et={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},lt={class:"d-flex justify-content-start pt-3"},it={class:"ps-3"},st={class:"b-14-gray text-start"},rt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},nt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},ut={class:"d-flex justify-content-start pt-3"},ot={class:"ps-3"},ct={class:"b-14-gray text-start"},vt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},dt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},pt={class:"d-flex justify-content-start pt-3"},yt={class:"ps-3"},gt={class:"b-14-gray text-start"},mt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},kt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},ht={class:"d-flex justify-content-start pt-3 pb-4"},bt={class:"ps-3"},Lt={class:"b-14-gray text-start"},ft={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},xt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}};var _t={__name:"AngerPrueba",setup(t){v.t1.register(v.hE,v.m_,v.s$,v.E8,v.PP,v.kc,d.A);const{t:a,locale:e}=(0,u.s9)(),_t=(0,i.KR)(1),Et=(0,i.KR)(1),Rt=(0,i.KR)(0),Ct=(0,i.KR)(0),Mt=(0,i.KR)(0),wt=(0,i.KR)([]),Ft=(0,i.KR)(null),Wt=["#efefef","#E3FCFF","#FFE4B3","#FFC4B3","#FF9797","#fb5353"];function Xt(t){_t.value=t,Et.value=t,Tt()}async function Tt(){try{const t=localStorage.getItem("token");if(!t)return;const a=await fetch(`${n.J}/api/config/GetUserMoments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,temporalidad:_t.value,mes:Rt.value,semana:Ct.value,dia:Mt.value})}),e=await a.json(),l="string"===typeof e.data?JSON.parse(e.data):e.data;wt.value=Array.isArray(l)?l:[]}catch(t){console.error("Error momentos",t)}}(0,l.sV)(()=>{Tt(),window.addEventListener("click",qt)}),(0,l.hi)(()=>{window.removeEventListener("click",qt)});const qt=t=>{t.target.closest(".bloque-celda")||(Ft.value=null)},Ht=t=>{if(0===t||!t)return"0s";if(t<60)return`${t}s`;if(t<3600){const a=Math.floor(t/60),e=t%60;return 0===e?`${a}m`:`${a}m ${e}s`}{const a=Math.floor(t/3600),e=Math.floor(t%3600/60);return 0===e?`${a}h`:`${a}h ${e}m`}},St=(0,l.EW)(()=>wt.value&&0!==wt.value.length?wt.value.reduce((t,a)=>t+(a.Cantidad||0),0):0),jt=(0,l.EW)(()=>{const t=wt.value.reduce((t,a)=>t+(a.Tiempo||0),0);return{h:Math.floor(t/3600),m:Math.floor(t%3600/60),s:t%60}}),Kt=(0,l.EW)(()=>{const t=wt.value.reduce((t,a)=>{const l=a.Numero;return t[l]||(t[l]={label:e.value.startsWith("es")?a.Etiqueta:a.Label,cantidad:0,numero:l}),t[l].cantidad+=a.Cantidad||0,t},{}),l=Object.values(t).sort((t,a)=>t.numero-a.numero);return{labels:l.map(t=>t.label),rawItems:l,datasets:[{label:a("activity.cantidadAudios"),data:l.map(t=>t.cantidad),backgroundColor:"#fb5353",borderRadius:4,barThickness:25}]}}),Bt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1},datalabels:{anchor:"end",align:"top",formatter:Math.round,font:{weight:"bold",size:12},color:"#333"}},layout:{padding:{top:20}},scales:{y:{beginAtZero:!0,grid:{display:!1},ticks:{display:!1}},x:{grid:{display:!1}}},onClick:(t,a)=>{if(a.length>0){const t=a[0].index,e=Kt.value.rawItems[t];$t(e.numero)}},onHover:(t,a)=>{t.native.target.style.cursor=a[0]?"pointer":"default"}},$t=t=>{3==_t.value?(Rt.value=t,_t.value=2):2==_t.value?(Ct.value=t,_t.value=1):1==_t.value&&(Mt.value=t,_t.value=1),Et.value=_t.value,Tt()},At=()=>{1==_t.value&&0==Mt.value?(_t.value=2,Ct.value=0,Mt.value=0):1==_t.value&&Mt.value>0?(_t.value=1,Mt.value=0):2==_t.value&&(_t.value=3,Rt.value=0),Et.value=_t.value,Tt()},It=(0,l.EW)(()=>{if(!wt.value.length)return[];const t=wt.value.map(t=>({name:e.value.startsWith("es")?t.Etiqueta:t.Label,numero:t.Numero})),a=t.filter((t,a,e)=>a===e.findIndex(a=>a.name===t.name));return a.sort((t,a)=>t.numero-a.numero)}),Ot=t=>Wt[t]||"#FFFFFF",Pt=(0,l.EW)(()=>{if(!wt.value.length||!It.value.length)return{};const t={};return It.value.forEach(a=>{const l=wt.value.filter(t=>{const l=e.value.startsWith("es")?t.Etiqueta:t.Label;return l===a.name&&t.Bloque});t[a.name]=l.sort((t,a)=>t.Bloque.localeCompare(a.Bloque))}),t}),Nt=(0,l.EW)(()=>{const t=Object.values(Pt.value).map(t=>t.length);return t.length?Math.max(...t):0}),Jt=t=>{Ft.value===t?Ft.value=null:Ft.value=t},Qt=(0,l.EW)(()=>{const t={};return wt.value.forEach(a=>{const e=a.Momento;void 0!==e&&null!==e&&(t[e]||(t[e]=0),t[e]+=a.Cantidad||0)}),t}),Vt=(0,l.EW)(()=>{const t={};return wt.value.forEach(a=>{const e=a.Momento;void 0!==e&&null!==e&&(t[e]||(t[e]=0),t[e]+=a.Tiempo||0)}),t}),Ut={mounted(t,a){t._tooltip=new o.m_(t,{title:a.value,placement:"top",trigger:"hover"})},updated(t,a){t._tooltip&&a.value!==a.oldValue&&t._tooltip.setContent({".tooltip-inner":a.value})},unmounted(t){t._tooltip&&(t._tooltip.dispose(),delete t._tooltip)}};return(t,e)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.Lk)("label",{class:"b-24-black",innerHTML:(0,i.R1)(a)("activity.title")},null,8,p),e[2]||(e[2]=(0,l.Lk)("br",null,null,-1))]),(0,l.Lk)("div",y,[(0,l.Lk)("p",{class:"b-16-gray",innerHTML:(0,i.R1)(a)("activity.temporalidad")},null,8,g),(0,l.bo)((0,l.Lk)("select",{id:"FilterTempo",class:"form-control w-100 select-ap","onUpdate:modelValue":e[0]||(e[0]=t=>Et.value=t),onChange:e[1]||(e[1]=t=>Xt(Et.value)),innerHTML:(0,i.R1)(a)("activity.ultsem")},null,40,m),[[s.u1,Et.value]]),(0,l.Lk)("div",k,[(0,l.Lk)("div",h,[(0,l.Lk)("div",b,[(0,l.Lk)("label",L,(0,r.v_)(St.value),1)])]),(0,l.Lk)("div",f,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,i.R1)(a)("activity.audio")},null,8,x)])]),(0,l.Lk)("div",_,[jt.value.h>0?((0,l.uX)(),(0,l.CE)("div",E,[(0,l.Lk)("div",R,[(0,l.Lk)("label",C,(0,r.v_)(jt.value.h)+":"+(0,r.v_)(jt.value.m.toString().padStart(2,"0"))+":"+(0,r.v_)(jt.value.s.toString().padStart(2,"0"))+"h ",1)])])):jt.value.m>0?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",w,[(0,l.Lk)("label",F,(0,r.v_)(jt.value.m)+":"+(0,r.v_)(jt.value.s.toString().padStart(2,"0"))+"m ",1)])])):((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",X,[(0,l.Lk)("label",T,(0,r.v_)(jt.value.s.toString().padStart(2,"0"))+"s ",1)])])),(0,l.Lk)("div",q,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,i.R1)(a)("activity.horas")},null,8,H)])])]),(0,l.Lk)("div",S,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,i.R1)(a)("activity.dias")},null,8,j),(0,l.Lk)("div",K,[_t.value<3?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:At,class:"btn btn-sm btn-outline-secondary me-3"}," â† "+(0,r.v_)((0,i.R1)(a)("activity.btnBack")),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",B,[wt.value.length>0?((0,l.uX)(),(0,l.Wv)((0,i.R1)(c.yP),{key:0,data:Kt.value,options:Bt},null,8,["data"])):((0,l.uX)(),(0,l.CE)("div",$,[(0,l.Lk)("p",A,(0,r.v_)((0,i.R1)(a)("common.noData")),1)]))])]),(0,l.Lk)("div",I,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,i.R1)(a)("activity.momentos")},null,8,O),(0,l.Lk)("div",null,[(0,l.Lk)("table",P,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Nt.value,t=>((0,l.uX)(),(0,l.CE)("tr",{key:t},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(It.value,a=>((0,l.uX)(),(0,l.CE)("td",{key:a.name},[Pt.value[a.name][Nt.value-t]?((0,l.uX)(),(0,l.CE)("div",N,[(0,l.Lk)("div",{class:"bloque-celda",style:(0,r.Tr)({backgroundColor:Ot(Pt.value[a.name][Nt.value-t].Momento)}),onClick:e=>Jt(Pt.value[a.name][Nt.value-t],e)},[(0,l.eW)((0,r.v_)(Pt.value[a.name][Nt.value-t].Bloque)+" ",1),Ft.value===Pt.value[a.name][Nt.value-t]?((0,l.uX)(),(0,l.CE)("div",Q,[e[3]||(e[3]=(0,l.Lk)("strong",null,"Cantidad:",-1)),(0,l.eW)(" "+(0,r.v_)(Ft.value.Cantidad)+" audios ",1),e[4]||(e[4]=(0,l.Lk)("br",null,null,-1)),e[5]||(e[5]=(0,l.Lk)("strong",null,"Tiempo:",-1)),(0,l.eW)(" "+(0,r.v_)(Ht(Ft.value.Tiempo))+" ",1),e[6]||(e[6]=(0,l.Lk)("div",{class:"tooltip-arrow"},null,-1))])):(0,l.Q3)("",!0)],12,J)])):(0,l.Q3)("",!0)]))),128))]))),128))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(It.value,t=>((0,l.uX)(),(0,l.CE)("th",{key:t.name},(0,r.v_)(t.name),1))),128))])])])]),(0,l.Lk)("div",V,[e[7]||(e[7]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#efefef","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",U,[(0,l.Lk)("div",z,(0,r.v_)((0,i.R1)(a)("activity.registro")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",D,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Qt.value[0]||0),1)])),[[Ut,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",G,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(Ht(Vt.value?.[0]||0)),1)])),[[Ut,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",Z,[e[8]||(e[8]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#E3FCFF","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",Y,[(0,l.Lk)("div",tt,(0,r.v_)((0,i.R1)(a)("activity.act")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",at,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Qt.value[1]||0),1)])),[[Ut,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",et,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(Ht(Vt.value?.[1]||0)),1)])),[[Ut,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",lt,[e[9]||(e[9]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFE4B3","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",it,[(0,l.Lk)("div",st,(0,r.v_)((0,i.R1)(a)("activity.mente")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",rt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Qt.value[2]||0),1)])),[[Ut,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",nt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(Ht(Vt.value?.[2]||0)),1)])),[[Ut,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",ut,[e[10]||(e[10]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFC4B3","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",ot,[(0,l.Lk)("div",ct,(0,r.v_)((0,i.R1)(a)("activity.lugares")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",vt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Qt.value[3]||0),1)])),[[Ut,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",dt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(Ht(Vt.value?.[3]||0)),1)])),[[Ut,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",pt,[e[11]||(e[11]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FF9797","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",yt,[(0,l.Lk)("div",gt,(0,r.v_)((0,i.R1)(a)("activity.palabras")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",mt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Qt.value[4]||0),1)])),[[Ut,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",kt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(Ht(Vt.value?.[4]||0)),1)])),[[Ut,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",ht,[e[12]||(e[12]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#fb5353","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",bt,[(0,l.Lk)("div",Lt,(0,r.v_)((0,i.R1)(a)("activity.hablar")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",ft,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Qt.value[5]||0),1)])),[[Ut,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",xt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(Ht(Vt.value?.[5]||0)),1)])),[[Ut,(0,i.R1)(a)("activity.horas")]])])])])],64))}},Et=e(1241);const Rt=(0,Et.A)(_t,[["__scopeId","data-v-6b892898"]]);var Ct=Rt}}]);
//# sourceMappingURL=505.e0bb3bed.js.map