{"version":3,"file":"js/505.1e9dbf12.js","mappings":"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","sources":["webpack://angerpulse/./src/components/AngerPrueba.vue","webpack://angerpulse/./src/components/AngerPrueba.vue?64f2"],"sourcesContent":["<template>\n  <div>\n    <label class=\"b-24-black\" v-html=\"t('activity.title')\"></label>\n    <br>\n  </div>\n  <div class=\"text-start px-4 pt-3\">\n    <p class=\"b-16-gray\" v-html=\"t('activity.temporalidad')\"></p>\n    <select id=\"FilterTempo\" class=\"form-control w-100 select-ap\" v-model=\"selectedOption\"\n      @change=\"GetDatos(selectedOption)\" v-html=\"t('activity.ultsem')\">\n    </select>\n    <div class=\"numeralia d-flex py-3\">\n      <div class=\"num-circle\">\n        <div class=\"circle-black b-48-gray p-3\">\n          <label class=\"m-auto\">{{ countAudios }}</label>\n        </div>\n      </div>\n      <div class=\"data-rec b-20-gray w-100\">\n        <label class=\"m-auto px-3 b-20-gray\" v-html=\"t('activity.audio')\"></label>\n      </div>\n    </div>\n    <div class=\"numeralia d-flex py-3\">\n  <!-- Si hay horas -->\n  <div v-if=\"tiempoResumen.h > 0\" class=\"num-circle\">\n    <div class=\"circle-black b-20-gray p-3\">\n      <label class=\"m-auto\">\n        {{ tiempoResumen.h }}:{{ tiempoResumen.m.toString().padStart(2, '0') }}:{{ tiempoResumen.s.toString().padStart(2, '0') }}h\n      </label>\n    </div>\n  </div>\n  \n  <!-- Si no hay horas pero hay minutos -->\n  <div v-else-if=\"tiempoResumen.m > 0\" class=\"num-circle\">\n    <div class=\"circle-black b-20-gray p-3\">\n      <label class=\"m-auto\">\n        {{ tiempoResumen.m }}:{{ tiempoResumen.s.toString().padStart(2, '0') }}m\n      </label>\n    </div>\n  </div>\n  \n  <!-- Si solo hay segundos -->\n  <div v-else class=\"num-circle\">\n    <div class=\"circle-black b-20-gray p-3\">\n      <label class=\"m-auto\">\n        {{ tiempoResumen.s.toString().padStart(2, '0') }}s\n      </label>\n    </div>\n  </div>\n\n  <div class=\"data-rec b-20-gray w-100\">\n    <label class=\"m-auto px-3 b-20-gray\" v-html=\"t('activity.horas')\"></label>\n  </div>\n</div>\n\n  </div>\n  <!--Gráfica de barras-->\n  <div class=\"card p-4 mt-4 shadow-sm\">\n    <p class=\"b-16-gray pt-2 pb-1 text-start\" v-html=\"t('activity.dias')\"></p>\n    <div class=\"d-flex align-items-center mb-3\">\n      <!-- Botón de regreso dinámico -->\n      <button v-if=\"temporalidad < 3\" @click=\"goBack\" class=\"btn btn-sm btn-outline-secondary me-3\">\n        ← {{ t('activity.btnBack') }}\n      </button>\n    </div>\n    <div style=\"height: 300px; width: 100%;\">\n      <Bar v-if=\"apiData.length > 0\" :data=\"chartData\" :options=\"chartOptions\" />\n      <div v-else class=\"d-flex justify-content-center align-items-center h-100\">\n        <p class=\"text-muted\">{{ t('common.noData') }}</p>\n      </div>\n    </div>\n  </div>\n\n  <!--Mapa de calor-->\n  <div class=\"py-3 px-4\">\n    <p class=\"b-16-gray pt-2 pb-1 text-start\" v-html=\"t('activity.momentos')\">\n    </p>\n    <div>\n      <table class=\"pila-table\">\n        <tbody>\n          <tr v-for=\"rowIndex in maxRows\" :key=\"rowIndex\">\n            <td v-for=\"header in tableHeaders\" :key=\"header.name\">\n              <div v-if=\"tableColumns[header.name][maxRows - rowIndex]\" class=\"bloque-celda-wrapper\">\n                <div class=\"bloque-celda\"\n                  :style=\"{ backgroundColor: getMomentoColor(tableColumns[header.name][maxRows - rowIndex].Momento) }\"\n                  @click=\"toggleTooltip(tableColumns[header.name][maxRows - rowIndex], $event)\">\n                  {{ tableColumns[header.name][maxRows - rowIndex].Bloque }}\n                  <div v-if=\"selectedBlock === tableColumns[header.name][maxRows - rowIndex]\" class=\"custom-tooltip\">\n                    <strong>Cantidad:</strong> {{ selectedBlock.Cantidad }} audios\n                    <br>\n                    <strong>Tiempo:</strong> {{ formatTiempo(selectedBlock.Tiempo) }}\n                    <div class=\"tooltip-arrow\"></div>\n                  </div>\n                </div>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <th v-for=\"header in tableHeaders\" :key=\"header.name\">\n              {{ header.name }}\n            </th>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n    <div class=\"d-flex justify-content-start pt-4\">\n      <div class=\"mini-square\" style=\"background-color: #efefef; margin-top:2px;\"></div>\n      <div class=\"ps-3\">\n        <div class=\"b-14-gray text-start\">\n          {{ t('activity.registro') }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.audio')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.audioMin') }}: {{ resumenMomentos[0] || 0 }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.horas')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.horasMin') }}: {{ formatTiempo(resumenTiempo?.[0] || 0) }}\n        </div>\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-4\">\n      <div class=\"mini-square\" style=\"background-color: #E3FCFF; margin-top:2px;\"></div>\n      <div class=\"ps-3\">\n        <div class=\"b-14-gray text-start\">\n          {{ t('activity.act') }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.audio')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.audioMin') }}: {{ resumenMomentos[1] || 0 }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.horas')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.horasMin') }}: {{ formatTiempo(resumenTiempo?.[1] || 0) }}\n        </div>\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #FFE4B3; margin-top:2px;\"></div>\n      <div class=\"ps-3\">\n        <div class=\"b-14-gray text-start\">\n          {{ t('activity.mente') }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.audio')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.audioMin') }}: {{ resumenMomentos[2] || 0 }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.horas')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.horasMin') }}: {{ formatTiempo(resumenTiempo?.[2] || 0) }}\n        </div>\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #FFC4B3; margin-top:2px;\"></div>\n      <div class=\"ps-3\">\n        <div class=\"b-14-gray text-start\">\n          {{ t('activity.lugares') }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.audio')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.audioMin') }}: {{ resumenMomentos[3] || 0 }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.horas')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.horasMin') }}: {{ formatTiempo(resumenTiempo?.[3] || 0) }}\n        </div>\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3\">\n      <div class=\"mini-square\" style=\"background-color: #FF9797; margin-top:2px;\"></div>\n      <div class=\"ps-3\">\n        <div class=\"b-14-gray text-start\">\n          {{ t('activity.palabras') }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.audio')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.audioMin') }}: {{ resumenMomentos[4] || 0 }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.horas')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.horasMin') }}: {{ formatTiempo(resumenTiempo?.[4] || 0) }}\n        </div>\n      </div>\n    </div>\n    <div class=\"d-flex justify-content-start pt-3 pb-4\">\n      <div class=\"mini-square\" style=\"background-color: #fb5353; margin-top:2px;\"></div>\n      <div class=\"ps-3\">\n        <div class=\"b-14-gray text-start\">\n          {{ t('activity.hablar') }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.audio')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.audioMin') }}: {{ resumenMomentos[5] || 0 }}\n        </div>\n        <div class=\"r-12-gray text-start\" v-tooltip=\"t('activity.horas')\"\n          style=\"padding-right: 10px; width: fit-content; cursor: help;\">\n          {{ t('activity.horasMin') }}: {{ formatTiempo(resumenTiempo?.[5] || 0) }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n/*Imports*/\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { API_BASE_URL } from '@/config/api'\nimport { useI18n } from 'vue-i18n'\nimport { Tooltip } from 'bootstrap';\nimport { Bar } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, Tooltip as ChartTooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\n\n// Registramos el plugin en ChartJS\nChartJS.register(Title, ChartTooltip, Legend, BarElement, CategoryScale, LinearScale, ChartDataLabels);\n\n/*Declaraciones*/\nconst { t, locale } = useI18n();\nconst temporalidad = ref(1);\nconst selectedOption = ref(1)\nconst mesSeleccionado = ref(0);\nconst semanaSeleccionada = ref(0);\nconst diaSeleccionado = ref(0)\n//Map de calor\nconst apiData = ref([]);\nconst selectedBlock = ref(null); // Estado para controlar qué tooltip está abierto\n// const dataColorEs = ref({});\nconst coloresMomentos = [\n  \"#efefef\", // Momento 0\n  \"#E3FCFF\", // Momento 1\n  \"#FFE4B3\", // Momento 2\n  \"#FFC4B3\", // Momento 3\n  \"#FF9797\", // Momento 4\n  \"#fb5353\"  // Momento 5\n];\n\nonMounted(() => {\n  GetMomentsAudios();\n  window.addEventListener('click', handleGlobalClick);\n});\n\nonUnmounted(() => {\n  window.removeEventListener('click', handleGlobalClick); //Removemos la escucha del click global\n});\n\nfunction GetDatos(x) {\n  temporalidad.value = x;\n  selectedOption.value = x;\n  GetMomentsAudios();\n}\n\n/* Apis */\n//Momentos\nasync function GetMomentsAudios() {\n  try {\n    const sesion = localStorage.getItem(\"token\");\n    if (!sesion) return;\n\n    const response = await fetch(`${API_BASE_URL}/api/config/GetUserMoments`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        user: sesion, temporalidad: temporalidad.value, mes: mesSeleccionado.value,\n        semana: semanaSeleccionada.value, dia: diaSeleccionado.value\n      })\n    })\n\n    const data = await response.json()\n    const parsedData = typeof data.data === 'string' ? JSON.parse(data.data) : data.data;\n\n    apiData.value = Array.isArray(parsedData) ? parsedData : [];\n  }\n  catch (e) { console.error(\"Error momentos\", e) }\n}\n\n/* Funciones generales */\n// Función para manejar el clic global y cerrar tooltips\nconst handleGlobalClick = (event) => {\n  if (!event.target.closest('.bloque-celda')) {\n    selectedBlock.value = null;\n  }\n};\nconst formatTiempo = (segundos) => {\n  if (segundos === 0 || !segundos) return \"0s\";\n\n  if (segundos < 60) {\n    // Menos de un minuto\n    return `${segundos}s`;\n  } else if (segundos < 3600) {\n    // Menos de una hora -> Convertir a minutos\n    const minutos = Math.floor(segundos / 60);\n    const segundosRestantes = segundos % 60;\n\n    // Si los segundos restantes son 0, solo mostramos minutos\n    return segundosRestantes === 0\n      ? `${minutos}m`\n      : `${minutos}m ${segundosRestantes}s`;\n  } else {\n    // Una hora o más\n    const horas = Math.floor(segundos / 3600);\n    const minutosRestantes = Math.floor((segundos % 3600) / 60);\n\n    return minutosRestantes === 0\n      ? `${horas}h`\n      : `${horas}h ${minutosRestantes}m`;\n  }\n};\n\n/* Contador de audios */\n//Cuenta los audios\nconst countAudios = computed(() => {\n  if (!apiData.value || apiData.value.length === 0) return 0;\n\n  // Usamos reduce para sumar la propiedad Cantidad de cada registro\n  return apiData.value.reduce((total, item) => {\n    return total + (item.Cantidad || 0);\n  }, 0);\n});\n\n/* Tiempo de reproducción */\n//Suma de tiempo\nconst tiempoResumen = computed(() => {\n  const totalSegundos = apiData.value.reduce((total, item) => {\n    return total + (item.Tiempo || 0);\n  }, 0);\n\n  return {\n    h: Math.floor(totalSegundos / 3600),\n    m: Math.floor((totalSegundos % 3600) / 60),\n    s: totalSegundos % 60\n  };\n});\n\n/* Funciones de gráfica de barras */\n// Datos de gráfica\nconst chartData = computed(() => {\n  // 1. Agrupamos por 'Numero' para sumar cantidades y obtener la etiqueta por idioma\n  const grupos = apiData.value.reduce((acc, item) => {\n    const n = item.Numero;\n    if (!acc[n]) {\n      acc[n] = {\n        label: locale.value.startsWith('es') ? item.Etiqueta : item.Label,\n        cantidad: 0,\n        numero: n // Guardamos el Numero original para el clic\n      };\n    }\n    acc[n].cantidad += item.Cantidad || 0;\n    return acc;\n  }, {});\n\n  // 2. Ordenar por la propiedad Numero\n  const ordenados = Object.values(grupos).sort((a, b) => a.numero - b.numero);\n\n  // RETORNO MODIFICADO:\n  return {\n    labels: ordenados.map(d => d.label),\n    rawItems: ordenados,\n    datasets: [\n      {\n        label: t('activity.cantidadAudios'),\n        data: ordenados.map(d => d.cantidad),\n        backgroundColor: '#fb5353',\n        borderRadius: 4,\n        barThickness: 25\n      }\n    ]\n  };\n});\n//Configuración de gráfica\nconst chartOptions = {\n  responsive: true,\n  maintainAspectRatio: false,\n  plugins: {\n    legend: { display: false },\n    tooltip: {\n      enabled: false \n    },\n    datalabels: {\n      anchor: 'end',\n      align: 'top',\n      formatter: Math.round,\n      font: {\n        weight: 'bold',\n        size: 12\n      },\n      color: '#333'\n    }\n  },\n  layout: {\n    padding: {\n      top: 20\n    }\n  },\n  scales: {\n    y: {\n      beginAtZero: true,\n      grid: { display: false },\n      ticks: { display: false }\n    },\n    x: {\n      grid: { display: false }\n    }\n  },\n  onClick: (event, elements) => {\n    if (elements.length > 0) {\n      const index = elements[0].index;\n      const selectedItem = chartData.value.rawItems[index];\n\n      handleDrillDown(selectedItem.numero);\n    }\n  },\n  // Importante para que el cursor cambie al pasar sobre las barras\n  onHover: (event, chartElement) => {\n    event.native.target.style.cursor = chartElement[0] ? 'pointer' : 'default';\n  }\n};\n//Bajar de nivel\nconst handleDrillDown = (numero) => {\n  if (temporalidad.value == 3) {\n    mesSeleccionado.value = numero;\n    temporalidad.value = 2; \n  }\n  else if (temporalidad.value == 2) {\n    semanaSeleccionada.value = numero;\n    temporalidad.value = 1; \n  }\n  else if (temporalidad.value == 1) {\n    diaSeleccionado.value = numero;\n    temporalidad.value = 1; \n  }\n  // Refrescamos los datos con los nuevos filtros\n  selectedOption.value = temporalidad.value;\n  GetMomentsAudios();\n};\n//Regresar\nconst goBack = () => {\n  if (temporalidad.value == 1 && diaSeleccionado.value == 0) {\n    temporalidad.value = 2;\n    semanaSeleccionada.value = 0;\n    diaSeleccionado.value = 0;\n  } else if (temporalidad.value == 1 && diaSeleccionado.value > 0) {\n    temporalidad.value = 1;\n    diaSeleccionado.value = 0;\n  } else if (temporalidad.value == 2) {\n    temporalidad.value = 3;\n    mesSeleccionado.value = 0;\n  }\n  selectedOption.value = temporalidad.value;\n  GetMomentsAudios();\n};\n\n/* Funciones de Mapa de calor */\n//Nombre de columnas\nconst tableHeaders = computed(() => {\n  if (!apiData.value.length) return [];\n\n  const allLabels = apiData.value.map(item => ({\n    name: locale.value.startsWith('es') ? item.Etiqueta : item.Label,\n    numero: item.Numero\n  }));\n\n  const uniqueHeaders = allLabels.filter((value, index, self) =>\n    index === self.findIndex((t) => t.name === value.name)\n  );\n\n  return uniqueHeaders.sort((a, b) => a.numero - b.numero);\n});\n//Obtener color del momento\nconst getMomentoColor = (momento) => {\n  return coloresMomentos[momento] || \"#FFFFFF\";\n};\n//Datos de Mapa\nconst tableColumns = computed(() => {\n  if (!apiData.value.length || !tableHeaders.value.length) return {};\n\n  const columns = {};\n\n  tableHeaders.value.forEach(header => {\n    const registrosDia = apiData.value.filter(item => {\n      const itemName = locale.value.startsWith('es') ? item.Etiqueta : item.Label;\n      return itemName === header.name && item.Bloque;\n    });\n\n    columns[header.name] = registrosDia.sort((a, b) => a.Bloque.localeCompare(b.Bloque));\n  });\n\n  return columns;\n});\n// Calculamos el número máximo de filas para que la tabla sea uniforme\nconst maxRows = computed(() => {\n  const counts = Object.values(tableColumns.value).map(col => col.length);\n  return counts.length ? Math.max(...counts) : 0;\n});\n// Función para alternar el tooltip (abrir/cerrar al hacer click)\nconst toggleTooltip = (block) => {\n  if (selectedBlock.value === block)\n    selectedBlock.value = null;\n  else\n    selectedBlock.value = block;\n};\n// Resumen de Cantidad de Audios\nconst resumenMomentos = computed(() => {\n  const resumen = {};\n\n  apiData.value.forEach(item => {\n    const m = item.Momento;\n    if (m !== undefined && m !== null) {\n      if (!resumen[m]) resumen[m] = 0;\n\n      resumen[m] += item.Cantidad || 0;\n    }\n  });\n\n  return resumen;\n});\n// Resumen de Tiempo Total\nconst resumenTiempo = computed(() => {\n  const resumen = {};\n\n  apiData.value.forEach(item => {\n    const m = item.Momento;\n    if (m !== undefined && m !== null) {\n      if (!resumen[m]) resumen[m] = 0;\n\n      resumen[m] += item.Tiempo || 0;\n    }\n  });\n\n  return resumen;\n});\n//Tooltips de momentos\nconst vTooltip = {\n  mounted(el, binding) {\n    el._tooltip = new Tooltip(el, {\n      title: binding.value,\n      placement: 'top',\n      trigger: 'hover'\n    });\n  },\n  updated(el, binding) {\n    if (el._tooltip && binding.value !== binding.oldValue) {\n      el._tooltip.setContent({ '.tooltip-inner': binding.value });\n    }\n  },\n  unmounted(el) {\n    if (el._tooltip) {\n      el._tooltip.dispose();\n      delete el._tooltip;\n    }\n  }\n};\n</script>\n<style scoped>\n.pila-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.pila-table td {\n  vertical-align: bottom;\n  height: 50px;\n  border: 1px solid #eee;\n  padding: 4px;\n}\n\n.bloque-celda {\n  background-color: #f0f4f8;\n  border-radius: 4px;\n  padding: 8px;\n  margin: 2px 0;\n  text-align: center;\n  font-weight: bold;\n}\n\n.pila-table th {\n  padding: 12px;\n  background-color: #2c3e50;\n  color: white;\n}\n\n.bloque-celda {\n  border-radius: 4px;\n  padding: 8px;\n  margin: 2px 0;\n  text-align: center;\n  font-weight: bold;\n  font-size: 0.9em;\n  transition: background-color 0.3s ease;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  color: #333;\n}\n\n.bloque-celda-wrapper {\n  position: relative;\n  display: flex;\n  justify-content: center;\n}\n\n.bloque-celda {\n  cursor: pointer;\n  position: relative;\n  width: 90%;\n}\n\n.bloque-celda:hover {\n  filter: brightness(0.95);\n}\n\n.custom-tooltip {\n  position: absolute;\n  bottom: 125%;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 8px 12px;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  white-space: nowrap;\n  z-index: 100;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n  pointer-events: none;\n}\n\n.tooltip-arrow {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: #333 transparent transparent transparent;\n}\n</style>","import script from \"./AngerPrueba.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AngerPrueba.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AngerPrueba.vue?vue&type=style&index=0&id=6b892898&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6b892898\"]])\n\nexport default __exports__"],"names":["ChartJS","register","Title","ChartTooltip","Legend","BarElement","CategoryScale","LinearScale","ChartDataLabels","t","locale","useI18n","temporalidad","ref","selectedOption","mesSeleccionado","semanaSeleccionada","diaSeleccionado","apiData","selectedBlock","coloresMomentos","GetDatos","x","value","GetMomentsAudios","async","sesion","localStorage","getItem","response","fetch","API_BASE_URL","method","headers","body","JSON","stringify","user","mes","semana","dia","data","json","parsedData","parse","Array","isArray","e","console","error","onMounted","window","addEventListener","handleGlobalClick","onUnmounted","removeEventListener","event","target","closest","formatTiempo","segundos","minutos","Math","floor","segundosRestantes","horas","minutosRestantes","countAudios","computed","length","reduce","total","item","Cantidad","tiempoResumen","totalSegundos","Tiempo","h","m","s","chartData","grupos","acc","n","Numero","label","startsWith","Etiqueta","Label","cantidad","numero","ordenados","Object","values","sort","a","b","labels","map","d","rawItems","datasets","backgroundColor","borderRadius","barThickness","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","tooltip","enabled","datalabels","anchor","align","formatter","round","font","weight","size","color","layout","padding","top","scales","y","beginAtZero","grid","ticks","onClick","elements","index","selectedItem","handleDrillDown","onHover","chartElement","native","style","cursor","goBack","tableHeaders","allLabels","name","uniqueHeaders","filter","self","findIndex","getMomentoColor","momento","tableColumns","columns","forEach","header","registrosDia","itemName","Bloque","localeCompare","maxRows","counts","col","max","toggleTooltip","block","resumenMomentos","resumen","Momento","undefined","resumenTiempo","vTooltip","mounted","el","binding","_tooltip","Tooltip","title","placement","trigger","updated","oldValue","setContent","unmounted","dispose","__exports__"],"sourceRoot":""}