{"version":3,"file":"js/420.61165093.js","mappings":"u+PA6JA,MAAMA,GAAQC,EAAAA,EAAAA,IAAI,CACd,CAAEC,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAoEC,MACxG,CAAEJ,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAoEC,MACxG,CAAEJ,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAoEC,MACxG,CAAEJ,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAoEC,MACxG,CAAEJ,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAoEC,MACxG,CAAEJ,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAqEC,MACzG,CAAEJ,GAAI,EAAGC,KAAM,OAAQC,IAAK,IAAIC,IAAI,aAAqEC,QAGvGC,EAAW,IAAIF,IAAI,aAAsCC,KACzDE,EAAY,IAAIH,IAAI,aAAuCC,KAE3DG,GAAeR,EAAAA,EAAAA,IAAI,GACnBS,GAAST,EAAAA,EAAAA,KAAI,GAEbU,GAAYV,EAAAA,EAAAA,KAAI,GAChBW,GAAYX,EAAAA,EAAAA,KAAI,GAChBY,GAAcZ,EAAAA,EAAAA,IAAI,GAClBa,GAAWb,EAAAA,EAAAA,IAAI,GACfc,EAAQ,IAAIC,MAEZC,GAAkBhB,EAAAA,EAAAA,KAAI,GAC5B,IAAIiB,EAAmB,KACvB,MAAMC,GAAkBlB,EAAAA,EAAAA,IAAI,GAEtBmB,GAAYnB,EAAAA,EAAAA,IAAI,MACtB,IAAIoB,EAAcC,EAAUC,EAAWC,EAAQC,EAC3CC,EAAkB,GAEtB,MAAMC,GAAkBC,EAAAA,EAAAA,KAAS,IAAM5B,EAAM6B,MAAMpB,EAAaoB,QAAQ1B,MAAQ,KAEhF,SAAS2B,IACLT,EAAe,IAAKU,OAAOC,cAAgBD,OAAOE,oBAClDX,EAAWD,EAAaa,iBACxBZ,EAASa,QAAU,IACnB,MAAMC,EAAed,EAASe,kBAS9B,GARAd,EAAY,IAAIe,WAAWF,GAE3BZ,EAASH,EAAakB,yBAAyBxB,GAC/CS,EAAOgB,QAAQlB,GACfA,EAASkB,QAAQnB,EAAaoB,aAE9BC,IAE2B,cAAvBrB,EAAasB,MAAuB,CACpC,MAAMC,EAASA,KACXvB,EAAauB,SACbC,SAASC,oBAAoB,aAAcF,EAAO,EAEtDC,SAASE,iBAAiB,aAAcH,EAAQ,CAAEI,MAAM,GAC5D,CACJ,CAEA,SAASN,IACL,MAAMO,EAAa7B,EAAUS,MACvBqB,EAAUD,EAAWE,WAAW,MAChCC,EAAQH,EAAWG,MACnBC,EAASJ,EAAWI,OACpBC,EAAUD,EAAS,EAEzB,SAASE,IACL9B,EAAc+B,sBAAsBD,GACpCjC,EAASmC,qBAAqBlC,GAG9B2B,EAAQQ,UAAU,EAAG,EAAGN,EAAOC,GAC/B,MAAMM,EAAWP,EAAQ7B,EAAUqC,OACnC,IAAIC,EAAI,EACR,IAAK,IAAIC,EAAI,EAAGA,EAAIvC,EAAUqC,OAAQE,IAAK,CACvC,MAAMjC,EAAQN,EAAUuC,GAClBC,EAAYlC,EAAQ,EACpBmC,EAAWd,EAAQe,qBAAqB,EAAGX,EAAUS,EAAW,EAAGT,EAAUS,GACnFC,EAASE,aAAa,EAAG,QACzBF,EAASE,aAAa,EAAG,QACzBhB,EAAQiB,UAAYH,EACpBd,EAAQkB,SAASP,EAAGP,EAAUS,EAAWJ,EAAUI,GACnDb,EAAQkB,SAASP,EAAGP,EAASK,EAAUI,GACvCF,GAAKF,EAAW,CACpB,CAGA,MAAMU,EAAaC,GAAezC,MAAMpB,EAAaoB,OACrD,GAAIwC,EAAY,CACZ,MAAME,EAAUF,EAAWlB,WAAW,MACtCoB,EAAQb,UAAU,EAAG,EAAGW,EAAWjB,MAAOiB,EAAWhB,QACrD,MAAMmB,EAAeH,EAAWjB,MAAQ7B,EAAUqC,OAClD,IAAIa,EAAK,EACT,IAAK,IAAIX,EAAI,EAAGA,EAAIvC,EAAUqC,OAAQE,IAAK,CACvC,MAAMjC,EAAQN,EAAUuC,GAClBC,EAAYlC,EAAQ,EAC1B0C,EAAQJ,UAAY,OACpBI,EAAQH,SAASK,EAAIJ,EAAWhB,OAASU,EAAWS,EAAcT,GAClEU,GAAMD,EAAe,CACzB,CACJ,CACJ,CAEAjB,GACJ,CAEA,SAASmB,GAAad,GAClB,MAAMe,EAAU,IAAIC,MAAMhB,GAAQiB,QAClC,IAAK,IAAIf,EAAIa,EAAQf,OAAS,EAAGE,EAAI,EAAGA,IAAK,CACzC,MAAMgB,EAAIC,KAAKC,MAAMD,KAAKE,UAAYnB,EAAI,KACpCa,EAAQb,GAAIa,EAAQG,IAAM,CAACH,EAAQG,GAAIH,EAAQb,GACzD,CACA,OAAOa,CACX,CACA,SAASO,KACPxE,EAAOmB,OAAQ,CACjB,CAEA,SAASsD,GAAUC,GACf,MAAMC,EAAOrF,EAAM6B,MAAMuD,GACpBC,IACLtE,EAAMuE,IAAMD,EAAKjF,IACjBW,EAAMwE,OAGiB,GAAnB5E,EAAUkB,MACVd,EAAMyE,OAAOC,MAAK,KACd9E,EAAUkB,OAAQ,EAClB6D,IAAoB,IACrBC,OAAMC,IACLC,QAAQC,KAAK,6CAA8CF,EAAI,IAInEjF,EAAUkB,OAAQ,EAE1B,CAEA,SAASkE,KACDhF,EAAMiF,QACNjF,EAAMyE,OACN7E,EAAUkB,OAAQ,EAClB6D,OAEA3E,EAAMkF,QACNtF,EAAUkB,OAAQ,EAClBqE,KACI/E,EAAgBU,OAAS,KAAgC,GAAzBZ,EAAgBY,QAChDnB,EAAOmB,OAAQ,EACfZ,EAAgBY,OAAQ,GAE5BgE,QAAQM,IAAIhF,EAAgBU,OAEpC,CAEA,SAAS6D,KACDxE,IAEJA,EAAmBkF,aAAY,KAC3BjF,EAAgBU,OAAO,GACxB,KACP,CAEA,SAASqE,KACLG,cAAcnF,GACdA,EAAmB,IACvB,CAEA,SAASoF,KACD1F,EAAUiB,OACqB,IAA3BH,EAAgBkC,SAChBlC,EAAkBgD,GAAa1E,EAAM6B,MAAM+B,SAE/CnD,EAAaoB,MAAQH,EAAgB6E,SAErC9F,EAAaoB,OAASpB,EAAaoB,MAAQ,GAAK7B,EAAM6B,MAAM+B,OAEhEjD,EAAUkB,OAAQ,EAClBsD,GAAU1E,EAAaoB,MAC3B,CAEA,SAAS2E,KACD5F,EAAUiB,OACqB,IAA3BH,EAAgBkC,SAChBlC,EAAkBgD,GAAa1E,EAAM6B,MAAM+B,SAE/CnD,EAAaoB,MAAQH,EAAgB6E,SAErC9F,EAAaoB,OAASpB,EAAaoB,MAAQ,EAAI7B,EAAM6B,MAAM+B,QAAU5D,EAAM6B,MAAM+B,OAErFjD,EAAUkB,OAAQ,EAClBsD,GAAU1E,EAAaoB,MAC3B,CAEA,SAAS4E,KACL7F,EAAUiB,OAASjB,EAAUiB,MAEzBjB,EAAUiB,OACVH,EAAkBgD,GAAa1E,EAAM6B,MAAM+B,QAE3ClC,EAAkBA,EAAgBgF,QAAO5C,GAAKA,IAAMrD,EAAaoB,SAEjEH,EAAkB,EAE1B,CAEA,SAASiF,KACL5F,EAAMF,YAAcA,EAAYgB,KACpC,CAWA,SAAS+E,GAAWC,GAChB,MAAMC,EAAU/B,KAAKC,MAAM6B,EAAO,IAC5BE,EAAUhC,KAAKC,MAAM6B,EAAO,IAAIG,WAAWC,SAAS,EAAG,KAC7D,MAAO,GAAGH,KAAWC,GACzB,CAbAhG,EAAMgC,iBAAiB,cAAc,KACjClC,EAAYgB,MAAQd,EAAMF,YAC1BC,EAASe,MAAQd,EAAMD,UAAY,CAAC,IAGxCC,EAAMgC,iBAAiB,SAAS,KAC5BuD,IAAW,KASfY,EAAAA,EAAAA,KAAU,KACNpF,IACAqD,GAAU1E,EAAaoB,MAAM,KAGjCsF,EAAAA,EAAAA,KAAgB,KACZC,qBAAqB3F,GACrBV,EAAMkF,QACNlF,EAAMuE,IAAM,GACRjE,GAAcA,EAAagG,OAAO,IAK1C,MAAMC,IAAerH,EAAAA,EAAAA,IAAI,MACnBsH,IAAatH,EAAAA,EAAAA,IAAI,IAEvB,SAASuH,GAASpC,GACdzE,EAAUkB,OAAQ,EAClBpB,EAAaoB,MAAQuD,EACrBD,GAAUC,GACVM,KACA/E,EAAUkB,OAAQ,CACtB,CAEA,SAAS4F,GAAWrC,GACZ3E,EAAaoB,QAAUuD,GACvBrE,EAAMkF,QAEVjG,EAAM6B,MAAM6F,OAAOtC,EAAO,GACtB3E,EAAaoB,OAAS7B,EAAM6B,MAAM+B,SAClCnD,EAAaoB,MAAQ,GAEzBsD,GAAU1E,EAAaoB,MAC3B,CAEA,SAAS8F,GAASvC,GACdkC,GAAazF,MAAQuD,EACrBmC,GAAW1F,MAAQ7B,EAAM6B,MAAMuD,GAAOjF,IAC1C,CAEA,SAASyH,GAASxC,GACVmC,GAAW1F,MAAMgG,SACjB7H,EAAM6B,MAAMuD,GAAOjF,KAAOoH,GAAW1F,MAAMgG,QAE/CP,GAAazF,MAAQ,IACzB,CAEA,IAAIiG,GAAe,KAEnB,SAASC,GAAU3C,GACf0C,GAAe1C,CACnB,CAEA,SAAS4C,GAAK5C,GACV,GAAqB,OAAjB0C,IAAyBA,KAAiB1C,EAAO,OACrD,MAAM6C,EAAYjI,EAAM6B,MAAM6F,OAAOI,GAAc,GAAG,GACtD9H,EAAM6B,MAAM6F,OAAOtC,EAAO,EAAG6C,GAC7BH,GAAe,IACnB,CAqBA,MAAMxD,IAAiBrE,EAAAA,EAAAA,IAAI,CAAC,GAE5B,SAASiI,GAAiBC,EAAI/C,GACtB+C,EAAI7D,GAAezC,MAAMuD,GAAS+C,SAC1B7D,GAAezC,MAAMuD,EACrC,C,68LCxcA,MAAMgD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://angerpulse/./src/components/AngerAudioteca.vue","webpack://angerpulse/./src/components/AngerAudioteca.vue?29e0"],"sourcesContent":["<template>\r\n    <div v-show=\"!moment\">\r\n        <label class=\"r-36-gray\" @click=\"updateShow\">Audioteca</label>\r\n        <br><br>\r\n        <div>\r\n            <p class=\"m-16-gray px-4 pt-2 pb-1\">\r\n                En esta sección se guardarán todos los audioejercicios que hayas seleccionado como favoritos.\r\n                <br><br>\r\n                Podrás repetirlos cuantas veces quieras y reproducirlos en el orden que decidas.\r\n            </p>\r\n        </div>\r\n\r\n        <div class=\"audio-player\">\r\n            <canvas ref=\"canvasRef\" width=\"256\" height=\"70\" class=\"visualizer\"></canvas>\r\n\r\n            <div class=\"song-info\">\r\n                <h3>{{ currentSongName }}</h3>\r\n                <div class=\"time\">\r\n                    {{ formatTime(currentTime) }} / {{ formatTime(duration) }}\r\n                </div>\r\n                <input type=\"range\" min=\"0\" :max=\"duration\" v-model=\"currentTime\" @input=\"seekAudio\" />\r\n            </div>\r\n            <div class=\"d-flex pb-5 pt-2\">\r\n                <img src=\"../assets/Atras.png\" class=\"m-auto\" @click=\"prevTrack\">\r\n                <img :src=\"isPlaying ? pauseIcon : playIcon\" style=\"height: 100%; width: fit-content; margin: auto;\"\r\n                    @click=\"togglePlay\">\r\n                <img src=\"../assets/Siguiente.png\" class=\"m-auto\" @click=\"nextTrack\">\r\n                <button @click=\"toggleShuffle\" :class=\"{ active: isShuffle }\" class=\"shuffle-button m-auto\">\r\n                    <img v-show=\"!isShuffle\" src=\"../assets/Aleatorio-dis.png\" class=\"m-auto\" width=\"35\">\r\n                    <img v-show=\"isShuffle\" src=\"../assets/Aleatorio-ava.png\" class=\"m-auto\" width=\"35\">\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class=\"fullblack py-1\">\r\n            <p class=\"sb-20-white text-start\">\r\n                Mi playlist\r\n            </p>\r\n            <div style=\"position: absolute; right: 20px; margin-top: -20px;\">\r\n                <img src=\"../assets/heart.png\" class=\"m-auto\">\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <!-- Lista de canciones -->\r\n        <ul class=\"px-3 pb-5\">\r\n            <li v-for=\"(song, index) in songs\" :key=\"song.id\" draggable=\"true\" @dragstart=\"dragStart(index)\"\r\n                @dragover.prevent @drop=\"drop(index)\" class=\"lisongs b-16-gray btn-group\" role=\"group\">\r\n                <div>\r\n                    <canvas v-show=\"index === currentIndex && isPlaying\" :ref=\"el => setMiniCanvasRef(el, index)\"\r\n                        width=\"40\" height=\"25\" class=\"mini-visualizer px-1\"></canvas>\r\n                    <button style=\"width: 48px;\" v-show=\"index != currentIndex\" class=\"btn-audio\"\r\n                        @click=\"playSong(index)\">\r\n                        <img src=\"../assets/Play.png\" width=\"12\" class=\"m-auto\"></button>\r\n                </div>\r\n                <span @click=\"playSong(index)\" style=\"flex: 1; cursor: pointer;\" class=\"text-start span-audio\">\r\n                    <label disabled v-if=\"editingIndex !== index\" value=\"\">{{ song.name }}</label>\r\n                    <input v-else v-model=\"editedName\" @keyup.enter=\"saveEdit(index)\" @blur=\"saveEdit(index)\" />\r\n                </span>\r\n                <!-- Mini canvas solo para la canción actual -->\r\n\r\n                <button class=\"btn-audio\" @click=\"editSong(index)\"> <img src=\"../assets/Edit.png\"\r\n                        class=\"m-auto\"></button>\r\n                <button class=\"btn-audio\" @click=\"removeSong(index)\"> <img src=\"../assets/Delete-song.png\"\r\n                        class=\"m-auto\"></button>\r\n                <!-- <button class=\"btn-audio\" @click=\"moveUp(index)\"> <img width=\"25\" src=\"../assets/up-b.svg\"\r\n                        class=\"m-auto\"></button>\r\n                <button class=\"btn-audio\" @click=\"moveDown(index)\"> <img width=\"25\" src=\"../assets/up-b.svg\"\r\n                        class=\"m-auto svg\"></button> -->\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div v-show=\"moment\">\r\n        <div>\r\n            <div>\r\n                <label class=\"sb-20-black pb-4\">¿En qué momento estabas?</label>\r\n                <ul class=\"ps-0\">\r\n                    <li class=\"list-group-item text-start r-16-gray py-2\">\r\n                        <div class=\"ps-5 form-check\">\r\n                            <input id=\"plan-m\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\"\r\n                                aria-label=\"...\">\r\n                            <label for=\"plan-m\" class=\"form-check-label\">1) Antes de actividades previstas, planeadas o\r\n                                rutinarias. </label>\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"list-group-item text-start r-16-gray py-2\">\r\n                        <div class=\"ps-5 form-check\">\r\n                            <input id=\"plan-s\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\"\r\n                                aria-label=\"...\">\r\n                            <label for=\"plan-s\" class=\"form-check-label\">2) Cavilaciones y sobrepensamiento. Encerrado\r\n                                en tu\r\n                                mente.</label>\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"list-group-item text-start r-16-gray py-2\">\r\n                        <div class=\"ps-5 form-check\">\r\n                            <input id=\"plan-a\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\"\r\n                                aria-label=\"...\">\r\n                            <label for=\"plan-a\" class=\"form-check-label\">3) Transiciones entre situaciones, actividades,\r\n                                lugares. </label>\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"list-group-item text-start r-16-gray py-2\">\r\n                        <div class=\"ps-5 form-check\">\r\n                            <input id=\"plan-4\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\"\r\n                                aria-label=\"...\">\r\n                            <label for=\"plan-4\" class=\"form-check-label\">4) Indignación o irritación por palabras o\r\n                                acciones\r\n                                de alguien más.</label>\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"list-group-item text-start r-16-gray py-2\">\r\n                        <div class=\"ps-5 form-check\">\r\n                            <input id=\"plan-5\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\"\r\n                                aria-label=\"...\">\r\n                            <label for=\"plan-5\" class=\"form-check-label\">5) Después de hablar/actuar de manera\r\n                                emocional, impulsiva e\r\n                                incorrecta.</label>\r\n                        </div>\r\n                    </li>\r\n\r\n                </ul>\r\n                <div class=\"d-flex justify-content-center pt-3 pb-5\">\r\n                    <div class=\"px-3\">\r\n                        <button type=\"button\" class=\"btn-gray-white\" @click=\"SetMoment()\">\r\n                            Omitir\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"px-3\">\r\n                        <button type=\"button\" class=\"btn-black border-0\" @click=\"SetMoment()\">\r\n                            Guardar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <label class=\"sb-20-black pb-5\">¿Por qué indicar el momento?</label>\r\n                <p class=\"r-16-gray text-center px-3 pb-5\">\r\n                    Distinguir y registrar el “momento” en el que estabas cuando decidiste hacer un audioejercicio(s) te\r\n                    ayudará a:\r\n                    <br><br>\r\n                    - Entender cuándo debes estar más atento para regular tus emociones pre-ira y contener tus\r\n                    principales\r\n                    detonantes de ira.\r\n                    <br><br>\r\n                    - Desarrollar una mayor capacidad de prevención y autocontrol.\r\n                    <br><br>\r\n                    Si decides no indicar el momento, solo pulsa el botón “omitir” cuando aparezca la pantalla de\r\n                    registro.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue'\r\n\r\nconst songs = ref([\r\n    { id: 1, name: 'AP 1', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_2.mp3', import.meta.url).href },\r\n    { id: 2, name: 'AP 2', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_6.mp3', import.meta.url).href },\r\n    { id: 3, name: 'AP 3', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_7.mp3', import.meta.url).href },\r\n    { id: 4, name: 'AP 4', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_8.mp3', import.meta.url).href },\r\n    { id: 5, name: 'AP 5', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_9.mp3', import.meta.url).href },\r\n    { id: 6, name: 'AP 6', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_11.mp3', import.meta.url).href },\r\n    { id: 7, name: 'AP 7', url: new URL('@/assets/audios/Angerpulse_Audioejercicio_21.mp3', import.meta.url).href }\r\n])\r\n\r\nconst playIcon = new URL('@/assets/Play.png', import.meta.url).href\r\nconst pauseIcon = new URL('@/assets/Pausa.png', import.meta.url).href\r\n\r\nconst currentIndex = ref(0)\r\nconst moment = ref(false)\r\n\r\nconst isPlaying = ref(false)\r\nconst isShuffle = ref(true)\r\nconst currentTime = ref(0)\r\nconst duration = ref(0)\r\nconst audio = new Audio()\r\n\r\nconst hasShownMessage = ref(false)\r\nlet playbackInterval = null\r\nconst playbackSeconds = ref(0)\r\n\r\nconst canvasRef = ref(null)\r\nlet audioContext, analyser, dataArray, source, animationId\r\nlet shuffledIndices = []\r\n\r\nconst currentSongName = computed(() => songs.value[currentIndex.value]?.name || '')\r\n\r\nfunction setupVisualizer() {\r\n    audioContext = new (window.AudioContext || window.webkitAudioContext)()\r\n    analyser = audioContext.createAnalyser()\r\n    analyser.fftSize = 256\r\n    const bufferLength = analyser.frequencyBinCount\r\n    dataArray = new Uint8Array(bufferLength)\r\n\r\n    source = audioContext.createMediaElementSource(audio)\r\n    source.connect(analyser)\r\n    analyser.connect(audioContext.destination)\r\n\r\n    drawVisualizer()\r\n\r\n    if (audioContext.state === 'suspended') {\r\n        const resume = () => {\r\n            audioContext.resume()\r\n            document.removeEventListener('touchstart', resume)\r\n        }\r\n        document.addEventListener('touchstart', resume, { once: true })\r\n    }\r\n}\r\n\r\nfunction drawVisualizer() {\r\n    const mainCanvas = canvasRef.value\r\n    const mainCtx = mainCanvas.getContext('2d')\r\n    const width = mainCanvas.width\r\n    const height = mainCanvas.height\r\n    const centerY = height / 2\r\n\r\n    function draw() {\r\n        animationId = requestAnimationFrame(draw)\r\n        analyser.getByteFrequencyData(dataArray)\r\n\r\n        // Canvas principal\r\n        mainCtx.clearRect(0, 0, width, height)\r\n        const barWidth = width / dataArray.length\r\n        let x = 0\r\n        for (let i = 0; i < dataArray.length; i++) {\r\n            const value = dataArray[i]\r\n            const barHeight = value / 2\r\n            const gradient = mainCtx.createLinearGradient(0, centerY - barHeight, 0, centerY + barHeight)\r\n            gradient.addColorStop(0, '#00f')\r\n            gradient.addColorStop(1, '#0ff')\r\n            mainCtx.fillStyle = gradient\r\n            mainCtx.fillRect(x, centerY - barHeight, barWidth, barHeight)\r\n            mainCtx.fillRect(x, centerY, barWidth, barHeight)\r\n            x += barWidth + 1\r\n        }\r\n\r\n        // Mini visualizador (solo para la canción actual)\r\n        const miniCanvas = miniCanvasRefs.value[currentIndex.value]\r\n        if (miniCanvas) {\r\n            const miniCtx = miniCanvas.getContext('2d')\r\n            miniCtx.clearRect(0, 0, miniCanvas.width, miniCanvas.height)\r\n            const miniBarWidth = miniCanvas.width / dataArray.length\r\n            let mx = 0\r\n            for (let i = 0; i < dataArray.length; i++) {\r\n                const value = dataArray[i]\r\n                const barHeight = value / 3\r\n                miniCtx.fillStyle = '#0af'\r\n                miniCtx.fillRect(mx, miniCanvas.height - barHeight, miniBarWidth, barHeight)\r\n                mx += miniBarWidth + 1\r\n            }\r\n        }\r\n    }\r\n\r\n    draw()\r\n}\r\n\r\nfunction shuffleArray(length) {\r\n    const indices = [...Array(length).keys()]\r\n    for (let i = indices.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1))\r\n            ;[indices[i], indices[j]] = [indices[j], indices[i]]\r\n    }\r\n    return indices\r\n}\r\nfunction SetMoment() {\r\n  moment.value = false\r\n}\r\n\r\nfunction loadTrack(index) {\r\n    const song = songs.value[index]\r\n    if (!song) return\r\n    audio.src = song.url\r\n    audio.load()\r\n    // playbackSeconds.value = 0\r\n    // stopPlaybackTimer()\r\n    if (isPlaying.value == true) {\r\n        audio.play().then(() => {\r\n            isPlaying.value = true\r\n            startPlaybackTimer()\r\n        }).catch(err => {\r\n            console.warn('iOS puede haber bloqueado la reproducción:', err)\r\n        })\r\n    }\r\n    else {\r\n        isPlaying.value = false\r\n    }\r\n}\r\n\r\nfunction togglePlay() {\r\n    if (audio.paused) {\r\n        audio.play()\r\n        isPlaying.value = true\r\n        startPlaybackTimer()\r\n    } else {\r\n        audio.pause()\r\n        isPlaying.value = false\r\n        stopPlaybackTimer()\r\n        if (playbackSeconds.value >= 110 && hasShownMessage.value == false) {\r\n            moment.value = true;\r\n            hasShownMessage.value = true\r\n        }\r\n        console.log(playbackSeconds.value)\r\n    }\r\n}\r\n\r\nfunction startPlaybackTimer() {\r\n    if (playbackInterval) return // Evita múltiples intervalos\r\n\r\n    playbackInterval = setInterval(() => {\r\n        playbackSeconds.value++\r\n    }, 1000)\r\n}\r\n\r\nfunction stopPlaybackTimer() {\r\n    clearInterval(playbackInterval)\r\n    playbackInterval = null\r\n}\r\n\r\nfunction nextTrack() {\r\n    if (isShuffle.value) {\r\n        if (shuffledIndices.length === 0) {\r\n            shuffledIndices = shuffleArray(songs.value.length)\r\n        }\r\n        currentIndex.value = shuffledIndices.shift()\r\n    } else {\r\n        currentIndex.value = (currentIndex.value + 1) % songs.value.length\r\n    }\r\n    isPlaying.value = true\r\n    loadTrack(currentIndex.value)\r\n}\r\n\r\nfunction prevTrack() {\r\n    if (isShuffle.value) {\r\n        if (shuffledIndices.length === 0) {\r\n            shuffledIndices = shuffleArray(songs.value.length)\r\n        }\r\n        currentIndex.value = shuffledIndices.shift()\r\n    } else {\r\n        currentIndex.value = (currentIndex.value - 1 + songs.value.length) % songs.value.length\r\n    }\r\n    isPlaying.value = true\r\n    loadTrack(currentIndex.value)\r\n}\r\n\r\nfunction toggleShuffle() {\r\n    isShuffle.value = !isShuffle.value\r\n\r\n    if (isShuffle.value) {\r\n        shuffledIndices = shuffleArray(songs.value.length)\r\n        // Evita repetir la canción actual\r\n        shuffledIndices = shuffledIndices.filter(i => i !== currentIndex.value)\r\n    } else {\r\n        shuffledIndices = []\r\n    }\r\n}\r\n\r\nfunction seekAudio() {\r\n    audio.currentTime = currentTime.value\r\n}\r\n\r\naudio.addEventListener('timeupdate', () => {\r\n    currentTime.value = audio.currentTime\r\n    duration.value = audio.duration || 0\r\n})\r\n\r\naudio.addEventListener('ended', () => {\r\n    nextTrack()\r\n})\r\n\r\nfunction formatTime(time) {\r\n    const minutes = Math.floor(time / 60)\r\n    const seconds = Math.floor(time % 60).toString().padStart(2, '0')\r\n    return `${minutes}:${seconds}`\r\n}\r\n\r\nonMounted(() => {\r\n    setupVisualizer()\r\n    loadTrack(currentIndex.value)\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n    cancelAnimationFrame(animationId)\r\n    audio.pause()\r\n    audio.src = ''\r\n    if (audioContext) audioContext.close()\r\n})\r\n\r\n\r\n\r\nconst editingIndex = ref(null)\r\nconst editedName = ref('')\r\n\r\nfunction playSong(index) {\r\n    isPlaying.value = true\r\n    currentIndex.value = index\r\n    loadTrack(index)\r\n    startPlaybackTimer()\r\n    isPlaying.value = true\r\n}\r\n\r\nfunction removeSong(index) {\r\n    if (currentIndex.value === index) {\r\n        audio.pause()\r\n    }\r\n    songs.value.splice(index, 1)\r\n    if (currentIndex.value >= songs.value.length) {\r\n        currentIndex.value = 0\r\n    }\r\n    loadTrack(currentIndex.value)\r\n}\r\n\r\nfunction editSong(index) {\r\n    editingIndex.value = index\r\n    editedName.value = songs.value[index].name\r\n}\r\n\r\nfunction saveEdit(index) {\r\n    if (editedName.value.trim()) {\r\n        songs.value[index].name = editedName.value.trim()\r\n    }\r\n    editingIndex.value = null\r\n}\r\n\r\nlet draggedIndex = null\r\n\r\nfunction dragStart(index) {\r\n    draggedIndex = index\r\n}\r\n\r\nfunction drop(index) {\r\n    if (draggedIndex === null || draggedIndex === index) return\r\n    const movedItem = songs.value.splice(draggedIndex, 1)[0]\r\n    songs.value.splice(index, 0, movedItem)\r\n    draggedIndex = null\r\n}\r\n\r\n// function moveUp(index) {\r\n//     if (index === 0) return\r\n//     const temp = songs.value[index]\r\n//     songs.value[index] = songs.value[index - 1]\r\n//     songs.value[index - 1] = temp\r\n//     if (currentIndex.value === index) currentIndex.value = index - 1\r\n//     else if (currentIndex.value === index - 1) currentIndex.value = index\r\n// }\r\n\r\n// function moveDown(index) {\r\n//     if (index === songs.value.length - 1) return\r\n//     const temp = songs.value[index]\r\n//     songs.value[index] = songs.value[index + 1]\r\n//     songs.value[index + 1] = temp\r\n//     if (currentIndex.value === index) currentIndex.value = index + 1\r\n//     else if (currentIndex.value === index + 1) currentIndex.value = index\r\n// }\r\n\r\n\r\nconst miniCanvasRefs = ref({})\r\n\r\nfunction setMiniCanvasRef(el, index) {\r\n    if (el) miniCanvasRefs.value[index] = el\r\n    else delete miniCanvasRefs.value[index]\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.audio-player {\r\n    text-align: center;\r\n    background: #fff;\r\n    padding: 1rem;\r\n    border-radius: 8px;\r\n    color: #555;\r\n}\r\n\r\n.visualizer {\r\n    display: block;\r\n    margin: 1rem auto;\r\n    background-color: white;\r\n}\r\n\r\n.song-info {\r\n    margin: 1rem 0;\r\n}\r\n\r\n.song-info h3 {\r\n    margin: 0;\r\n}\r\n\r\n.song-info .time {\r\n    font-size: 0.9rem;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.song-info input[type=range] {\r\n    width: 100%;\r\n}\r\n\r\n.controls button {\r\n    background: none;\r\n    border: none;\r\n    margin: 0 1rem;\r\n    cursor: pointer;\r\n    color: white;\r\n}\r\n\r\n.controls img {\r\n    width: 40px;\r\n    height: 40px;\r\n}\r\n\r\n.controls .active {\r\n    color: lime;\r\n}\r\n\r\n.shuffle-button {\r\n    background: none;\r\n    border: none;\r\n    font-size: 1.5rem;\r\n    cursor: pointer;\r\n    color: #aaa;\r\n}\r\n\r\n.shuffle-button.active {\r\n    color: #0ff;\r\n}\r\n\r\n.mini-visualizer {\r\n    margin-top: 4px;\r\n    background-color: #fff;\r\n    display: block;\r\n}\r\n\r\n.song-item.active-song {\r\n    background-color: #e8f8ff;\r\n    border-left: 4px solid #0af;\r\n}\r\n\r\n.lisongs {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 0.5rem;\r\n    /* cursor: move; */\r\n    border: 1px solid #D6D6D6;\r\n    /* border-radius: 10px; */\r\n}\r\n\r\n.btn-audio {\r\n    border: none;\r\n    background-color: transparent;\r\n    border-left: 1px solid #D6D6D6;\r\n    padding: 7px 10px;\r\n}\r\n\r\n.span-audio {\r\n    background-color: #F4F4F4;\r\n    padding-top: 0px;\r\n    padding-bottom: 0px;\r\n    border-left: 1px solid #D6D6D6;\r\n}\r\n\r\n.span-audio>input {\r\n    border: none;\r\n    width: 100%;\r\n    padding-left: 10px;\r\n}\r\n\r\n.span-audio>input:focus {\r\n    border: none;\r\n    width: 100%;\r\n    padding-left: 10px;\r\n    outline: none;\r\n}\r\n\r\n.span-audio>label {\r\n    padding-top: 7px;\r\n    padding-bottom: 7px;\r\n    padding-left: 10px;\r\n}\r\n\r\n.svg {\r\n    transform: rotate(180deg);\r\n}\r\n</style>","import script from \"./AngerAudioteca.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AngerAudioteca.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AngerAudioteca.vue?vue&type=style&index=0&id=1d6d8b3e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1d6d8b3e\"]])\n\nexport default __exports__"],"names":["songs","ref","id","name","url","URL","href","playIcon","pauseIcon","currentIndex","moment","isPlaying","isShuffle","currentTime","duration","audio","Audio","hasShownMessage","playbackInterval","playbackSeconds","canvasRef","audioContext","analyser","dataArray","source","animationId","shuffledIndices","currentSongName","computed","value","setupVisualizer","window","AudioContext","webkitAudioContext","createAnalyser","fftSize","bufferLength","frequencyBinCount","Uint8Array","createMediaElementSource","connect","destination","drawVisualizer","state","resume","document","removeEventListener","addEventListener","once","mainCanvas","mainCtx","getContext","width","height","centerY","draw","requestAnimationFrame","getByteFrequencyData","clearRect","barWidth","length","x","i","barHeight","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","miniCanvas","miniCanvasRefs","miniCtx","miniBarWidth","mx","shuffleArray","indices","Array","keys","j","Math","floor","random","SetMoment","loadTrack","index","song","src","load","play","then","startPlaybackTimer","catch","err","console","warn","togglePlay","paused","pause","stopPlaybackTimer","log","setInterval","clearInterval","nextTrack","shift","prevTrack","toggleShuffle","filter","seekAudio","formatTime","time","minutes","seconds","toString","padStart","onMounted","onBeforeUnmount","cancelAnimationFrame","close","editingIndex","editedName","playSong","removeSong","splice","editSong","saveEdit","trim","draggedIndex","dragStart","drop","movedItem","setMiniCanvasRef","el","__exports__"],"sourceRoot":""}