"use strict";(self["webpackChunkangerpulse"]=self["webpackChunkangerpulse"]||[]).push([[586],{2674:function(e,t,a){a.d(t,{J:function(){return l}});const l="https://marcoracm-002-site1.mtempurl.com"},9586:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});a(4114);var l=a(6768),n=a(5130),o=a(4232),s=a(144),u=a(2674),c=a(1387),r=a(5384);const i={class:"container v50 d-flex justify-content-center align-items-center"},d={class:"row justify-content-center w-100"},v={class:"col-md-6"},m={class:"card shadow-sm"},f={class:"card-body"},p={class:"d-flex justify-content-between mb-3"},k=["onUpdate:modelValue","onInput","onKeydown"],b=["disabled"],y={key:0,class:"alert alert-danger mt-3"},g={key:1,class:"alert alert-success mt-3"},h={key:0,class:"modal"},C={class:"modal-content"};var w={__name:"AngerVerifyCode",setup(e){const{t:t}=(0,r.s9)(),a=(0,s.KR)(["","","","","",""]),w=(0,s.KR)([]),L=(0,s.KR)(!1),R=(0,s.KR)(""),K=(0,s.KR)(!1),_=(0,c.rd)(),j=(0,s.KR)(""),x=(0,s.KR)(!1),E=e=>{const t=a.value[e];/^\d$/.test(t)?e<5&&(0,l.dY)((()=>w.value[e+1].focus())):a.value[e]=""},I=e=>{""===a.value[e]&&e>0&&(0,l.dY)((()=>w.value[e-1].focus()))},V=e=>{e>0&&w.value[e-1].focus()},S=e=>{e<5&&w.value[e+1].focus()},X=async()=>{R.value="",K.value=!1,L.value=!0;const e=a.value.join("");await new Promise((e=>setTimeout(e,1e3)));try{const t=await fetch(`${u.J}/api/usuarios/VerifyCode`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:localStorage.getItem("email"),code:e})}),a=await t.json();x.value=!0,console.log(a),1==a.status?(localStorage.setItem("token",localStorage.getItem("email")),_.push("/home")):(j.value=a.message,x.value=!0)}catch(R){j.value="Error de conexión con el servidor"}L.value=!1};return(e,u)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",i,[(0,l.Lk)("div",d,[(0,l.Lk)("div",v,[(0,l.Lk)("div",m,[(0,l.Lk)("div",f,[u[1]||(u[1]=(0,l.Lk)("h5",{class:"card-title text-center mb-4"},"Verifica tu código",-1)),(0,l.Lk)("form",{onSubmit:(0,n.D$)(X,["prevent"])},[(0,l.Lk)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,((e,t)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:t,type:"text",class:"form-control text-center mx-1",maxlength:"1",pattern:"[0-9]*",inputmode:"numeric","onUpdate:modelValue":e=>a.value[t]=e,onInput:e=>E(t),onKeydown:[(0,n.jR)((e=>I(t)),["backspace"]),(0,n.jR)((e=>V(t)),["left"]),(0,n.jR)((e=>S(t)),["right"])],ref_for:!0,ref_key:"digitRefs",ref:w},null,40,k)),[[n.Jo,a.value[t]]]))),128))]),(0,l.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:L.value},(0,o.v_)(L.value?"Verificando...":"Validar código"),9,b),R.value?((0,l.uX)(),(0,l.CE)("div",y,(0,o.v_)(R.value),1)):(0,l.Q3)("",!0),K.value?((0,l.uX)(),(0,l.CE)("div",g," ¡Código verificado correctamente! ")):(0,l.Q3)("",!0)],32)])])])])]),x.value?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",C,[(0,l.Lk)("h3",null,(0,o.v_)(j.value),1),u[2]||(u[2]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("button",{class:"btn-black px-3",onClick:u[0]||(u[0]=e=>x.value=!1)},(0,o.v_)((0,s.R1)(t)("account.btnCerrar")),1)])])):(0,l.Q3)("",!0)],64))}},L=a(1241);const R=(0,L.A)(w,[["__scopeId","data-v-7382e24c"]]);var K=R}}]);
//# sourceMappingURL=586.0c21b5be.js.map