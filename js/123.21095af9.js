"use strict";(self["webpackChunkangerpulse"]=self["webpackChunkangerpulse"]||[]).push([[123],{8123:function(t,a,e){e.r(a),e.d(a,{default:function(){return ht}});e(4114),e(8111),e(7588),e(1701);var l=e(6768),i=e(144),o=e(5130),s=e(4232),n=e(8745),r=e(5384),c=e(2674),u=e(8077),d=e(17),v=e(3408),p=e(1010);const y=["innerHTML"],g={class:"text-start px-4 pt-3"},k=["innerHTML"],f=["innerHTML"],m={class:"numeralia d-flex py-3"},b={class:"num-circle"},h={class:"circle-black b-48-gray p-3"},L={class:"m-auto"},R={class:"data-rec b-20-gray w-100"},x=["innerHTML"],_={class:"numeralia d-flex py-3"},E={key:0,class:"num-circle"},C={class:"circle-black b-20-gray p-3"},M={class:"m-auto"},S={key:1,class:"num-circle"},w={class:"circle-black b-20-gray p-3"},K={class:"m-auto"},T={key:2,class:"num-circle"},F={class:"circle-black b-20-gray p-3"},j={class:"m-auto"},A={class:"data-rec b-20-gray w-100"},O=["innerHTML"],$={class:"py-3 px-4"},J=["innerHTML"],H={class:"py-3 px-4"},W=["innerHTML"],I={style:{display:"flex","justify-content":"center"}},X={border:"1",style:{"border-collapse":"collapse",width:"100%"}},N={class:"d-flex justify-content-start pt-4"},P={class:"ps-3"},q={class:"b-14-gray text-start"},B=["title"],D=["title"],G={class:"d-flex justify-content-start pt-4"},V={class:"ps-3"},z={class:"b-14-gray text-start"},Q=["title"],U=["title"],Z={class:"d-flex justify-content-start pt-3"},Y={class:"ps-3"},tt={class:"b-14-gray text-start"},at=["title"],et=["title"],lt={class:"d-flex justify-content-start pt-3"},it={class:"ps-3"},ot={class:"b-14-gray text-start"},st=["title"],nt=["title"],rt={class:"d-flex justify-content-start pt-3"},ct={class:"ps-3"},ut={class:"b-14-gray text-start"},dt=["title"],vt=["title"],pt={class:"d-flex justify-content-start pt-3 pb-4"},yt={class:"ps-3"},gt={class:"b-14-gray text-start"},kt=["title"],ft=["title"];var mt={__name:"AngerDashboard",setup(t){const a=(0,i.KR)(null),e=(0,i.KR)(null),mt=(0,i.KR)(null),bt=(0,i.KR)(null),ht=(0,i.KR)(null),Lt=(0,i.KR)(null),Rt=(0,i.KR)(null),xt=(0,i.KR)(null),_t=(0,i.KR)(null),Et=(0,i.KR)(null),Ct=(0,i.KR)(null),Mt=(0,i.KR)(null),St={},{t:wt,locale:Kt}=(0,r.s9)(),Tt=(0,i.KR)(1),Ft=(0,i.KR)(1),jt=(0,i.KR)(0),At=(0,i.KR)(0),Ot=(0,i.KR)(0),$t=(0,l.EW)((()=>({days:{es:["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],en:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},months:{es:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},weeks:{es:["Sem1","Sem2","Sem3","Sem4","Sem5"],en:["Wk1","Wk2","Wk3","Wk4","Wk5"]}})));async function Jt(t){try{const a=localStorage.getItem("token");if(!a)return;const e=await fetch(`${c.J}/api/config/GetCountAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a,temporalidad:t})}),l=await e.json();1==l.status?Ot.value=l.data:Ot.value=0}catch(a){console.error("Error al cargar audios:",a)}}const Ht=(0,i.KR)(0),Wt=(0,i.KR)(0),It=(0,i.KR)(0);async function Xt(t){try{const a=localStorage.getItem("token");if(!a)return;const e=await fetch(`${c.J}/api/config/GetTimeAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a,temporalidad:t})}),l=await e.json();if(1==l.status){const t=l.data;Ht.value=Math.floor(t/3600),Wt.value=Math.floor(t%3600/60),It.value=t%60}else Ht.value=0,Wt.value=0,It.value=0}catch(a){console.error("Error al cargar audios:",a)}}const Nt=(0,l.EW)((()=>qt.value.length?qt.value.map((t=>aa(t.KeyLabel).substring(0,2==Ft.value?5:3))):[])),Pt=(0,i.KR)([]),qt=(0,i.KR)([]),Bt=(0,i.KR)([]);d.t1.register(d.E8,d.PP,d.kc,d.m_,d.s$,v.A);const Dt=(0,l.EW)((()=>({labels:Nt.value,datasets:[{label:"",data:Pt.value,backgroundColor:"#AAAAAA",barThickness:14,borderRadius:10,pointStyle:"circle"}]}))),Gt={layout:{padding:{top:10}},responsive:!0,onClick:(t,a)=>{if(!a.length)return;const e=a[0].index,l=qt.value[e];l&&Vt(l)},plugins:{legend:{display:!0,labels:{padding:10,color:"#555",boxHeight:0}},datalabels:{anchor:"end",align:"start",offset:-30,backgroundColor:"#000000",borderRadius:999,color:"#ffffff",font:{weight:"500",size:10},padding:{top:8,bottom:8,left:9,right:9},formatter:t=>t,listeners:{click:t=>{const a=t.dataIndex,e=qt.value[a];e&&Vt(e)},enter:t=>{t.chart.canvas.style.cursor="pointer"},leave:t=>{t.chart.canvas.style.cursor="default"}}}},scales:{y:{beginAtZero:!0,ticks:{display:!1},grid:{display:!0}},x:{grid:{display:!1}}}};function Vt(t){return Bt.value.push({temporalidad:Ft.value,mes:jt.value,semana:At.value}),3==Ft.value?(jt.value=t.KeyLabel,Ft.value=2,Qt(),void oa()):2==Ft.value?(At.value=t.KeyLabel,Ft.value=1,Qt(),void oa()):void 0}function zt(){if(!Bt.value.length)return;const t=Bt.value.pop();Ft.value=t.temporalidad,jt.value=t.mes,At.value=t.semana,Qt(),oa()}async function Qt(){try{const t=localStorage.getItem("token");if(!t)return;const a=await fetch(`${c.J}/api/config/GetDays`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,temporalidad:Ft.value,anio:0,mes:jt.value,semana:At.value})}),e=await a.json();if(1==e.status&&""!=e.data){const t=JSON.parse(e.data);qt.value=t,Pt.value=t.map((t=>t.cantidadAudios)),ta.value++,Pt.value=t.map((t=>t.cantidadAudios))}else Pt.value=[0,0,0,0,0,0,0],ta.value++}catch(t){console.error("Error al cargar audios:",t)}}const Ut=["#efefef","#E3FCFF","#FFE4B3","#FFC4B3","#FF9797","#fb5353"],Zt=(0,i.KR)({}),Yt=(0,l.EW)((()=>1==Ft.value?[1,2,3,4,5,6,7]:2==Ft.value?[1,2,3,4,5]:[1,2,3,4,5,6,7,8,9,10,11,12])),ta=(0,i.KR)(0);function aa(t){const a=Kt.value;let e;return e=1==Ft.value?$t.value.days[a][t-1]:2==Ft.value?$t.value.weeks[a][t-1]:$t.value.months[a][t-1],e??""}const ea=(0,l.EW)((()=>Math.max(...Yt.value.map((t=>Zt.value[t]?.length||0)),0))),la=(t,a)=>{const e=Zt.value[t]?.[a];return e?e.intervalo:null};function ia(t,a){const e=Zt.value[t]?.[a];return e&&0!==e.cantidad&&Ut[e.momento]||"#fff"}async function oa(){try{const t=localStorage.getItem("token");if(!t)return;const a=await fetch(`${c.J}/api/config/GetMomentsAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,temporalidad:Ft.value,mes:jt.value,semana:At.value})}),e=await a.json();if(console.log(e.data),1!==e.status||!e.data)return void(Zt.value={});const l=JSON.parse(e.data);if(1==Ft.value){const t={};Yt.value.forEach((a=>t[a]={})),l.forEach((a=>{const e=a.KeyLabel,l=`${a.Intervalo}-${a.Momento}`;t[e]&&(t[e][l]||(t[e][l]={intervalo:a.Intervalo,momento:a.Momento,cantidad:0,tiempo:0}),t[e][l].cantidad+=a.CantidadAudios,t[e][l].tiempo+=a.TiempoRep||0)}));const a={};return Yt.value.forEach((e=>{a[e]=Object.values(t[e])})),void(Zt.value=a)}if(2==Ft.value){const t={};Yt.value.forEach((a=>t[a]={})),l.forEach((a=>{const e=a.KeyLabel,l=`${a.Intervalo}-${a.Momento}`;t[e]&&(t[e][l]||(t[e][l]={intervalo:a.Intervalo,momento:a.Momento,cantidad:0,tiempo:0}),t[e][l].cantidad+=a.CantidadAudios,t[e][l].tiempo+=a.TiempoRep||0)}));const a={};return Yt.value.forEach((e=>{a[e]=Object.values(t[e])})),void(Zt.value=a)}if(3==Ft.value){const t={};Yt.value.forEach((a=>t[a]={})),l.forEach((a=>{const e=a.KeyLabel,l=`${a.Intervalo}-${a.Momento}`;t[e]&&(t[e][l]||(t[e][l]={intervalo:a.Intervalo,momento:a.Momento,cantidad:0,tiempo:0}),t[e][l].cantidad+=a.CantidadAudios,t[e][l].tiempo+=a.TiempoRep||0)}));const a={};return Yt.value.forEach((e=>{a[e]=Object.values(t[e])})),void(Zt.value=a)}}catch(t){console.error("Error momentos",t)}}function sa(t){Ft.value=t,jt.value=0,At.value=0,Jt(t),Xt(t),Qt(),oa()}(0,l.sV)((()=>{sa(Tt.value);const t={1:a,2:e,3:mt,4:bt,5:ht,6:Lt,7:Rt,8:xt,9:_t,10:Et,11:Ct,12:Mt};Object.entries(t).forEach((([t,a])=>{a.value&&(St[t]=new u.m_(a.value,{trigger:"manual",placement:"right",customClass:"custom-tooltip-width"}))})),document.addEventListener("click",(()=>{Object.values(St).forEach((t=>t.hide()))}))})),(0,l.hi)((()=>{Object.values(St).forEach((t=>t.dispose())),document.removeEventListener("click",(()=>{}))})),(0,l.wB)(Kt,(()=>{setTimeout((()=>{Object.values(St).forEach((t=>{const a=t._element.getAttribute("title")||t._element.getAttribute("data-bs-original-title");t.setContent({".tooltip-inner":a})}))}),0)}));const na=(0,l.EW)((()=>{const t={};return Object.values(Zt.value).forEach((a=>{a.forEach((a=>{t[a.momento]||(t[a.momento]=0),t[a.momento]+=a.cantidad}))})),t})),ra=(0,l.EW)((()=>{const t={};return Object.values(Zt.value).forEach((a=>{a.forEach((a=>{t[a.momento]||(t[a.momento]=0),t[a.momento]+=a.tiempo||0}))})),t}));function ca(t=0){const a=Number(t)||0,e=Math.floor(a/3600),l=Math.floor(a%3600/60),i=a%60;return e>0?`${e.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}h`:l>0?`${l.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}m`:`${i.toString().padStart(2,"0")}s`}const ua=(0,l.EW)((()=>Yt.value.map((t=>aa(t).substring(0,2==Ft.value?5:3))))),da=(t,a)=>{a.stopPropagation();const e=St[t];e&&e.toggle()};return(t,r)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.Lk)("label",{class:"b-24-black",innerHTML:(0,i.R1)(wt)("activity.title")},null,8,y),r[14]||(r[14]=(0,l.Lk)("br",null,null,-1))]),(0,l.Lk)("div",g,[(0,l.Lk)("p",{class:"b-16-gray",innerHTML:(0,i.R1)(wt)("activity.temporalidad")},null,8,k),(0,l.bo)((0,l.Lk)("select",{id:"FilterTempo",class:"form-control w-100 select-ap","onUpdate:modelValue":r[0]||(r[0]=t=>Tt.value=t),onChange:r[1]||(r[1]=t=>sa(Tt.value)),innerHTML:(0,i.R1)(wt)("activity.ultsem")},null,40,f),[[o.u1,Tt.value]]),(0,l.Lk)("div",m,[(0,l.Lk)("div",b,[(0,l.Lk)("div",h,[(0,l.Lk)("label",L,(0,s.v_)(Ot.value),1)])]),(0,l.Lk)("div",R,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,i.R1)(wt)("activity.audio")},null,8,x)])]),(0,l.Lk)("div",_,[Ht.value>0?((0,l.uX)(),(0,l.CE)("div",E,[(0,l.Lk)("div",C,[(0,l.Lk)("label",M,(0,s.v_)(Ht.value+":"+Wt.value.toString().padStart(2,"0")+":"+It.value.toString().padStart(2,"0")+"h"),1)])])):Wt.value>0?((0,l.uX)(),(0,l.CE)("div",S,[(0,l.Lk)("div",w,[(0,l.Lk)("label",K,(0,s.v_)(Wt.value+":"+It.value.toString().padStart(2,"0")+"m"),1)])])):((0,l.uX)(),(0,l.CE)("div",T,[(0,l.Lk)("div",F,[(0,l.Lk)("label",j,(0,s.v_)(It.value.toString().padStart(2,"0")+"s"),1)])])),(0,l.Lk)("div",A,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,i.R1)(wt)("activity.horas")},null,8,O)])])]),(0,l.Lk)("div",$,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,i.R1)(wt)("activity.dias")},null,8,J),(0,l.Lk)("div",null,[Bt.value.length>0?((0,l.uX)(),(0,l.CE)("div",{key:0,onClick:zt,class:"d-flex justify-content-start px-0"},r[15]||(r[15]=[(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn-back"},[(0,l.Lk)("img",{width:"20",src:n,class:"m-auto"})])],-1),(0,l.Lk)("div",{class:"ps-0"},[(0,l.Lk)("label",{class:"b-18-gray"},"Regresar")],-1)]))):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[((0,l.uX)(),(0,l.Wv)((0,i.R1)(p.yP),{key:ta.value,style:{"overflow-y":"visible"},data:Dt.value,options:Gt},null,8,["data"]))])]),(0,l.Lk)("div",H,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,i.R1)(wt)("activity.momentos")},null,8,W),(0,l.Lk)("div",I,[(0,l.Lk)("table",X,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ea.value,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Yt.value,(a=>((0,l.uX)(),(0,l.CE)("td",{key:a,style:(0,s.Tr)([{backgroundColor:ia(a,ea.value-t)},{"text-align":"center"}])},(0,s.v_)(la(a,ea.value-t)??""),5)))),128))])))),128)),(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ua.value,((t,a)=>((0,l.uX)(),(0,l.CE)("td",{key:a,style:{"font-weight":"bold","text-align":"center"}},(0,s.v_)(t),1)))),128))])])])]),(0,l.Lk)("div",N,[r[16]||(r[16]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#efefef","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",P,[(0,l.Lk)("div",q,(0,s.v_)((0,i.R1)(wt)("activity.registro")),1),(0,l.Lk)("div",{ref_key:"el1",ref:a,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.audio"),onClick:r[2]||(r[2]=t=>da(1,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.audioMin"))+": "+(0,s.v_)(na.value[0]||0),9,B),(0,l.Lk)("div",{ref_key:"el2",ref:e,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.horas"),onClick:r[3]||(r[3]=t=>da(2,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.horasMin"))+": "+(0,s.v_)(ca(ra.value?.[0]||0)),9,D)])]),(0,l.Lk)("div",G,[r[17]||(r[17]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#E3FCFF","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",V,[(0,l.Lk)("div",z,(0,s.v_)((0,i.R1)(wt)("activity.act")),1),(0,l.Lk)("div",{ref_key:"el3",ref:mt,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.audio"),onClick:r[4]||(r[4]=t=>da(3,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.audioMin"))+": "+(0,s.v_)(na.value[1]||0),9,Q),(0,l.Lk)("div",{ref_key:"el4",ref:bt,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.horas"),onClick:r[5]||(r[5]=t=>da(4,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.horasMin"))+": "+(0,s.v_)(ca(ra.value?.[1]||0)),9,U)])]),(0,l.Lk)("div",Z,[r[18]||(r[18]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFE4B3","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",Y,[(0,l.Lk)("div",tt,(0,s.v_)((0,i.R1)(wt)("activity.mente")),1),(0,l.Lk)("div",{ref_key:"el5",ref:ht,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.audio"),onClick:r[6]||(r[6]=t=>da(5,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.audioMin"))+": "+(0,s.v_)(na.value[2]||0),9,at),(0,l.Lk)("div",{ref_key:"el6",ref:Lt,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.horas"),onClick:r[7]||(r[7]=t=>da(6,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.horasMin"))+": "+(0,s.v_)(ca(ra.value?.[2]||0)),9,et)])]),(0,l.Lk)("div",lt,[r[19]||(r[19]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFC4B3","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",it,[(0,l.Lk)("div",ot,(0,s.v_)((0,i.R1)(wt)("activity.lugares")),1),(0,l.Lk)("div",{ref_key:"el7",ref:Rt,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.audio"),onClick:r[8]||(r[8]=t=>da(7,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.audioMin"))+": "+(0,s.v_)(na.value[3]||0),9,st),(0,l.Lk)("div",{ref_key:"el8",ref:xt,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.horas"),onClick:r[9]||(r[9]=t=>da(8,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.horasMin"))+": "+(0,s.v_)(ca(ra.value?.[3]||0)),9,nt)])]),(0,l.Lk)("div",rt,[r[20]||(r[20]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FF9797","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",ct,[(0,l.Lk)("div",ut,(0,s.v_)((0,i.R1)(wt)("activity.palabras")),1),(0,l.Lk)("div",{ref_key:"el9",ref:_t,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.audio"),onClick:r[10]||(r[10]=t=>da(9,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.audioMin"))+": "+(0,s.v_)(na.value[4]||0),9,dt),(0,l.Lk)("div",{ref_key:"el10",ref:Et,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.horas"),onClick:r[11]||(r[11]=t=>da(10,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.horasMin"))+": "+(0,s.v_)(ca(ra.value?.[4]||0)),9,vt)])]),(0,l.Lk)("div",pt,[r[21]||(r[21]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#fb5353","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",yt,[(0,l.Lk)("div",gt,(0,s.v_)((0,i.R1)(wt)("activity.hablar")),1),(0,l.Lk)("div",{ref_key:"el11",ref:Ct,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.audio"),onClick:r[12]||(r[12]=t=>da(11,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.audioMin"))+": "+(0,s.v_)(na.value[5]||0),9,kt),(0,l.Lk)("div",{ref_key:"el12",ref:Mt,class:"r-12-gray text-start","data-bs-toggle":"tooltip",title:(0,i.R1)(wt)("activity.horas"),onClick:r[13]||(r[13]=t=>da(12,t)),style:{"padding-right":"10px",width:"fit-content"}},(0,s.v_)((0,i.R1)(wt)("activity.horasMin"))+": "+(0,s.v_)(ca(ra.value?.[5]||0)),9,ft)])])])],64))}};const bt=mt;var ht=bt}}]);
//# sourceMappingURL=123.21095af9.js.map