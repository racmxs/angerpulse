{"version":3,"file":"js/757.4a78eeec.js","mappings":"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","sources":["webpack://angerpulse/./src/components/AngerDashboard.vue","webpack://angerpulse/./src/components/AngerDashboard.vue?1aa7"],"sourcesContent":["<template>\r\n  <div>\r\n    <label class=\"b-24-black\" v-html=\"t('activity.title')\"></label>\r\n    <br>\r\n  </div>\r\n  <div class=\"text-start px-4 pt-3\">\r\n    <p class=\"b-16-gray\" v-html=\"t('activity.temporalidad')\"></p>\r\n    <select id=\"FilterTempo\" class=\"form-control w-100 select-ap\" v-model=\"selectedOption\"\r\n      @change=\"GetDatos(selectedOption)\" v-html=\"t('activity.ultsem')\">\r\n    </select>\r\n    <div class=\"numeralia d-flex py-3\">\r\n      <div class=\"num-circle\">\r\n        <div class=\"circle-black b-48-gray p-3\">\r\n          <label class=\"m-auto\">{{ countAudios }}</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-rec b-20-gray w-100\">\r\n        <label class=\"m-auto px-3 b-20-gray\" v-html=\"t('activity.audio')\"></label>\r\n      </div>\r\n    </div>\r\n    <div class=\"numeralia d-flex py-3\">\r\n      <div v-if=\"minutos > 0\" class=\"num-circle\">\r\n        <div class=\"circle-black b-20-gray p-3\">\r\n          <label class=\"m-auto\">{{ minutos + ':' + segundos.toString().padStart(2, '0') + 'm' }}</label>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"num-circle\">\r\n        <div class=\"circle-black b-32-gray p-3\">\r\n          <label class=\"m-auto\">{{ segundos.toString().padStart(2, '0') + 's' }}</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-rec b-20-gray w-100\">\r\n        <label class=\"m-auto px-3 b-20-gray\" v-html=\"t('activity.horas')\"></label>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- GrÃ¡fica de barras -->\r\n  <div class=\"py-3 px-4\">\r\n    <p class=\"b-16-gray pt-2 pb-1 text-start\" v-html=\"t('activity.dias')\"></p>\r\n    <div>\r\n      <div v-if=\"historyStack.length > 0\" @click=\"goBack\" class=\"d-flex justify-content-start px-0\">\r\n        <div>\r\n          <button class=\"btn-back\">\r\n            <img width=\"20\" src=\"../assets/back.png\" class=\"m-auto\">\r\n          </button>\r\n        </div>\r\n        <div class=\"ps-0\">\r\n          <label class=\"b-18-gray\">Regresar</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <Bar style=\"overflow-y: visible;\" :data=\"barData\" :options=\"barOptions\" />\r\n    </div>\r\n  </div>\r\n  <!--GrÃ¡fica de calor-->\r\n  <div class=\"py-3 px-4\">\r\n    <p class=\"b-16-gray pt-2 pb-1 text-start\" v-html=\"t('activity.momentos')\">\r\n\r\n    </p>\r\n    <div style=\"display: flex; justify-content: center;\">\r\n      <table border=\"1\" style=\"border-collapse: collapse; width: 100%;\">\r\n        <tbody>\r\n          <!-- Generar filas desde la mÃ¡s alta hacia la mÃ¡s baja -->\r\n          <tr v-for=\"rowColor in maxRowsColor\" :key=\"rowColor\">\r\n            <td v-for=\"col in columnsColor\" :key=\"col\"\r\n              :style=\"{ backgroundColor: getColorAt(col, maxRowsColor - rowColor) }\" style=\"text-align:center;\">\r\n              {{ getValueAt(col, maxRowsColor - rowColor) ?? '' }}\r\n            </td>\r\n          </tr>\r\n\r\n          <!-- Fila inferior con nombres de los dÃ­as -->\r\n          <tr v-if=\"temporalidad != 2\">\r\n            <td v-for=\"col in columnsColor\" :key=\"col\" style=\"font-weight: bold; text-align: center;\">\r\n              {{ col.substring(0, 3) }}\r\n            </td>\r\n          </tr>\r\n          <tr v-else>\r\n            <td v-for=\"col in columnsColor\" :key=\"col\" style=\"font-weight: bold; text-align: center;\">\r\n              {{ col.substring(0, 5) }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div class=\"d-flex justify-content-start pt-4\">\r\n      <div class=\"mini-square\" style=\"background-color: #efefef;\"></div>\r\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.registro')\">\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-start pt-4\">\r\n      <div class=\"mini-square\" style=\"background-color: #E3FCFF;\"></div>\r\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.act')\">\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-start pt-3\">\r\n      <div class=\"mini-square\" style=\"background-color: #FFE4B3;\"></div>\r\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.mente')\">\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-start pt-3\">\r\n      <div class=\"mini-square\" style=\"background-color: #FFC4B3;\"></div>\r\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.lugares')\">\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-start pt-3\">\r\n      <div class=\"mini-square\" style=\"background-color: #FF9797;\"></div>\r\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.palabras')\">\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-start pt-3\">\r\n      <div class=\"mini-square\" style=\"background-color: #fb5353;\"></div>\r\n      <div class=\"r-12-gray text-start ps-3\" v-html=\"t('activity.hablar')\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n//Generales\r\nimport { useI18n } from 'vue-i18n'\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { API_BASE_URL } from '@/config/api'\r\n\r\nconst { t, locale } = useI18n();\r\nconst selectedOption = ref(1)\r\nconst temporalidad = ref(1)\r\nconst mesSeleccionado = ref(0)\r\nconst semanaSeleccionada = ref(0)\r\n// Cantidad de audios\r\nconst countAudios = ref(0)\r\n\r\nasync function GetAudiosCount(x) {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/config/GetCountAudios`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user: sesion, temporalidad: x })\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (data.status == 1) {\r\n      countAudios.value = data.data\r\n    } else {\r\n      countAudios.value = 0\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n  }\r\n}\r\n\r\n//Tiempo de escucha\r\nconst minutos = ref(0);\r\nconst segundos = ref(0);\r\n\r\nasync function GetTimeAudios(x) {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/config/GetTimeAudios`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user: sesion, temporalidad: x })\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (data.status == 1) {\r\n\r\n      const totalSegundos = data.data;\r\n      // OpciÃ³n 1: Guardar en variables separadas\r\n      minutos.value = Math.floor(totalSegundos / 60);\r\n      segundos.value = Math.floor(totalSegundos % 60);\r\n    } else {\r\n      minutos.value = 0\r\n      segundos.value = 0\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n  }\r\n}\r\n\r\n//GrÃ¡fica de barras\r\nimport { Chart as ChartJS, BarElement, CategoryScale, LinearScale, Tooltip, Legend } from 'chart.js'\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels'\r\nimport { Bar } from 'vue-chartjs'\r\n\r\nconst daysLabels = ref([])\r\nconst daysData = ref([])\r\nconst drillSource = ref([])\r\nconst historyStack = ref([]);\r\n\r\nChartJS.register(BarElement, CategoryScale, LinearScale, Tooltip, Legend, ChartDataLabels)\r\n\r\nconst barData = computed(() => ({\r\n  labels: daysLabels.value,\r\n  datasets: [\r\n    {\r\n      label: '',\r\n      data: daysData.value, // ðŸ”¹ ahora usa los datos dinÃ¡micos\r\n      backgroundColor: '#AAAAAA',\r\n      barThickness: 14,\r\n      borderRadius: 10,\r\n      pointStyle: 'circle',\r\n    }\r\n  ]\r\n}))\r\nconst barOptions = {\r\n  layout: {\r\n    padding: {\r\n      top: 10\r\n    }\r\n  },\r\n  responsive: true,\r\n  onClick: (evt, elements) => {\r\n    if (!elements.length) return;\r\n\r\n    const index = elements[0].index;\r\n    const item = drillSource.value[index];\r\n\r\n    if (!item) return;\r\n\r\n    handleDrill(item);\r\n  },\r\n  plugins: {\r\n    legend: {\r\n      display: true,\r\n      labels: {\r\n        padding: 10,\r\n        color: '#555',\r\n        boxHeight: 0\r\n      },\r\n    },\r\n    datalabels: {\r\n      anchor: 'end',\r\n      align: 'start',\r\n      offset: -30,\r\n      backgroundColor: '#000000',\r\n      borderRadius: 999,\r\n      color: '#ffffff',\r\n      font: {\r\n        weight: '500',\r\n        size: 10,\r\n      },\r\n      padding: {\r\n        top: 8,\r\n        bottom: 8,\r\n        left: 9,\r\n        right: 9,\r\n      },\r\n      formatter: (value) => value,\r\n    },\r\n  },\r\n  scales: {\r\n    y: {\r\n      beginAtZero: true,\r\n      ticks: {\r\n        display: false,\r\n      },\r\n      grid: {\r\n        display: true\r\n      },\r\n    },\r\n    x: {\r\n      grid: {\r\n        display: false,\r\n      }\r\n    },\r\n  }\r\n}\r\n\r\nfunction handleDrill(item) {\r\n  // Guardamos estado actual ANTES de cambiar\r\n  historyStack.value.push({\r\n    temporalidad: temporalidad.value,\r\n    mes: mesSeleccionado.value,\r\n    semana: semanaSeleccionada.value\r\n  });\r\n\r\n  // â¬‡ï¸ Si estÃ¡s viendo aÃ±o â†’ pasar a meses\r\n  if (temporalidad.value == 3) {\r\n    mesSeleccionado.value = item.dia;   // â† viene del backend\r\n    temporalidad.value = 2;\r\n    GetDays();\r\n    return;\r\n  }\r\n\r\n  // â¬‡ï¸ Si estÃ¡s viendo mes â†’ pasar a semanas\r\n  if (temporalidad.value == 2) {\r\n    semanaSeleccionada.value = item.dia;  // â† viene del backend\r\n    temporalidad.value = 1;\r\n    GetDays();\r\n    return;\r\n  }\r\n}\r\n\r\nfunction goBack() {\r\n  if (!historyStack.value.length) return;\r\n\r\n  const previous = historyStack.value.pop();\r\n\r\n  temporalidad.value = previous.temporalidad;\r\n  mesSeleccionado.value = previous.mes;\r\n  semanaSeleccionada.value = previous.semana;\r\n\r\n  GetDays();\r\n}\r\n\r\nasync function GetDays() {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/config/GetDays`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user: sesion, temporalidad: temporalidad.value, anio: 0, mes: mesSeleccionado.value, semana: semanaSeleccionada.value })\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (data.status == 1 && data.data != \"\") {\r\n      const parsedData = JSON.parse(data.data);\r\n      drillSource.value = parsedData;\r\n\r\n      if (temporalidad.value != 3) {\r\n        daysLabels.value = parsedData.map(item => [\r\n          item.nombre.substring(0, 3),\r\n          item.dia\r\n        ])\r\n      }\r\n      else {\r\n        daysLabels.value = parsedData.map(item => [\r\n          item.nombre.substring(0, 3)\r\n        ])\r\n      }\r\n\r\n      daysData.value = parsedData.map(item => item.cantidadAudios)\r\n    }\r\n    else {\r\n      daysLabels.value = []\r\n      daysData.value = [0, 0, 0, 0, 0, 0, 0];\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n  }\r\n}\r\n\r\n//Mapa de calor\r\nconst coloresMomentos = [\r\n  \"#efefef\",\r\n  \"#E3FCFF\", \r\n  \"#FFE4B3\", \r\n  \"#FFC4B3\", \r\n  \"#FF9797\", \r\n  \"#fb5353\" \r\n];\r\nconst diasOrden = ['Lunes', 'Martes', 'MiÃ©rcoles', 'Jueves', 'Viernes', 'SÃ¡bado', 'Domingo'];\r\nconst dataColorEs = ref({});\r\nconst dayMap = {\r\n  'Lunes': 'Mon',\r\n  'Martes': 'Tue',\r\n  'MiÃ©rcoles': 'Wed',\r\n  'Jueves': 'Thu',\r\n  'Viernes': 'Fri',\r\n  'SÃ¡bado': 'Sat',\r\n  'Domingo': 'Sun'\r\n};\r\n\r\nconst columnsColor = computed(() => {\r\n\r\n  // Semana â†’ DÃ­as\r\n  if (temporalidad.value == 1) {\r\n    return diasOrden\r\n  }\r\n\r\n  // Mes â†’ Semanas\r\n  if (temporalidad.value == 2) {\r\n    return [\"Sem 1\", \"Sem 2\", \"Sem 3\", \"Sem 4\", \"Sem 5\"]\r\n  }\r\n\r\n  // AÃ±o â†’ Meses\r\n  return [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"]\r\n})\r\n\r\nconst dataColor = computed(() => {\r\n  if (locale.value === 'es') return dataColorEs.value;\r\n\r\n  const translated = {};\r\n  for (const dia of diasOrden) {\r\n    translated[dayMap[dia]] = dataColorEs.value[dia] || [];\r\n  }\r\n  return translated;\r\n});\r\n\r\n\r\n\r\nconst maxRowsColor = computed(() => {\r\n  return Math.max(...columnsColor.value.map(col => dataColor.value[col]?.length || 0), 0);\r\n});\r\nconst getValueAt = (col, rowIndex) => {\r\n  const item = dataColor.value[col]?.[rowIndex];\r\n  return item ? item.intervalo : null;\r\n};\r\n\r\nfunction getColorAt(col, rowIndex) {\r\n  const item = dataColor.value[col]?.[rowIndex];\r\n\r\n  // Si no hay item â†’ blanco\r\n  if (!item) return \"#fff\";\r\n\r\n  // Si la cantidad es 0 â†’ blanco\r\n  if (!item.cantidad || item.cantidad === 0) return \"#fff\";\r\n\r\n  // Si hay dato â†’ pinta color\r\n  return coloresMomentos[item.momento] || \"#fff\";\r\n}\r\n\r\nasync function GetMomentsAudios(x) {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/config/GetMomentsAudios`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user: sesion, temporalidad: x })\r\n    })\r\n\r\n    const data = await response.json()\r\n    console.log(data.data)\r\n    if (data.status !== 1 || !data.data) {\r\n      dataColorEs.value = {}\r\n      return;\r\n    }\r\n\r\n    const parsed = JSON.parse(data.data)\r\n    // -------------------------\r\n    // ðŸŽ¯ SEMANA\r\n    // -------------------------\r\n    if (x == 1) {\r\n      const grouped = {}\r\n      diasOrden.forEach(d => grouped[d] = {})   // OBJETO, no array\r\n\r\n      parsed.forEach(item => {\r\n        const dia = item.Dia\r\n        const clave = `${item.Intervalo}-${item.Momento}`\r\n        // const intervalo = item.Intervalo\r\n\r\n        if (!grouped[dia]) return\r\n\r\n        if (!grouped[dia][clave]) {\r\n          grouped[dia][clave] = {\r\n            intervalo: item.Intervalo,\r\n            momento: item.Momento,\r\n            cantidad: 0\r\n          }\r\n        }\r\n\r\n        grouped[dia][clave].cantidad += item.CantidadAudios\r\n      })\r\n\r\n      // Convertimos OBJETO â†’ ARRAY\r\n      const result = {}\r\n      diasOrden.forEach(d => {\r\n        result[d] = Object.values(grouped[d])\r\n      })\r\n\r\n      dataColorEs.value = result\r\n      return\r\n    }\r\n\r\n    if (x == 2) {\r\n      const semanas = [\"Sem 1\", \"Sem 2\", \"Sem 3\", \"Sem 4\", \"Sem 5\"]\r\n\r\n      const grouped = {}\r\n      semanas.forEach(s => grouped[s] = {})\r\n\r\n      parsed.forEach(item => {\r\n        const key = \"Sem \" + item.Semana\r\n        const clave = `${item.Intervalo}-${item.Momento}`\r\n        //const intervalo = item.Intervalo\r\n\r\n        if (!grouped[key]) return\r\n\r\n        if (!grouped[key][clave]) {\r\n          grouped[key][clave] = {\r\n            intervalo: item.Intervalo,\r\n            momento: item.Momento,\r\n            cantidad: 0\r\n          }\r\n        }\r\n\r\n        grouped[key][clave].cantidad += item.CantidadAudios\r\n      })\r\n\r\n      const result = {}\r\n      semanas.forEach(s => {\r\n        result[s] = Object.values(grouped[s])\r\n      })\r\n\r\n      dataColorEs.value = result\r\n      return\r\n    }\r\n\r\n    // -------------------------\r\n    // ðŸŽ¯ AÃ‘O  (Meses)\r\n    // -------------------------\r\n\r\n\r\n    if (x == 3) {\r\n      const meses = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"]\r\n\r\n      // Primero organizamos por mes pero como OBJETO, no arreglo\r\n      const grouped = {}\r\n      meses.forEach(m => grouped[m] = {})\r\n\r\n      parsed.forEach(item => {\r\n        const mes = item.Label\r\n        const clave = `${item.Intervalo}-${item.Momento}`\r\n        //const intervalo = item.Intervalo\r\n\r\n        if (!grouped[mes]) return\r\n\r\n        // Si no existe ese intervalo aÃºn, crÃ©alo\r\n        if (!grouped[mes][clave]) {\r\n          grouped[mes][clave] = {\r\n            intervalo: item.Intervalo,\r\n            momento: item.Momento,\r\n            cantidad: 0\r\n          }\r\n        }\r\n\r\n        // Sumamos los audios\r\n        grouped[mes][clave].cantidad += item.CantidadAudios\r\n      })\r\n\r\n      // ðŸ”¥ ImportantÃ­simo:\r\n      // Tu componente espera ARRAYS, asÃ­ que convertimos de objeto â†’ arreglo\r\n      const result = {}\r\n      meses.forEach(m => {\r\n        result[m] = Object.values(grouped[m])\r\n      })\r\n\r\n      dataColorEs.value = result\r\n      return\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Error momentos\", e)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  GetDatos(selectedOption.value)\r\n})\r\n\r\nfunction GetDatos(x) {\r\n  temporalidad.value = x;\r\n  mesSeleccionado.value = 0;\r\n  semanaSeleccionada.value = 0;\r\n  GetAudiosCount(x);\r\n  GetTimeAudios(x);\r\n  GetDays();\r\n  GetMomentsAudios(x);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntable td,\r\ntable th {\r\n  border: 1px solid #ccc;\r\n}\r\n\r\n.h6 {\r\n  height: 24px;\r\n  width: 32px;\r\n}\r\n</style>","import script from \"./AngerDashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AngerDashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AngerDashboard.vue?vue&type=style&index=0&id=0e3f9187&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0e3f9187\"]])\n\nexport default __exports__"],"names":["t","locale","useI18n","selectedOption","ref","temporalidad","mesSeleccionado","semanaSeleccionada","countAudios","async","GetAudiosCount","x","sesion","localStorage","getItem","response","fetch","API_BASE_URL","method","headers","body","JSON","stringify","user","data","json","status","value","error","console","minutos","segundos","GetTimeAudios","totalSegundos","Math","floor","daysLabels","daysData","drillSource","historyStack","ChartJS","register","BarElement","CategoryScale","LinearScale","Tooltip","Legend","ChartDataLabels","barData","computed","labels","datasets","label","backgroundColor","barThickness","borderRadius","pointStyle","barOptions","layout","padding","top","responsive","onClick","evt","elements","length","index","item","handleDrill","plugins","legend","display","color","boxHeight","datalabels","anchor","align","offset","font","weight","size","bottom","left","right","formatter","scales","y","beginAtZero","ticks","grid","push","mes","semana","dia","GetDays","goBack","previous","pop","anio","parsedData","parse","map","nombre","substring","cantidadAudios","coloresMomentos","diasOrden","dataColorEs","dayMap","columnsColor","dataColor","translated","maxRowsColor","max","col","getValueAt","rowIndex","intervalo","getColorAt","cantidad","momento","GetMomentsAudios","log","parsed","grouped","forEach","d","Dia","clave","Intervalo","Momento","CantidadAudios","result","Object","values","semanas","s","key","Semana","meses","m","Label","e","GetDatos","onMounted","__exports__"],"sourceRoot":""}