"use strict";(self["webpackChunkangerpulse"]=self["webpackChunkangerpulse"]||[]).push([[757],{2757:function(a,e,t){t.r(e),t.d(e,{default:function(){return ea}});t(4114),t(8111),t(7588),t(1701);var l=t(6768),n=t(144),s=t(5130),r=t(4232),o=t(8745),i=t(5384),c=t(2674),u=t(17),d=t(3408),v=t(1010);const p=["innerHTML"],y={class:"text-start px-4 pt-3"},f=["innerHTML"],m=["innerHTML"],k={class:"numeralia d-flex py-3"},g={class:"num-circle"},b={class:"circle-black b-48-gray p-3"},L={class:"m-auto"},h={class:"data-rec b-20-gray w-100"},M=["innerHTML"],T={class:"numeralia d-flex py-3"},E={key:0,class:"num-circle"},S={class:"circle-black b-20-gray p-3"},C={class:"m-auto"},x={key:1,class:"num-circle"},R={class:"circle-black b-32-gray p-3"},F={class:"m-auto"},H={class:"data-rec b-20-gray w-100"},A=["innerHTML"],j={class:"py-3 px-4"},w=["innerHTML"],K={class:"py-3 px-4"},J=["innerHTML"],I={style:{display:"flex","justify-content":"center"}},O={border:"1",style:{"border-collapse":"collapse",width:"100%"}},X={key:0},$={key:1},_={class:"d-flex justify-content-start pt-4"},N=["innerHTML"],D={class:"d-flex justify-content-start pt-4"},P=["innerHTML"],q={class:"d-flex justify-content-start pt-3"},W=["innerHTML"],B={class:"d-flex justify-content-start pt-3"},G=["innerHTML"],V={class:"d-flex justify-content-start pt-3"},z=["innerHTML"],Q={class:"d-flex justify-content-start pt-3"},U=["innerHTML"];var Z={__name:"AngerDashboard",setup(a){const{t:e,locale:t}=(0,i.s9)(),Z=(0,n.KR)(1),Y=(0,n.KR)(1),aa=(0,n.KR)(0),ea=(0,n.KR)(0),ta=(0,n.KR)(0);async function la(a){try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch(`${c.J}/api/config/GetCountAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,temporalidad:a})}),l=await t.json();1==l.status?ta.value=l.data:ta.value=0}catch(e){console.error("Error al cargar audios:",e)}}const na=(0,n.KR)(0),sa=(0,n.KR)(0);async function ra(a){try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch(`${c.J}/api/config/GetTimeAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,temporalidad:a})}),l=await t.json();if(1==l.status){const a=l.data;na.value=Math.floor(a/60),sa.value=Math.floor(a%60)}else na.value=0,sa.value=0}catch(e){console.error("Error al cargar audios:",e)}}const oa=(0,n.KR)([]),ia=(0,n.KR)([]),ca=(0,n.KR)([]),ua=(0,n.KR)([]);u.t1.register(u.E8,u.PP,u.kc,u.m_,u.s$,d.A);const da=(0,l.EW)((()=>({labels:oa.value,datasets:[{label:"",data:ia.value,backgroundColor:"#AAAAAA",barThickness:14,borderRadius:10,pointStyle:"circle"}]}))),va={layout:{padding:{top:10}},responsive:!0,onClick:(a,e)=>{if(!e.length)return;const t=e[0].index,l=ca.value[t];l&&pa(l)},plugins:{legend:{display:!0,labels:{padding:10,color:"#555",boxHeight:0}},datalabels:{anchor:"end",align:"start",offset:-30,backgroundColor:"#000000",borderRadius:999,color:"#ffffff",font:{weight:"500",size:10},padding:{top:8,bottom:8,left:9,right:9},formatter:a=>a}},scales:{y:{beginAtZero:!0,ticks:{display:!1},grid:{display:!0}},x:{grid:{display:!1}}}};function pa(a){return ua.value.push({temporalidad:Y.value,mes:aa.value,semana:ea.value}),3==Y.value?(aa.value=a.dia,Y.value=2,void fa()):2==Y.value?(ea.value=a.dia,Y.value=1,void fa()):void 0}function ya(){if(!ua.value.length)return;const a=ua.value.pop();Y.value=a.temporalidad,aa.value=a.mes,ea.value=a.semana,fa()}async function fa(){try{const a=localStorage.getItem("token");if(!a)return;const e=await fetch(`${c.J}/api/config/GetDays`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a,temporalidad:Y.value,anio:0,mes:aa.value,semana:ea.value})}),t=await e.json();if(1==t.status&&""!=t.data){const a=JSON.parse(t.data);ca.value=a,3!=Y.value?oa.value=a.map((a=>[a.nombre.substring(0,3),a.dia])):oa.value=a.map((a=>[a.nombre.substring(0,3)])),ia.value=a.map((a=>a.cantidadAudios))}else oa.value=[],ia.value=[0,0,0,0,0,0,0]}catch(a){console.error("Error al cargar audios:",a)}}const ma=["#efefef","#E3FCFF","#FFE4B3","#FFC4B3","#FF9797","#fb5353"],ka=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],ga=(0,n.KR)({}),ba={Lunes:"Mon",Martes:"Tue","Miércoles":"Wed",Jueves:"Thu",Viernes:"Fri","Sábado":"Sat",Domingo:"Sun"},La=(0,l.EW)((()=>1==Y.value?ka:2==Y.value?["Sem 1","Sem 2","Sem 3","Sem 4","Sem 5"]:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"])),ha=(0,l.EW)((()=>{if("es"===t.value)return ga.value;const a={};for(const e of ka)a[ba[e]]=ga.value[e]||[];return a})),Ma=(0,l.EW)((()=>Math.max(...La.value.map((a=>ha.value[a]?.length||0)),0))),Ta=(a,e)=>{const t=ha.value[a]?.[e];return t?t.intervalo:null};function Ea(a,e){const t=ha.value[a]?.[e];return t&&t.cantidad&&0!==t.cantidad&&ma[t.momento]||"#fff"}async function Sa(a){try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch(`${c.J}/api/config/GetMomentsAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,temporalidad:a})}),l=await t.json();if(console.log(l.data),1!==l.status||!l.data)return void(ga.value={});const n=JSON.parse(l.data);if(1==a){const a={};ka.forEach((e=>a[e]={})),n.forEach((e=>{const t=e.Dia,l=`${e.Intervalo}-${e.Momento}`;a[t]&&(a[t][l]||(a[t][l]={intervalo:e.Intervalo,momento:e.Momento,cantidad:0}),a[t][l].cantidad+=e.CantidadAudios)}));const e={};return ka.forEach((t=>{e[t]=Object.values(a[t])})),void(ga.value=e)}if(2==a){const a=["Sem 1","Sem 2","Sem 3","Sem 4","Sem 5"],e={};a.forEach((a=>e[a]={})),n.forEach((a=>{const t="Sem "+a.Semana,l=`${a.Intervalo}-${a.Momento}`;e[t]&&(e[t][l]||(e[t][l]={intervalo:a.Intervalo,momento:a.Momento,cantidad:0}),e[t][l].cantidad+=a.CantidadAudios)}));const t={};return a.forEach((a=>{t[a]=Object.values(e[a])})),void(ga.value=t)}if(3==a){const a=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],e={};a.forEach((a=>e[a]={})),n.forEach((a=>{const t=a.Label,l=`${a.Intervalo}-${a.Momento}`;e[t]&&(e[t][l]||(e[t][l]={intervalo:a.Intervalo,momento:a.Momento,cantidad:0}),e[t][l].cantidad+=a.CantidadAudios)}));const t={};return a.forEach((a=>{t[a]=Object.values(e[a])})),void(ga.value=t)}}catch(e){console.error("Error momentos",e)}}function Ca(a){Y.value=a,aa.value=0,ea.value=0,la(a),ra(a),fa(),Sa(a)}return(0,l.sV)((()=>{Ca(Z.value)})),(a,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.Lk)("label",{class:"b-24-black",innerHTML:(0,n.R1)(e)("activity.title")},null,8,p),t[2]||(t[2]=(0,l.Lk)("br",null,null,-1))]),(0,l.Lk)("div",y,[(0,l.Lk)("p",{class:"b-16-gray",innerHTML:(0,n.R1)(e)("activity.temporalidad")},null,8,f),(0,l.bo)((0,l.Lk)("select",{id:"FilterTempo",class:"form-control w-100 select-ap","onUpdate:modelValue":t[0]||(t[0]=a=>Z.value=a),onChange:t[1]||(t[1]=a=>Ca(Z.value)),innerHTML:(0,n.R1)(e)("activity.ultsem")},null,40,m),[[s.u1,Z.value]]),(0,l.Lk)("div",k,[(0,l.Lk)("div",g,[(0,l.Lk)("div",b,[(0,l.Lk)("label",L,(0,r.v_)(ta.value),1)])]),(0,l.Lk)("div",h,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,n.R1)(e)("activity.audio")},null,8,M)])]),(0,l.Lk)("div",T,[na.value>0?((0,l.uX)(),(0,l.CE)("div",E,[(0,l.Lk)("div",S,[(0,l.Lk)("label",C,(0,r.v_)(na.value+":"+sa.value.toString().padStart(2,"0")+"m"),1)])])):((0,l.uX)(),(0,l.CE)("div",x,[(0,l.Lk)("div",R,[(0,l.Lk)("label",F,(0,r.v_)(sa.value.toString().padStart(2,"0")+"s"),1)])])),(0,l.Lk)("div",H,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,n.R1)(e)("activity.horas")},null,8,A)])])]),(0,l.Lk)("div",j,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,n.R1)(e)("activity.dias")},null,8,w),(0,l.Lk)("div",null,[ua.value.length>0?((0,l.uX)(),(0,l.CE)("div",{key:0,onClick:ya,class:"d-flex justify-content-start px-0"},t[3]||(t[3]=[(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn-back"},[(0,l.Lk)("img",{width:"20",src:o,class:"m-auto"})])],-1),(0,l.Lk)("div",{class:"ps-0"},[(0,l.Lk)("label",{class:"b-18-gray"},"Regresar")],-1)]))):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[(0,l.bF)((0,n.R1)(v.yP),{style:{"overflow-y":"visible"},data:da.value,options:va},null,8,["data"])])]),(0,l.Lk)("div",K,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,n.R1)(e)("activity.momentos")},null,8,J),(0,l.Lk)("div",I,[(0,l.Lk)("table",O,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ma.value,(a=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(La.value,(e=>((0,l.uX)(),(0,l.CE)("td",{key:e,style:(0,r.Tr)([{backgroundColor:Ea(e,Ma.value-a)},{"text-align":"center"}])},(0,r.v_)(Ta(e,Ma.value-a)??""),5)))),128))])))),128)),2!=Y.value?((0,l.uX)(),(0,l.CE)("tr",X,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(La.value,(a=>((0,l.uX)(),(0,l.CE)("td",{key:a,style:{"font-weight":"bold","text-align":"center"}},(0,r.v_)(a.substring(0,3)),1)))),128))])):((0,l.uX)(),(0,l.CE)("tr",$,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(La.value,(a=>((0,l.uX)(),(0,l.CE)("td",{key:a,style:{"font-weight":"bold","text-align":"center"}},(0,r.v_)(a.substring(0,5)),1)))),128))]))])])]),(0,l.Lk)("div",_,[t[4]||(t[4]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#efefef"}},null,-1)),(0,l.Lk)("div",{class:"r-12-gray text-start ps-3",innerHTML:(0,n.R1)(e)("activity.registro")},null,8,N)]),(0,l.Lk)("div",D,[t[5]||(t[5]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#E3FCFF"}},null,-1)),(0,l.Lk)("div",{class:"r-12-gray text-start ps-3",innerHTML:(0,n.R1)(e)("activity.act")},null,8,P)]),(0,l.Lk)("div",q,[t[6]||(t[6]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFE4B3"}},null,-1)),(0,l.Lk)("div",{class:"r-12-gray text-start ps-3",innerHTML:(0,n.R1)(e)("activity.mente")},null,8,W)]),(0,l.Lk)("div",B,[t[7]||(t[7]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFC4B3"}},null,-1)),(0,l.Lk)("div",{class:"r-12-gray text-start ps-3",innerHTML:(0,n.R1)(e)("activity.lugares")},null,8,G)]),(0,l.Lk)("div",V,[t[8]||(t[8]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FF9797"}},null,-1)),(0,l.Lk)("div",{class:"r-12-gray text-start ps-3",innerHTML:(0,n.R1)(e)("activity.palabras")},null,8,z)]),(0,l.Lk)("div",Q,[t[9]||(t[9]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#fb5353"}},null,-1)),(0,l.Lk)("div",{class:"r-12-gray text-start ps-3",innerHTML:(0,n.R1)(e)("activity.hablar")},null,8,U)])])],64))}},Y=t(1241);const aa=(0,Y.A)(Z,[["__scopeId","data-v-0e3f9187"]]);var ea=aa}}]);
//# sourceMappingURL=757.4a78eeec.js.map