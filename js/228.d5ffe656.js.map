{"version":3,"file":"js/228.d5ffe656.js","mappings":"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","sources":["webpack://angerpulse/./src/config/api.js","webpack://angerpulse/./src/components/AngerVerifyCode.vue","webpack://angerpulse/./src/components/AngerVerifyCode.vue?6503"],"sourcesContent":["//export const API_BASE_URL = \"https://localhost:5274\"\r\nexport const API_BASE_URL = \"https://marcoracm-002-site1.mtempurl.com\"","<template>\r\n    <div class=\"container v50 d-flex justify-content-center align-items-center\">\r\n        <div class=\"row justify-content-center w-100\">\r\n            <div class=\"col-md-6\">\r\n                <div class=\"card shadow-sm\">\r\n                    <div class=\"card-body\">\r\n                        <h5 class=\"card-title text-center mb-4\">Verifica tu código</h5>\r\n                        <form @submit.prevent=\"submitCode\">\r\n                            <div class=\"d-flex justify-content-between mb-3\">\r\n                                <input v-for=\"(digit, index) in digits\" :key=\"index\" type=\"text\"\r\n                                    class=\"form-control text-center mx-1\" maxlength=\"1\" pattern=\"[0-9]*\"\r\n                                    inputmode=\"numeric\" v-model=\"digits[index]\" @input=\"onInput(index)\"\r\n                                    @keydown.backspace=\"onBackspace(index)\" @keydown.left=\"focusPrev(index)\"\r\n                                    @keydown.right=\"focusNext(index)\" ref=\"digitRefs\" />\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-primary w-100\" :disabled=\"loading\">\r\n                                {{ loading ? 'Verificando...' : 'Validar código' }}\r\n                            </button>\r\n                            <div v-if=\"error\" class=\"alert alert-danger mt-3\">\r\n                                {{ error }}\r\n                            </div>\r\n                            <div v-if=\"success\" class=\"alert alert-success mt-3\">\r\n                                ¡Código verificado correctamente!\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n     <!-- Modal de error -->\r\n    <div v-if=\"showModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <h3>{{ errorMessage }}</h3>\r\n            <br>\r\n            <button class=\"btn-black px-3\" @click=\"showModal = false\">{{ t('account.btnCerrar') }}</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, nextTick } from 'vue'\r\nimport { API_BASE_URL } from '@/config/api'\r\nimport { useRouter } from 'vue-router' //redirect\r\nimport { useI18n } from 'vue-i18n' //multilenguaje\r\n\r\n//multilenguaje\r\nconst { t } = useI18n() \r\nconst digits = ref(['', '', '', '', '', ''])\r\nconst digitRefs = ref([])\r\nconst loading = ref(false)\r\nconst error = ref('')\r\nconst success = ref(false)\r\n//router\r\nconst router = useRouter()\r\n\r\n//modal\r\n    const errorMessage = ref('')\r\n    const showModal = ref(false)\r\n\r\nconst onInput = index => {\r\n    const val = digits.value[index]\r\n    if (!/^\\d$/.test(val)) {\r\n        digits.value[index] = ''\r\n        return\r\n    }\r\n    if (index < 5) {\r\n        nextTick(() => digitRefs.value[index + 1].focus())\r\n    }\r\n}\r\n\r\nconst onBackspace = index => {\r\n    if (digits.value[index] === '' && index > 0) {\r\n        nextTick(() => digitRefs.value[index - 1].focus())\r\n    }\r\n}\r\n\r\nconst focusPrev = index => {\r\n    if (index > 0) {\r\n        digitRefs.value[index - 1].focus()\r\n    }\r\n}\r\n\r\nconst focusNext = index => {\r\n    if (index < 5) {\r\n        digitRefs.value[index + 1].focus()\r\n    }\r\n}\r\n\r\nconst submitCode = async () => {\r\n    error.value = ''\r\n    success.value = false\r\n    loading.value = true\r\n\r\n    const code = digits.value.join('')\r\n    await new Promise(resolve => setTimeout(resolve, 1000))\r\n\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/api/usuarios/VerifyCode`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                email: localStorage.getItem('email'),\r\n                code: code\r\n            })\r\n        })\r\n      \r\n        const data = await response.json()\r\n       showModal.value = true\r\n        if (data.status == 1) {\r\n            localStorage.setItem('token', localStorage.getItem('email'))\r\n            router.push('/home') // Redirige a la verificación de codigo\r\n        } else {\r\n            errorMessage.value = data.message\r\n            showModal.value = true\r\n        }\r\n    } catch (error) {\r\n        errorMessage.value = 'Error de conexión con el servidor'\r\n    }\r\n\r\n    loading.value = false\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ninput[type=\"text\"] {\r\n    width: 3rem;\r\n    height: 3rem;\r\n    font-size: 1.5rem;\r\n}\r\n\r\n.v50 {\r\n    height: 50vh !important;\r\n}\r\n\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding:20px\r\n}\r\n.modal-content {\r\n  background: white;\r\n  padding: 40px;\r\n  border-radius: 8px;\r\n}\r\n</style>\r\n","import script from \"./AngerVerifyCode.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AngerVerifyCode.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AngerVerifyCode.vue?vue&type=style&index=0&id=ac4a79d8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ac4a79d8\"]])\n\nexport default __exports__"],"names":["API_BASE_URL","t","useI18n","digits","ref","digitRefs","loading","error","success","router","useRouter","errorMessage","showModal","onInput","index","val","value","test","nextTick","focus","onBackspace","focusPrev","focusNext","submitCode","async","code","join","Promise","resolve","setTimeout","response","fetch","method","headers","body","JSON","stringify","email","localStorage","getItem","data","json","status","setItem","push","message","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","class","onSubmit","_withModifiers","_hoisted_6","_createElementBlock","_Fragment","_renderList","digit","key","type","maxlength","pattern","inputmode","$event","onKeydown","disabled","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","_hoisted_12","onClick","_cache","_unref","__exports__"],"sourceRoot":""}