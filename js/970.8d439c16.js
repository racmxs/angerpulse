"use strict";(self["webpackChunkangerpulse"]=self["webpackChunkangerpulse"]||[]).push([[970],{6970:function(a,e,t){t.r(e),t.d(e,{default:function(){return ta}});t(4114),t(8111),t(7588),t(1701);var l=t(6768),n=t(144),s=t(5130),o=t(4232),r=t(8745),u=t(5384),i=t(2674),c=t(17),v=t(3408),d=t(1010);const p=["innerHTML"],y={class:"text-start px-4 pt-3"},m=["innerHTML"],k=["innerHTML"],f={class:"numeralia d-flex py-3"},b={class:"num-circle"},g={class:"circle-black b-48-gray p-3"},L={class:"m-auto"},h={class:"data-rec b-20-gray w-100"},S=["innerHTML"],E={class:"numeralia d-flex py-3"},M={key:0,class:"num-circle"},R={class:"circle-black b-20-gray p-3"},x={class:"m-auto"},C={key:1,class:"num-circle"},T={class:"circle-black b-20-gray p-3"},_={class:"m-auto"},W={key:2,class:"num-circle"},F={class:"circle-black b-20-gray p-3"},K={class:"m-auto"},A={class:"data-rec b-20-gray w-100"},j=["innerHTML"],w={class:"py-3 px-4"},O=["innerHTML"],$={class:"py-3 px-4"},J=["innerHTML"],H={style:{display:"flex","justify-content":"center"}},I={border:"1",style:{"border-collapse":"collapse",width:"100%"}},X={class:"d-flex justify-content-start pt-4"},N={class:"r-12-gray text-start ps-3"},P={class:"d-flex justify-content-start pt-4"},q={class:"r-12-gray text-start ps-3"},D={class:"d-flex justify-content-start pt-3"},B={class:"r-12-gray text-start ps-3"},G={class:"d-flex justify-content-start pt-3"},V={class:"r-12-gray text-start ps-3"},z={class:"d-flex justify-content-start pt-3"},Q={class:"r-12-gray text-start ps-3"},U={class:"d-flex justify-content-start pt-3"},Z={class:"r-12-gray text-start ps-3"};var Y={__name:"AngerDashboard",setup(a){const{t:e,locale:t}=(0,u.s9)(),Y=(0,n.KR)(1),aa=(0,n.KR)(1),ea=(0,n.KR)(0),ta=(0,n.KR)(0),la=(0,n.KR)(0),na=(0,l.EW)((()=>({days:{es:["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],en:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},months:{es:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},weeks:{es:["Sm1","Sm2","Sm3","Sm4","Sm5"],en:["Wk1","Wk2","Wk3","Wk4","Wk5"]}})));async function sa(a){try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch(`${i.J}/api/config/GetCountAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,temporalidad:a})}),l=await t.json();1==l.status?la.value=l.data:la.value=0}catch(e){console.error("Error al cargar audios:",e)}}const oa=(0,n.KR)(0),ra=(0,n.KR)(0),ua=(0,n.KR)(0);async function ia(a){try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch(`${i.J}/api/config/GetTimeAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,temporalidad:a})}),l=await t.json();if(1==l.status){const a=l.data;oa.value=Math.floor(a/3600),ra.value=Math.floor(a%3600/60),ua.value=a%60}else oa.value=0,ra.value=0,ua.value=0}catch(e){console.error("Error al cargar audios:",e)}}const ca=(0,l.EW)((()=>da.value.length?da.value.map((a=>Ea(a.KeyLabel).substring(0,2===aa.value?5:3))):[])),va=(0,n.KR)([]),da=(0,n.KR)([]),pa=(0,n.KR)([]);c.t1.register(c.E8,c.PP,c.kc,c.m_,c.s$,v.A);const ya=(0,l.EW)((()=>({labels:ca.value,datasets:[{label:"",data:va.value,backgroundColor:"#AAAAAA",barThickness:14,borderRadius:10,pointStyle:"circle"}]}))),ma={layout:{padding:{top:10}},responsive:!0,onClick:(a,e)=>{if(!e.length)return;const t=e[0].index,l=da.value[t];l&&ka(l)},plugins:{legend:{display:!0,labels:{padding:10,color:"#555",boxHeight:0}},datalabels:{anchor:"end",align:"start",offset:-30,backgroundColor:"#000000",borderRadius:999,color:"#ffffff",font:{weight:"500",size:10},padding:{top:8,bottom:8,left:9,right:9},formatter:a=>a,listeners:{click:a=>{const e=a.dataIndex,t=da.value[e];t&&ka(t)},enter:a=>{a.chart.canvas.style.cursor="pointer"},leave:a=>{a.chart.canvas.style.cursor="default"}}}},scales:{y:{beginAtZero:!0,ticks:{display:!1},grid:{display:!0}},x:{grid:{display:!1}}}};function ka(a){return pa.value.push({temporalidad:aa.value,mes:ea.value,semana:ta.value}),3==aa.value?(ea.value=a.KeyLabel,aa.value=2,ba(),void Ca()):2==aa.value?(ta.value=a.KeyLabel,aa.value=1,ba(),void Ca()):void 0}function fa(){if(!pa.value.length)return;const a=pa.value.pop();aa.value=a.temporalidad,ea.value=a.mes,ta.value=a.semana,ba(),Ca()}async function ba(){try{const a=localStorage.getItem("token");if(!a)return;const e=await fetch(`${i.J}/api/config/GetDays`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a,temporalidad:aa.value,anio:0,mes:ea.value,semana:ta.value})}),t=await e.json();if(1==t.status&&""!=t.data){const a=JSON.parse(t.data);da.value=a,va.value=a.map((a=>a.cantidadAudios)),Sa.value++,va.value=a.map((a=>a.cantidadAudios))}else va.value=[0,0,0,0,0,0,0],Sa.value++}catch(a){console.error("Error al cargar audios:",a)}}const ga=["#efefef","#E3FCFF","#FFE4B3","#FFC4B3","#FF9797","#fb5353"],La=(0,n.KR)({}),ha=(0,l.EW)((()=>1==aa.value?[1,2,3,4,5,6,7]:2==aa.value?[1,2,3,4,5]:[1,2,3,4,5,6,7,8,9,10,11,12])),Sa=(0,n.KR)(0);function Ea(a){const e=t.value;let l;return l=1==aa.value?na.value.days[e][a-1]:2==aa.value?na.value.weeks[e][a-1]:na.value.months[e][a-1],l??""}const Ma=(0,l.EW)((()=>Math.max(...ha.value.map((a=>La.value[a]?.length||0)),0))),Ra=(a,e)=>{const t=La.value[a]?.[e];return t?t.intervalo:null};function xa(a,e){const t=La.value[a]?.[e];return t&&0!==t.cantidad&&ga[t.momento]||"#fff"}async function Ca(){try{const a=localStorage.getItem("token");if(!a)return;const e=await fetch(`${i.J}/api/config/GetMomentsAudios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a,temporalidad:aa.value,mes:ea.value,semana:ta.value})}),t=await e.json();if(console.log(t.data),1!==t.status||!t.data)return void(La.value={});const l=JSON.parse(t.data);if(1==aa.value){const a={};ha.value.forEach((e=>a[e]={})),l.forEach((e=>{const t=e.KeyLabel,l=`${e.Intervalo}-${e.Momento}`;a[t]&&(a[t][l]||(a[t][l]={intervalo:e.Intervalo,momento:e.Momento,cantidad:0,tiempo:0}),a[t][l].cantidad+=e.CantidadAudios,a[t][l].tiempo+=e.TiempoRep||0)}));const e={};return ha.value.forEach((t=>{e[t]=Object.values(a[t])})),void(La.value=e)}if(2==aa.value){const a={};ha.value.forEach((e=>a[e]={})),l.forEach((e=>{const t=e.KeyLabel,l=`${e.Intervalo}-${e.Momento}`;a[t]&&(a[t][l]||(a[t][l]={intervalo:e.Intervalo,momento:e.Momento,cantidad:0,tiempo:0}),a[t][l].cantidad+=e.CantidadAudios,a[t][l].tiempo+=e.TiempoRep||0)}));const e={};return ha.value.forEach((t=>{e[t]=Object.values(a[t])})),void(La.value=e)}if(3==aa.value){const a={};ha.value.forEach((e=>a[e]={})),l.forEach((e=>{const t=e.KeyLabel,l=`${e.Intervalo}-${e.Momento}`;a[t]&&(a[t][l]||(a[t][l]={intervalo:e.Intervalo,momento:e.Momento,cantidad:0,tiempo:0}),a[t][l].cantidad+=e.CantidadAudios,a[t][l].tiempo+=e.TiempoRep||0)}));const e={};return ha.value.forEach((t=>{e[t]=Object.values(a[t])})),void(La.value=e)}}catch(a){console.error("Error momentos",a)}}function Ta(a){aa.value=a,ea.value=0,ta.value=0,sa(a),ia(a),ba(),Ca()}(0,l.sV)((()=>{Ta(Y.value)}));const _a=(0,l.EW)((()=>{const a={};return Object.values(La.value).forEach((e=>{e.forEach((e=>{a[e.momento]||(a[e.momento]=0),a[e.momento]+=e.cantidad}))})),a})),Wa=(0,l.EW)((()=>{const a={};return Object.values(La.value).forEach((e=>{e.forEach((e=>{a[e.momento]||(a[e.momento]=0),a[e.momento]+=e.tiempo||0}))})),a}));function Fa(a=0){const e=Number(a)||0,t=Math.floor(e/3600),l=Math.floor(e%3600/60),n=e%60;return t>0?`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}h`:l>0?`${l.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}m`:`${n.toString().padStart(2,"0")}s`}const Ka=(0,l.EW)((()=>ha.value.map((a=>Ea(a).substring(0,2===aa.value?5:3)))));return(a,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.Lk)("label",{class:"b-24-black",innerHTML:(0,n.R1)(e)("activity.title")},null,8,p),t[2]||(t[2]=(0,l.Lk)("br",null,null,-1))]),(0,l.Lk)("div",y,[(0,l.Lk)("p",{class:"b-16-gray",innerHTML:(0,n.R1)(e)("activity.temporalidad")},null,8,m),(0,l.bo)((0,l.Lk)("select",{id:"FilterTempo",class:"form-control w-100 select-ap","onUpdate:modelValue":t[0]||(t[0]=a=>Y.value=a),onChange:t[1]||(t[1]=a=>Ta(Y.value)),innerHTML:(0,n.R1)(e)("activity.ultsem")},null,40,k),[[s.u1,Y.value]]),(0,l.Lk)("div",f,[(0,l.Lk)("div",b,[(0,l.Lk)("div",g,[(0,l.Lk)("label",L,(0,o.v_)(la.value),1)])]),(0,l.Lk)("div",h,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,n.R1)(e)("activity.audio")},null,8,S)])]),(0,l.Lk)("div",E,[oa.value>0?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",R,[(0,l.Lk)("label",x,(0,o.v_)(oa.value+":"+ra.value.toString().padStart(2,"0")+":"+ua.value.toString().padStart(2,"0")+"h"),1)])])):ra.value>0?((0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("div",T,[(0,l.Lk)("label",_,(0,o.v_)(ra.value+":"+ua.value.toString().padStart(2,"0")+"m"),1)])])):((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",F,[(0,l.Lk)("label",K,(0,o.v_)(ua.value.toString().padStart(2,"0")+"s"),1)])])),(0,l.Lk)("div",A,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,n.R1)(e)("activity.horas")},null,8,j)])])]),(0,l.Lk)("div",w,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,n.R1)(e)("activity.dias")},null,8,O),(0,l.Lk)("div",null,[pa.value.length>0?((0,l.uX)(),(0,l.CE)("div",{key:0,onClick:fa,class:"d-flex justify-content-start px-0"},t[3]||(t[3]=[(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn-back"},[(0,l.Lk)("img",{width:"20",src:r,class:"m-auto"})])],-1),(0,l.Lk)("div",{class:"ps-0"},[(0,l.Lk)("label",{class:"b-18-gray"},"Regresar")],-1)]))):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[((0,l.uX)(),(0,l.Wv)((0,n.R1)(d.yP),{key:Sa.value,style:{"overflow-y":"visible"},data:ya.value,options:ma},null,8,["data"]))])]),(0,l.Lk)("div",$,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,n.R1)(e)("activity.momentos")},null,8,J),(0,l.Lk)("div",H,[(0,l.Lk)("table",I,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ma.value,(a=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ha.value,(e=>((0,l.uX)(),(0,l.CE)("td",{key:e,style:(0,o.Tr)([{backgroundColor:xa(e,Ma.value-a)},{"text-align":"center"}])},(0,o.v_)(Ra(e,Ma.value-a)??""),5)))),128))])))),128)),(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ka.value,((a,e)=>((0,l.uX)(),(0,l.CE)("td",{key:e,style:{"font-weight":"bold","text-align":"center"}},(0,o.v_)(a),1)))),128))])])])]),(0,l.Lk)("div",X,[t[5]||(t[5]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#efefef"}},null,-1)),(0,l.Lk)("div",N,[(0,l.eW)((0,o.v_)((0,n.R1)(e)("activity.registro"))+" ",1),t[4]||(t[4]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" ("+(0,o.v_)(_a.value[0]||0)+") / "+(0,o.v_)(Fa(Wa.value?.[0]||0)),1)])]),(0,l.Lk)("div",P,[t[7]||(t[7]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#E3FCFF"}},null,-1)),(0,l.Lk)("div",q,[(0,l.eW)((0,o.v_)((0,n.R1)(e)("activity.act"))+" ",1),t[6]||(t[6]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" ("+(0,o.v_)(_a.value[1]||0)+") / "+(0,o.v_)(Fa(Wa.value?.[1]||0)),1)])]),(0,l.Lk)("div",D,[t[9]||(t[9]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFE4B3"}},null,-1)),(0,l.Lk)("div",B,[(0,l.eW)((0,o.v_)((0,n.R1)(e)("activity.mente"))+" ",1),t[8]||(t[8]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" ("+(0,o.v_)(_a.value[2]||0)+") / "+(0,o.v_)(Fa(Wa.value?.[2]||0)),1)])]),(0,l.Lk)("div",G,[t[11]||(t[11]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFC4B3"}},null,-1)),(0,l.Lk)("div",V,[(0,l.eW)((0,o.v_)((0,n.R1)(e)("activity.lugares"))+" ",1),t[10]||(t[10]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" ("+(0,o.v_)(_a.value[3]||0)+") / "+(0,o.v_)(Fa(Wa.value?.[3]||0)),1)])]),(0,l.Lk)("div",z,[t[13]||(t[13]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FF9797"}},null,-1)),(0,l.Lk)("div",Q,[(0,l.eW)((0,o.v_)((0,n.R1)(e)("activity.palabras"))+" ",1),t[12]||(t[12]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" ("+(0,o.v_)(_a.value[4]||0)+") / "+(0,o.v_)(Fa(Wa.value?.[4]||0)),1)])]),(0,l.Lk)("div",U,[t[15]||(t[15]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#fb5353"}},null,-1)),(0,l.Lk)("div",Z,[(0,l.eW)((0,o.v_)((0,n.R1)(e)("activity.hablar"))+" ",1),t[14]||(t[14]=(0,l.Lk)("br",null,null,-1)),(0,l.eW)(" ("+(0,o.v_)(_a.value[5]||0)+") / "+(0,o.v_)(Fa(Wa.value?.[5]||0)),1)])])])],64))}},aa=t(1241);const ea=(0,aa.A)(Y,[["__scopeId","data-v-1cc2bda4"]]);var ta=ea}}]);
//# sourceMappingURL=970.8d439c16.js.map