{"version":3,"file":"js/718.d59ba4e3.js","mappings":"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","sources":["webpack://angerpulse/./src/config/api.js","webpack://angerpulse/./src/components/AngerPlay.vue","webpack://angerpulse/./src/components/AngerPlay.vue?146d"],"sourcesContent":["//export const API_BASE_URL = \"https://localhost:5001\"\r\nexport const API_BASE_URL = \"https://marcoracm-002-site1.mtempurl.com\"","<template>\r\n  <div v-show=\"!moment\">\r\n    <label class=\"b-24-black\" @click=\"updateShow\" v-html=\"t('homeplay.ira')\"></label>\r\n    <br><br>\r\n    <div class=\"audio-player\">\r\n      <canvas ref=\"canvasRef\" width=\"256\" height=\"200\" class=\"visualizer\"></canvas>\r\n      <div class=\"song-info\">\r\n        <div class=\"d-flex justify-content-center pb-3\">\r\n          <div>\r\n            <img v-show=\"!isFavorite\" src=\"../assets/heart-gray.png\" class=\"m-auto\" style=\"width: 55px;\"\r\n              @click=\"AddFavorite()\" data-bs-toggle=\"modal\" data-bs-target=\"#modalFavorite\">\r\n            <img v-show=\"isFavorite\" src=\"../assets/heart.png\" class=\"m-auto\" style=\"width: 55px;\"\r\n              @click=\"RemoveFavoriteModal()\" data-bs-toggle=\"modal\" data-bs-target=\"#modalFavorite\">\r\n          </div>\r\n        </div>\r\n        <div class=\"time\">\r\n          {{ formatTime(currentTime) }} / {{ formatTime(duration) }}\r\n\r\n        </div>\r\n        <input type=\"range\" min=\"0\" :max=\"duration\" v-model=\"currentTime\" @input=\"seekAudio\" />\r\n      </div>\r\n      <div class=\"d-flex py-5\">\r\n        <img src=\"../assets/Atras.png\" class=\"m-auto\" @click=\"prevTrack\">\r\n        <img :src=\"isPlaying ? pauseIcon : playIcon\" style=\"height: 100%; width: fit-content; margin: auto;\"\r\n          @click=\"togglePlay\">\r\n        <img src=\"../assets/Siguiente.png\" class=\"m-auto\" @click=\"nextTrack\">\r\n      </div>\r\n    </div>\r\n\r\n    <p class=\"r-14-gray pb-5\">\r\n      Music by <a href=\"https://open.spotify.com/artist/1XhgLxpSWwGVyxMUNUifV2?si=9F7rsZ7dQcG-Kz1cllta6g\"\r\n        target=\"_blank\" rel=\"noopener noreferrer\">CalmWaves</a>\r\n      <br>\r\n      Arr. by Angerpulse\r\n    </p>\r\n\r\n  </div>\r\n  <div v-show=\"moment\">\r\n    <div>\r\n      <div>\r\n        <label class=\"b-24-black\" v-html=\"t('when.estabas')\"></label>\r\n        <ul class=\"ps-0\">\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-m\" class=\"form-check-input\" selected type=\"radio\" name=\"plan\" value=\"1\" aria-label=\"...\">\r\n              <label for=\"plan-m\" class=\"form-check-label\" v-html=\"t('when.act1')\"></label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-s\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"2\" aria-label=\"...\">\r\n              <label for=\"plan-s\" class=\"form-check-label\" v-html=\"t('when.act2')\"></label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-a\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"3\" aria-label=\"...\">\r\n              <label for=\"plan-a\" class=\"form-check-label\" v-html=\"t('when.act3')\"></label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-4\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"4\" aria-label=\"...\">\r\n              <label for=\"plan-4\" class=\"form-check-label\" v-html=\"t('when.act4')\"></label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-5\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"5\" aria-label=\"...\">\r\n              <label for=\"plan-5\" class=\"form-check-label\" v-html=\"t('when.act5')\"></label>\r\n            </div>\r\n          </li>\r\n\r\n        </ul>\r\n        <div class=\"d-flex justify-content-center pt-3 pb-5\">\r\n          <div class=\"px-3\">\r\n            <button type=\"button\" class=\"btn-gray-white\" @click=\"CloseMoment()\" v-html=\"t('homeplay.omitir')\">\r\n            </button>\r\n          </div>\r\n          <div class=\"px-3\">\r\n            <button type=\"button\" class=\"btn-black border-0\" @click=\"SetMoment()\" v-html=\"t('homeplay.guardar')\">\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <!-- Modal -->\r\n  <div class=\"modal fade\" id=\"modalFavorite\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-body px-3\">\r\n          <div class=\"p-4 d-flex justify-content-center\">\r\n            <label v-show=\"!isFavoriteQuestion\" class=\"form-label r-24-gray\" v-html=\"t('homeplay.agregar')\"></label>\r\n            <label v-show=\"isFavoriteQuestion\" class=\"form-label r-24-gray\" v-html=\"t('homeplay.remover')\"></label>\r\n          </div>\r\n          <div class=\"d-flex justify-content-between pb-3\" v-if=\"isFavoriteQuestion\">\r\n            <div>\r\n              <button type=\"button\" class=\"btn-gray\" data-bs-dismiss=\"modal\" v-html=\"t('homeplay.cancelar')\">\r\n              </button>\r\n            </div>\r\n            <div>\r\n              <button type=\"button\" class=\"btn-black\" @click=\"RemoveFavorite()\" data-bs-dismiss=\"modal\"\r\n                v-html=\"t('homeplay.aceptar')\">\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <br><br>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onBeforeUnmount } from 'vue'\r\nimport * as bootstrap from 'bootstrap'\r\nimport { useI18n } from 'vue-i18n'\r\nimport { API_BASE_URL } from '@/config/api'\r\n\r\nconst { t } = useI18n()\r\nlet modalElement\r\nlet closeTimeout\r\n\r\n//Cierra automaticamente el modal de Agregar a Favoritos\r\nonMounted(() => {\r\n  GetAudios()\r\n  setupVisualizer()\r\n  modalElement = document.getElementById('modalFavorite')\r\n  modalElement.addEventListener('shown.bs.modal', () => {\r\n    clearTimeout(closeTimeout)\r\n    if (!isFavoriteQuestion.value) {\r\n      closeTimeout = setTimeout(() => {\r\n        const modalInstance = bootstrap.Modal.getInstance(modalElement)\r\n        if (modalInstance) {\r\n          modalInstance.hide()\r\n        }\r\n      }, 1000)\r\n    }\r\n  })\r\n})\r\n\r\n// No se que hace\r\nonBeforeUnmount(() => {\r\n  cancelAnimationFrame(animationId)\r\n  audio.pause()\r\n  audio.src = ''\r\n  if (audioContext) audioContext.close()\r\n\r\n  if (modalElement) {\r\n    modalElement.removeEventListener('shown.bs.modal', () => { })\r\n  }\r\n  clearTimeout(closeTimeout)\r\n})\r\nconst audios = ref([]);\r\nfunction limpiarNombre(nombre) {\r\n  return nombre.replace(/\\.[^.]+(?=\\.\\w+$)/, '') // quita hash intermedio\r\n}\r\n\r\n\r\nconst moment = ref(false)\r\nconst playIcon = new URL('@/assets/Play.png', import.meta.url).href\r\nconst pauseIcon = new URL('@/assets/Pausa.png', import.meta.url).href\r\n\r\nconst currentIndex = ref(0)\r\nconst isPlaying = ref(false)\r\nconst isShuffle = ref(true)\r\nconst currentTime = ref(0)\r\nconst duration = ref(0)\r\nconst durationSong = ref(0)\r\nconst audio = new Audio()\r\nconst isFavorite = ref(false)\r\nconst isFavoriteQuestion = ref(false)\r\nconst countPause = ref(0)\r\nconst idPlay = ref(0)\r\n\r\nconst canvasRef = ref(null)\r\nlet audioContext, analyser, dataArray, source, animationId\r\nlet shuffledIndices = []\r\n\r\nconst hasShownMessage = ref(false)\r\nlet playbackInterval = null\r\nconst playbackSeconds = ref(0)\r\n\r\n//Cierra modal de momento\r\nfunction CloseMoment() {\r\n  moment.value = false\r\n}\r\n\r\n//Actualiza color de coraz贸n\r\nfunction AddFavorite() {\r\n  isFavorite.value = !isFavorite.value\r\n  isFavoriteQuestion.value = false\r\n  audios.value[currentIndex.value].estatus = true\r\n  SetFavorite()\r\n}\r\n\r\n//Guarda en BD el favorito a la audioteca\r\nasync function SetFavorite() {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n    const currentAudio = audios.value[currentIndex.value]\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/audioteca/SetAudioteca`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ username: sesion, audio: currentAudio.id + '' })\r\n    })\r\n\r\n    if (!response.ok) throw new Error(\"Error en la petici贸n\")\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n  }\r\n}\r\n\r\n//Cierra modal de Favorito\r\nfunction RemoveFavoriteModal() {\r\n  isFavoriteQuestion.value = true\r\n}\r\n\r\n//Quita color de coraz贸n\r\nfunction RemoveFavorite() {\r\n  isFavorite.value = false\r\n  isFavoriteQuestion.value = true\r\n  audios.value[currentIndex.value].estatus = false\r\n  DeleteFavorite()\r\n}\r\n\r\n//Elimina el audio de mis Favoritos\r\nasync function DeleteFavorite() {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n    const currentAudio = audios.value[currentIndex.value]\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/audioteca/DelAudioteca`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ username: sesion, audio: currentAudio.id + '' })\r\n    })\r\n\r\n    if (!response.ok) throw new Error(\"Error en la petici贸n\")\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n  }\r\n}\r\n\r\n//Reproducci贸n\r\nfunction setupVisualizer() {\r\n  audioContext = new (window.AudioContext || window.webkitAudioContext)()\r\n  analyser = audioContext.createAnalyser()\r\n  analyser.fftSize = 64\r\n  const bufferLength = analyser.frequencyBinCount\r\n  dataArray = new Uint8Array(bufferLength)\r\n\r\n  source = audioContext.createMediaElementSource(audio)\r\n  source.connect(analyser)\r\n  analyser.connect(audioContext.destination)\r\n\r\n  drawVisualizer()\r\n\r\n  if (audioContext.state === 'suspended') {\r\n    const resume = () => {\r\n      audioContext.resume()\r\n      document.removeEventListener('touchstart', resume)\r\n    }\r\n    document.addEventListener('touchstart', resume, { once: true })\r\n  }\r\n}\r\nfunction drawVisualizer() {\r\n  const canvas = canvasRef.value\r\n  const ctx = canvas.getContext('2d')\r\n  const width = canvas.width\r\n  const height = canvas.height\r\n  const centerY = height / 2\r\n\r\n  function draw() {\r\n    animationId = requestAnimationFrame(draw)\r\n    analyser.getByteFrequencyData(dataArray)\r\n\r\n    ctx.clearRect(0, 0, width, height)\r\n\r\n    const barWidth = width / dataArray.length\r\n    let x = 0\r\n\r\n    for (let i = 0; i < dataArray.length; i++) {\r\n\r\n      const value = dataArray[i]\r\n      const barHeight = value / 2\r\n      // ctx.fillStyle = '#aaa'\r\n      const gradient = ctx.createLinearGradient(0, centerY - barHeight, 0, centerY + barHeight)\r\n      gradient.addColorStop(0, '#00f')\r\n      gradient.addColorStop(1, '#0ff')\r\n      ctx.fillStyle = gradient\r\n      ctx.fillRect(x, centerY - barHeight, barWidth, barHeight)\r\n      ctx.fillRect(x, centerY, barWidth, barHeight)\r\n      x += barWidth + 1\r\n    }\r\n  }\r\n\r\n  draw()\r\n}\r\nfunction shuffleArray(length) {\r\n  const indices = [...Array(length).keys()]\r\n  for (let i = indices.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1))\r\n      ;[indices[i], indices[j]] = [indices[j], indices[i]]\r\n  }\r\n  return indices\r\n}\r\n//----------------------------- Nueva reproducci贸n \r\n//Inicia contador de audio en 0\r\nfunction loadTrack(index) {\r\n  const currentAudio = audios.value[index]\r\n  audio.src = currentAudio.url\r\n\r\n  //  sincroniza el coraz贸n seg煤n el valor de Estatus\r\n  isFavorite.value = !!currentAudio.estatus\r\n  durationSong.value = 0\r\n  audio.load()\r\n  stopPlaybackTimer()\r\n  audio.play().then(() => {\r\n    isPlaying.value = true\r\n    startPlaybackTimer()\r\n  }).catch(err => {\r\n    console.warn('iOS puede haber bloqueado la reproducci贸n:', err)\r\n  })\r\n}\r\n//Pausa o play Manda a llamar play con valor 1 que se esta pausando el audio\r\nfunction togglePlay() {\r\n  if (audio.paused) {\r\n    startPlaybackTimer()\r\n    audio.play()\r\n    isPlaying.value = true\r\n  } else {\r\n    SetPlay(1)\r\n    stopPlaybackTimer()\r\n    audio.pause()\r\n    isPlaying.value = false\r\n    countPause.value++;\r\n    if (!hasShownMomentThisSession() && (playbackSeconds.value >= 10 | (playbackSeconds.value >= 9 && countPause.value > 1))) {\r\n      moment.value = true;\r\n      hasShownMessage.value = true\r\n      markMomentAsShown()\r\n      playbackSeconds.value = 0\r\n      countPause.value = 0\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n//No se que hace\r\nfunction startPlaybackTimer() {\r\n  if (playbackInterval) return // Evita m煤ltiples intervalos\r\n\r\n  playbackInterval = setInterval(() => {\r\n    playbackSeconds.value++\r\n    durationSong.value++\r\n  }, 1000)\r\n}\r\n//No se que hace\r\nfunction stopPlaybackTimer() {\r\n  clearInterval(playbackInterval)\r\n  playbackInterval = null\r\n}\r\n// Siguiente canci贸n Llama a play con 0\r\nfunction nextTrack() {\r\n  SetPlay(0)\r\n  if (isShuffle.value) {\r\n    if (shuffledIndices.length === 0) {\r\n      shuffledIndices = shuffleArray(audios.value.length)\r\n    }\r\n    currentIndex.value = shuffledIndices.shift()\r\n  } else {\r\n    currentIndex.value = (currentIndex.value + 1) % audios.value.length\r\n  }\r\n  loadTrack(currentIndex.value)\r\n}\r\n//Canci贸n anterior llama a play con 0\r\nfunction prevTrack() {\r\n  SetPlay(0)\r\n  if (isShuffle.value) {\r\n    if (shuffledIndices.length === 0) {\r\n      shuffledIndices = shuffleArray(audios.value.length)\r\n    }\r\n    currentIndex.value = shuffledIndices.shift()\r\n  } else {\r\n    currentIndex.value = (currentIndex.value - 1 + audios.value.length) % audios.value.length\r\n  }\r\n  loadTrack(currentIndex.value)\r\n}\r\n//No se que hace\r\nfunction seekAudio() {\r\n  audio.currentTime = currentTime.value\r\n}\r\n\r\naudio.addEventListener('timeupdate', () => {\r\n  currentTime.value = audio.currentTime\r\n  duration.value = audio.duration || 0\r\n})\r\n\r\naudio.addEventListener('ended', async () => {\r\n  console.log(\"termina canci贸n\")\r\n  // SetPlay(0)\r\n  nextTrack()\r\n})\r\n\r\n//Formatea fecha\r\nfunction formatTime(time) {\r\n  const minutes = Math.floor(time / 60)\r\n  const seconds = Math.floor(time % 60).toString().padStart(2, '0')\r\n  return `${minutes}:${seconds}`\r\n}\r\n//Obtiene audios\r\nasync function GetAudios() {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n    const response = await fetch(`${API_BASE_URL}/api/config/GetAudiosUser`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ username: sesion })\r\n    })\r\n\r\n    if (!response.ok) throw new Error(\"Error en la petici贸n\")\r\n\r\n    const data = await response.json()\r\n\r\n    const dataAudios = Array.isArray(JSON.parse(data.data)) ? JSON.parse(data.data) : data.data\r\n    if (!Array.isArray(dataAudios)) throw new Error(\"dataAudios no es un array\")\r\n\r\n    const arr = dataAudios.map(item => {\r\n      const limpio = limpiarNombre(item.Nombre)\r\n      return {\r\n        id: item.Audio,\r\n        url: `/audios/${limpio}`,\r\n        estatus: item.Estatus ?? false, //  guarda el valor de la API\r\n        nombre: item.Nombre\r\n      }\r\n    })\r\n\r\n    audios.value = arr\r\n\r\n    if (audios.value.length > 0) {\r\n      loadTrack(0)\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n  }\r\n}\r\n\r\n\r\n// onMounted(() => {\r\n//   GetAudios()\r\n//   setupVisualizer()\r\n// })\r\n\r\n// onBeforeUnmount(() => {\r\n//   cancelAnimationFrame(animationId)\r\n//   audio.pause()\r\n//   audio.src = ''\r\n//   if (audioContext) audioContext.close()\r\n// })\r\n\r\n//Guarda momento\r\nasync function SetMoment() {\r\n  try {\r\n    const sesion = localStorage.getItem(\"token\")\r\n    if (!sesion) return\r\n\r\n    const response = await fetch(`${API_BASE_URL}/api/config/SetMoment`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ idMomento: document.querySelector('input[name=\"plan\"]:checked').value, idUser: sesion, idAudio: idPlay.value })\r\n    })\r\n    moment.value = false\r\n    if (!response.ok) throw new Error(\"Error en la petici贸n\")\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al cargar audios:\", error)\r\n    moment.value = false\r\n  }\r\n}\r\n//Guarda reproducci贸n\r\nasync function SetPlay(x) {\r\n  console.log(\"Registra\");\r\n  console.log(idPlay.value);\r\n  console.log(durationSong.value);\r\n  if (durationSong.value >= 10) {\r\n    try {\r\n      const sesion = localStorage.getItem(\"token\")\r\n      if (!sesion) return\r\n      const currentAudio = audios.value[currentIndex.value]\r\n\r\n      const response = await fetch(`${API_BASE_URL}/api/config/SetPlay`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ idReproduccion: idPlay.value, tiempo: durationSong.value, idUser: sesion, idAudio: currentAudio.id + '', home: true })\r\n      })\r\n      const data = await response.json()\r\n      if (!response.ok) throw new Error(\"Error en la petici贸n\")\r\n      else {\r\n        console.log(\"Registra dato\");\r\n        console.log(data.data);\r\n        if (x == 0)\r\n          idPlay.value = 0\r\n        else\r\n          idPlay.value = data.data\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al cargar audios:\", error)\r\n    }\r\n  }\r\n}\r\n\r\nconst MOMENT_SESSION_KEY = 'moment_popup_session'\r\n\r\nfunction getHalfHourSessionKey() {\r\n  const now = new Date()\r\n\r\n  const year = now.getFullYear()\r\n  const month = String(now.getMonth() + 1).padStart(2, '0')\r\n  const day = String(now.getDate()).padStart(2, '0')\r\n  const hour = String(now.getHours()).padStart(2, '0')\r\n\r\n  const minutes = now.getMinutes()\r\n\r\n  //  tu l贸gica especial\r\n  const block = minutes <= 30 ? '01-30' : '31-00'\r\n\r\n  return `${year}-${month}-${day}-${hour}-${block}`\r\n}\r\n\r\nfunction hasShownMomentThisSession() {\r\n  const currentSession = getHalfHourSessionKey()\r\n  return localStorage.getItem(MOMENT_SESSION_KEY) === currentSession\r\n}\r\n\r\nfunction markMomentAsShown() {\r\n  const currentSession = getHalfHourSessionKey()\r\n  localStorage.setItem(MOMENT_SESSION_KEY, currentSession)\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.audio-player {\r\n  text-align: center;\r\n  background: #fff;\r\n  padding: 1rem;\r\n  border-radius: 8px;\r\n  color: #555;\r\n}\r\n\r\n.visualizer {\r\n  display: block;\r\n  margin: 1rem auto;\r\n  background-color: white;\r\n}\r\n\r\n.song-info {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.song-info h3 {\r\n  margin: 0;\r\n}\r\n\r\n.song-info .time {\r\n  font-size: 0.9rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.song-info input[type=range] {\r\n  width: 100%;\r\n}\r\n\r\n.controls button {\r\n  background: none;\r\n  border: none;\r\n  margin: 0 1rem;\r\n  cursor: pointer;\r\n  color: white;\r\n}\r\n\r\n.controls img {\r\n  width: 40px;\r\n  height: 40px;\r\n}\r\n\r\n.controls .active {\r\n  color: lime;\r\n}\r\n</style>\r\n","import script from \"./AngerPlay.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AngerPlay.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AngerPlay.vue?vue&type=style&index=0&id=1c0969ce&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1c0969ce\"]])\n\nexport default __exports__"],"names":["API_BASE_URL","MOMENT_SESSION_KEY","t","useI18n","modalElement","closeTimeout","onMounted","GetAudios","setupVisualizer","document","getElementById","addEventListener","clearTimeout","isFavoriteQuestion","value","setTimeout","modalInstance","bootstrap","getInstance","hide","onBeforeUnmount","cancelAnimationFrame","animationId","audio","pause","src","audioContext","close","removeEventListener","audios","ref","limpiarNombre","nombre","replace","moment","playIcon","URL","href","pauseIcon","currentIndex","isPlaying","isShuffle","currentTime","duration","durationSong","Audio","isFavorite","countPause","idPlay","canvasRef","analyser","dataArray","source","shuffledIndices","hasShownMessage","playbackInterval","playbackSeconds","CloseMoment","AddFavorite","estatus","SetFavorite","async","sesion","localStorage","getItem","currentAudio","response","fetch","method","headers","body","JSON","stringify","username","id","ok","Error","error","console","RemoveFavoriteModal","RemoveFavorite","DeleteFavorite","window","AudioContext","webkitAudioContext","createAnalyser","fftSize","bufferLength","frequencyBinCount","Uint8Array","createMediaElementSource","connect","destination","drawVisualizer","state","resume","once","canvas","ctx","getContext","width","height","centerY","draw","requestAnimationFrame","getByteFrequencyData","clearRect","barWidth","length","x","i","barHeight","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","shuffleArray","indices","Array","keys","j","Math","floor","random","loadTrack","index","url","load","stopPlaybackTimer","play","then","startPlaybackTimer","catch","err","warn","togglePlay","paused","SetPlay","hasShownMomentThisSession","markMomentAsShown","setInterval","clearInterval","nextTrack","shift","prevTrack","seekAudio","formatTime","time","minutes","seconds","toString","padStart","data","json","dataAudios","isArray","parse","arr","map","item","limpio","Nombre","Estatus","SetMoment","idMomento","querySelector","idUser","idAudio","log","idReproduccion","tiempo","home","getHalfHourSessionKey","now","Date","year","getFullYear","month","String","getMonth","day","getDate","hour","getHours","getMinutes","block","currentSession","setItem","__exports__"],"sourceRoot":""}