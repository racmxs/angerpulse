{"version":3,"file":"js/306.c6630665.js","mappings":"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","sources":["webpack://angerpulse/./src/components/AngerPlay.vue","webpack://angerpulse/./src/components/AngerPlay.vue?146d"],"sourcesContent":["<template>\r\n  <div v-show=\"!moment\">\r\n    <label class=\"r-28-gray\" @click=\"updateShow\">Domina tu ira</label>\r\n    <br><br>\r\n    <div class=\"audio-player\">\r\n\r\n      <audio ref=\"audioRef\" :src=\"currentSong\" @ended=\"nextSong\" @timeupdate=\"updateTime\"\r\n        @loadedmetadata=\"updateDuration\" />\r\n    </div>\r\n    <!-- <canvas ref=\"canvasRef\" width=\"256\" height=\"150\" class=\"visualizer\"></canvas> -->\r\n    <!-- <canvas ref=\"canvasRef\" width=\"400\" height=\"150\" class=\"visualizer\"></canvas> -->\r\n    <!-- <canvas ref=\"canvasRef\" width=\"300\" height=\"300\" class=\"visualizer\"></canvas> -->\r\n    <!-- <canvas ref=\"canvasRef\" width=\"300\" height=\"100\" class=\"visualizer\"></canvas> -->\r\n    <div class=\"d-flex\">\r\n      <canvas ref=\"canvasRef\" width=\"256\" height=\"200\" class=\"visualizer\"></canvas>\r\n      <!-- <img src=\"../assets/Frecuencia.png\" class=\"m-auto\"> -->\r\n    </div>\r\n    <div class=\"d-flex py-5\">\r\n      <img src=\"../assets/Atras.png\" class=\"m-auto\" @click=\"prevSong\">\r\n      <img :src=\"isPlaying ? pauseIcon : playIcon\"\r\n        style=\"height: 100%; width: fit-content; margin: auto;\" @click=\"togglePlay\">\r\n      <img src=\"../assets/Siguiente.png\" class=\"m-auto\" @click=\"nextSong\">\r\n    </div>\r\n    <div class=\"d-flex justify-content-between px-4\">\r\n      <div class=\"my-auto\">\r\n        <label class=\"b-20-gray\">{{ currentSongName }}</label>\r\n      </div>\r\n      <div>\r\n        <img src=\"../assets/heart.png\" class=\"m-auto\">\r\n      </div>\r\n    </div>\r\n    <div class=\"progress-bar px-4 py-4\">\r\n      <input type=\"range\" min=\"0\" :max=\"duration\" step=\"0.1\" v-model=\"currentTime\" @input=\"seekAudio\" />\r\n      <div class=\"time\">\r\n        {{ formatTime(currentTime) }} / {{ formatTime(duration) }}\r\n      </div>\r\n    </div>\r\n    <!-- <br>\r\n    <div class=\"interseccion-large my-4\"></div> -->\r\n    <!-- <p class=\"m-10-gray text-start px-3\">\r\n      El fracaso, la tristeza y el arrepentimiento son los compañeros de viaje de la ira…\r\n      <br><br>\r\n      Es más fácil excluirla y no admitirla que gobernarla…\r\n      <br><br>\r\n      Debes sofocar sus primeros impulsos…\r\n      <br><br>\r\n      Al poseerte ya no puedes contenerla…\r\n      <br><br>\r\n      Séneca\r\n      <br>\r\n      Sobre la ira\r\n    </p>\r\n    <div class=\"interseccion-large my-4\"></div> -->\r\n    <p class=\"r-14-gray pb-5\">\r\n      Music by CalmWaves\r\n      <br><br>\r\n      Arr. by Angerpulse\r\n    </p>\r\n    <label class=\"b-40-gray bg-white px-5\">Guía</label>\r\n    <div class=\"square-info pt-5\" style=\"margin-top: -30px;\">\r\n      <p class=\"m-16-gray px-4 py-4\">\r\n        Cuando escuches el primer UDU (sonido de percusión) inhala despacio y profundo por la nariz.\r\n        <br><br>\r\n        Sin interrumpir la inhalación hasta escuchar el siguiente UDU...\r\n        <br><br>\r\n        Ahora con calma exhala suave y lento por la boca...\r\n        <br><br>\r\n        Sin interrumpir la exhalación hasta escuchar el siguiente UDU...\r\n        <br><br>\r\n        Sigue alternando inhalación y exhalación cada vez que escuches UDU.\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <div v-show=\"moment\">\r\n    <div>\r\n      <div>\r\n        <label class=\"sb-20-black pb-4\">¿En qué momento estabas?</label>\r\n        <ul class=\"ps-0\">\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-m\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\" aria-label=\"...\">\r\n              <label for=\"plan-m\" class=\"form-check-label\">1) Antes de actividades previstas, planeadas o\r\n                rutinarias. </label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-s\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\" aria-label=\"...\">\r\n              <label for=\"plan-s\" class=\"form-check-label\">2) Cavilaciones y sobrepensamiento. Encerrado en tu\r\n                mente.</label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-a\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\" aria-label=\"...\">\r\n              <label for=\"plan-a\" class=\"form-check-label\">3) Transiciones entre situaciones, actividades,\r\n                lugares. </label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-4\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\" aria-label=\"...\">\r\n              <label for=\"plan-4\" class=\"form-check-label\">4) Indignación o irritación por palabras o acciones\r\n                de alguien más.</label>\r\n            </div>\r\n          </li>\r\n          <li class=\"list-group-item text-start r-16-gray py-2\">\r\n            <div class=\"ps-5 form-check\">\r\n              <input id=\"plan-5\" class=\"form-check-input\" type=\"radio\" name=\"plan\" value=\"\" aria-label=\"...\">\r\n              <label for=\"plan-5\" class=\"form-check-label\">5) Después de hablar/actuar de manera emocional, impulsiva e incorrecta.</label>\r\n            </div>\r\n          </li>\r\n          \r\n        </ul>\r\n        <div class=\"d-flex justify-content-center pt-3 pb-5\">\r\n          <div class=\"px-3\">\r\n            <button type=\"button\" class=\"btn-gray-white\" @click=\"SetMoment()\">\r\n              Omitir\r\n            </button>\r\n          </div>\r\n          <div class=\"px-3\">\r\n            <button type=\"button\" class=\"btn-black border-0\" @click=\"SetMoment()\">\r\n              Guardar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <label class=\"sb-20-black pb-5\">¿Por qué indicar el momento?</label>\r\n        <p class=\"r-16-gray text-center px-3 pb-5\">\r\n          Distinguir y registrar el “momento” en el que estabas cuando decidiste hacer un audioejercicio(s) te\r\n          ayudará a:\r\n          <br><br>\r\n          - Entender cuándo debes estar más atento para regular tus emociones pre-ira y contener tus principales\r\n          detonantes de ira.\r\n          <br><br>\r\n          - Desarrollar una mayor capacidad de prevención y autocontrol.\r\n          <br><br>\r\n          Si decides no indicar el momento, solo pulsa el botón “omitir” cuando aparezca la pantalla de registro.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\n\r\nconst songs = [\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_2.mp3', import.meta.url).href,\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_6.mp3', import.meta.url).href,\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_7.mp3', import.meta.url).href,\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_8.mp3', import.meta.url).href,\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_9.mp3', import.meta.url).href,\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_11.mp3', import.meta.url).href,\r\n  new URL('@/assets/audios/Angerpulse_Audioejercicio_21.mp3', import.meta.url).href\r\n]\r\nconst moment = ref(false)\r\nconst playIcon = new URL('@/assets/Play.png', import.meta.url).href\r\nconst pauseIcon = new URL('@/assets/Pausa.png', import.meta.url).href\r\nconst audioRef = ref(null)\r\nconst isPlaying = ref(false)\r\nconst shuffleOrder = ref([])\r\nconst shuffleIndex = ref(0)\r\nconst currentIndex = ref(0)\r\nconst currentSong = computed(() => songs[currentIndex.value])\r\nconst currentTime = ref(0)\r\nconst duration = ref(0)\r\nconst currentSongName = computed(() => `AP ${currentIndex.value + 1}`)\r\n\r\nconst canvasRef = ref(null)\r\nconst audioContext = ref(null)\r\nconst analyser = ref(null)\r\nconst dataArray = ref(null)\r\nconst animationId = ref(null)\r\n\r\nfunction setupVisualizer() {\r\n  if (!audioRef.value) return\r\n\r\n  audioContext.value = new (window.AudioContext || window.webkitAudioContext)()\r\n  const source = audioContext.value.createMediaElementSource(audioRef.value)\r\n  analyser.value = audioContext.value.createAnalyser()\r\n\r\n  source.connect(analyser.value)\r\n  analyser.value.connect(audioContext.value.destination)\r\n\r\n  // analyser.value.fftSize = 64\r\n  // const bufferLength = analyser.value.frequencyBinCount\r\n  // dataArray.value = new Uint8Array(bufferLength)\r\n\r\n  analyser.value.fftSize = 2048 // Mayor resolución de onda\r\nconst bufferLength = analyser.value.fftSize\r\ndataArray.value = new Uint8Array(bufferLength)\r\n\r\n  drawVisualizer()\r\n}\r\n\r\nfunction drawVisualizer() {\r\n  const canvas = canvasRef.value\r\n  const ctx = canvas.getContext('2d')\r\n  const width = canvas.width\r\n  const height = canvas.height\r\n  const centerY = height / 2\r\n\r\n  function draw() {\r\n    animationId.value = requestAnimationFrame(draw)\r\n    analyser.value.getByteFrequencyData(dataArray.value)\r\n\r\n    ctx.clearRect(0, 0, width, height)\r\n\r\n    const barWidth = width / dataArray.value.length\r\n    let x = 0\r\n\r\n    for (let i = 0; i < dataArray.value.length; i++) {\r\n      const value = dataArray.value[i]\r\n      const barHeight = value / 2\r\n\r\n      // Color de barra (puedes usar gradientes si quieres)\r\n     // ctx.fillStyle = '#aaa' // gris claro como en la imagen\r\n      const gradient = ctx.createLinearGradient(0, centerY - barHeight, 0, centerY + barHeight)\r\n      gradient.addColorStop(0, '#00f')\r\n      gradient.addColorStop(1, '#0ff')\r\n      ctx.fillStyle = gradient\r\n\r\n      // Dibuja de centro hacia arriba\r\n      ctx.fillRect(x, centerY - barHeight, barWidth, barHeight)\r\n\r\n      // Dibuja de centro hacia abajo (espejo)\r\n      ctx.fillRect(x, centerY, barWidth, barHeight)\r\n\r\n      x += barWidth + 1 // separa un poco las barras\r\n    }\r\n  }\r\n\r\n  draw()\r\n}\r\n\r\n// function drawVisualizer() {\r\n//   const canvas = canvasRef.value\r\n//   const ctx = canvas.getContext('2d')\r\n//   const width = canvas.width\r\n//   const height = canvas.height\r\n\r\n//   function draw() {\r\n//     animationId.value = requestAnimationFrame(draw)\r\n//     analyser.value.getByteTimeDomainData(dataArray.value)\r\n\r\n//     ctx.clearRect(0, 0, width, height)\r\n\r\n//     ctx.lineWidth = 2\r\n//     ctx.strokeStyle = '#00bcd4' // color de la onda\r\n\r\n//     ctx.beginPath()\r\n\r\n//     const sliceWidth = width / dataArray.value.length\r\n//     let x = 0\r\n\r\n//     for (let i = 0; i < dataArray.value.length; i++) {\r\n//       const v = dataArray.value[i] / 128.0 // rango normalizado (0.0 a 2.0)\r\n//       const y = (v * height) / 2\r\n\r\n//       if (i === 0) {\r\n//         ctx.moveTo(x, y)\r\n//       } else {\r\n//         ctx.lineTo(x, y)\r\n//       }\r\n\r\n//       x += sliceWidth\r\n//     }\r\n\r\n//     ctx.lineTo(width, height / 2)\r\n//     ctx.stroke()\r\n//   }\r\n\r\n//   draw()\r\n// }\r\n\r\n// function drawVisualizer() {\r\n//   const canvas = canvasRef.value\r\n//   const ctx = canvas.getContext('2d')\r\n//   const width = canvas.width\r\n//   const height = canvas.height\r\n//   const centerX = width / 2\r\n//   const centerY = height / 2\r\n//   const radius = 30 // radio base desde donde empiezan las barras\r\n\r\n//   function draw() {\r\n//     animationId.value = requestAnimationFrame(draw)\r\n//     analyser.value.getByteFrequencyData(dataArray.value)\r\n\r\n//     ctx.clearRect(0, 0, width, height)\r\n\r\n//     const bars = dataArray.value.length\r\n//     const angleStep = (Math.PI * 2) / bars\r\n\r\n//     for (let i = 0; i < bars; i++) {\r\n//       const value = dataArray.value[i]\r\n//       const barLength = value * 0.7\r\n\r\n//       const angle = i * angleStep\r\n\r\n//       const xStart = centerX + Math.cos(angle) * radius\r\n//       const yStart = centerY + Math.sin(angle) * radius\r\n//       const xEnd = centerX + Math.cos(angle) * (radius + barLength)\r\n//       const yEnd = centerY + Math.sin(angle) * (radius + barLength)\r\n\r\n//       // Fondo gris claro: barra base\r\n//       ctx.beginPath()\r\n//       ctx.strokeStyle = '#ccc'\r\n//       ctx.lineWidth = 3\r\n//       ctx.moveTo(centerX + Math.cos(angle) * radius, centerY + Math.sin(angle) * radius)\r\n//       ctx.lineTo(centerX + Math.cos(angle) * (radius + 50), centerY + Math.sin(angle) * (radius + 50))\r\n//       ctx.stroke()\r\n\r\n//       // Barra activa: según volumen\r\n//       ctx.beginPath()\r\n//       const r = value + 100\r\n//       const g = 50 + (value * 1.5)\r\n//       const b = 200\r\n//       ctx.strokeStyle = `rgb(${r},${g},${b})`\r\n//       ctx.lineWidth = 3\r\n//       ctx.moveTo(xStart, yStart)\r\n//       ctx.lineTo(xEnd, yEnd)\r\n//       ctx.stroke()\r\n//     }\r\n//   }\r\n\r\n//   draw()\r\n// }\r\n// function drawVisualizer() {\r\n//   const canvas = canvasRef.value\r\n//   const ctx = canvas.getContext('2d')\r\n//   const width = canvas.width\r\n//   const height = canvas.height\r\n\r\n//   function draw() {\r\n//     animationId.value = requestAnimationFrame(draw)\r\n//     analyser.value.getByteFrequencyData(dataArray.value)\r\n\r\n//     ctx.clearRect(0, 0, width, height)\r\n\r\n//     const barWidth = width / dataArray.value.length\r\n//     let x = 0\r\n\r\n//     for (let i = 0; i < dataArray.value.length; i++) {\r\n//       const barHeight = dataArray.value[i] / 2\r\n\r\n//       // Fondo base: barra gris clara\r\n//       ctx.fillStyle = '#eee'\r\n//       ctx.fillRect(x, 0, barWidth - 2, height)\r\n\r\n//       // Barra activa: se ilumina desde abajo hacia arriba\r\n//       const r = barHeight + 100\r\n//       const g = 50 + (barHeight * 2)\r\n//       const b = 150\r\n\r\n//       ctx.fillStyle = `rgb(${r},${g},${b})`\r\n//       ctx.fillRect(x, height - barHeight, barWidth - 2, barHeight)\r\n\r\n//       x += barWidth\r\n//     }\r\n//   }\r\n\r\n//   draw()\r\n// }\r\nfunction SetMoment(){\r\n  moment.value = false\r\n}\r\n/*Generación alatoria*/\r\nfunction generateShuffleOrder() {\r\n  const indices = songs.map((_, i) => i)\r\n  // Fisher-Yates Shuffle\r\n  for (let i = indices.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1))\r\n      ;[indices[i], indices[j]] = [indices[j], indices[i]]\r\n  }\r\n\r\n  shuffleOrder.value = indices\r\n  shuffleIndex.value = 0\r\n}\r\n/*Restaura la reproducción*/\r\nfunction restartPlayback() {\r\n  if (audioRef.value) {\r\n    audioRef.value.load()\r\n\r\n    const tryPlay = () => {\r\n      audioRef.value.play().then(() => {\r\n        isPlaying.value = true\r\n        if (!audioContext.value) setupVisualizer()\r\n      }).catch((err) => {\r\n        console.error('No se pudo reproducir el audio:', err)\r\n      })\r\n\r\n      // Evitar que se dispare múltiples veces\r\n      audioRef.value.removeEventListener('canplay', tryPlay)\r\n    }\r\n\r\n    audioRef.value.addEventListener('canplay', tryPlay)\r\n  }\r\n}\r\n/*Play*/\r\nfunction play() {\r\n  // isVisibleHome.value = false;\r\n  audioRef.value.play().then(() => {\r\n    isPlaying.value = true\r\n  }).catch(err => {\r\n    console.error('Error al reproducir:', err)\r\n  })\r\n}\r\n/*Pausa*/\r\nfunction pause() {\r\n  audioRef.value.pause()\r\n  isPlaying.value = false\r\n  moment.value = true\r\n}\r\n/*Play y pausa*/\r\nfunction togglePlay() {\r\n  isPlaying.value ? pause() : play()\r\n}\r\n/*Canción siguiente*/\r\nfunction nextSong() {\r\n  shuffleIndex.value++\r\n\r\n  if (shuffleIndex.value >= shuffleOrder.value.length) {\r\n    generateShuffleOrder()\r\n  }\r\n\r\n  currentIndex.value = shuffleOrder.value[shuffleIndex.value]\r\n  restartPlayback()\r\n}\r\n/*Canción previa*/\r\nfunction prevSong() {\r\n  if (shuffleIndex.value > 0) {\r\n    shuffleIndex.value--\r\n  } else {\r\n    shuffleIndex.value = 0\r\n  }\r\n  currentIndex.value = shuffleOrder.value[shuffleIndex.value]\r\n  restartPlayback()\r\n}\r\n\r\nfunction updateTime() {\r\n  if (audioRef.value) {\r\n    currentTime.value = audioRef.value.currentTime\r\n  }\r\n}\r\n\r\nfunction updateDuration() {\r\n  if (audioRef.value) {\r\n    duration.value = audioRef.value.duration\r\n  }\r\n}\r\nfunction seekAudio() {\r\n  if (audioRef.value) {\r\n    audioRef.value.currentTime = currentTime.value\r\n  }\r\n}\r\n\r\nfunction formatTime(time) {\r\n  const minutes = Math.floor(time / 60)\r\n  const seconds = Math.floor(time % 60).toString().padStart(2, '0')\r\n  return `${minutes}:${seconds}`\r\n}\r\n\r\n\r\nimport { onBeforeUnmount } from 'vue'\r\n\r\nonBeforeUnmount(() => {\r\n  if (audioRef.value) {\r\n    audioRef.value.pause()\r\n    audioRef.value.src = ''\r\n    audioRef.value.load()\r\n\r\n    audioRef.value.removeEventListener('timeupdate', updateTime)\r\n    audioRef.value.removeEventListener('loadedmetadata', updateDuration)\r\n  }\r\n\r\n  if (audioContext.value) {\r\n    audioContext.value.close()\r\n    audioContext.value = null\r\n  }\r\n  cancelAnimationFrame(animationId.value)\r\n})\r\n\r\nonMounted(() => {\r\n  generateShuffleOrder()\r\n  restartPlayback()\r\n})\r\n</script>\r\n<style>\r\n.progress-bar {\r\n  display: flex;\r\n  justify-content: center;\r\n  /* padding: 15px 40px; */\r\n}\r\n\r\n.progress-bar input[type=\"range\"] {\r\n  width: 100%;\r\n  appearance: none;\r\n  height: 8px;\r\n  background: #e3e3e3;\r\n  border-radius: 4px;\r\n  outline: none;\r\n}\r\n\r\n.time {\r\n  font-size: 0.9rem;\r\n  color: #555;\r\n  margin-top: 0.25rem;\r\n}\r\n\r\n/* .visualizer {\r\n  display: block;\r\n  margin: 1rem auto;\r\n  background-color: #fff;\r\n  border-radius: 0.5rem;\r\n} */\r\n/* .visualizer {\r\n  display: block;\r\n  margin: 1rem auto;\r\n  background-color: #111;\r\n  border-radius: 50%;\r\n} */\r\n/* .visualizer {\r\n  display: block;\r\n  margin: 1rem auto;\r\n  background-color: #111;\r\n  border-radius: 8px;\r\n} */\r\n.visualizer {\r\n  display: block;\r\n  margin: 1rem auto;\r\n  background-color: white;\r\n}\r\n</style>","import script from \"./AngerPlay.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AngerPlay.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AngerPlay.vue?vue&type=style&index=0&id=5a50c19d&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["songs","URL","href","moment","ref","playIcon","pauseIcon","audioRef","isPlaying","shuffleOrder","shuffleIndex","currentIndex","currentSong","computed","value","currentTime","duration","currentSongName","canvasRef","audioContext","analyser","dataArray","animationId","setupVisualizer","window","AudioContext","webkitAudioContext","source","createMediaElementSource","createAnalyser","connect","destination","fftSize","bufferLength","Uint8Array","drawVisualizer","canvas","ctx","getContext","width","height","centerY","draw","requestAnimationFrame","getByteFrequencyData","clearRect","barWidth","length","x","i","barHeight","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","SetMoment","generateShuffleOrder","indices","map","_","j","Math","floor","random","restartPlayback","load","tryPlay","play","then","catch","err","console","error","removeEventListener","addEventListener","pause","togglePlay","nextSong","prevSong","updateTime","updateDuration","seekAudio","formatTime","time","minutes","seconds","toString","padStart","onBeforeUnmount","src","close","cancelAnimationFrame","onMounted","__exports__"],"sourceRoot":""}