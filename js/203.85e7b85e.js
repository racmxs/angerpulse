"use strict";(self["webpackChunkangerpulse"]=self["webpackChunkangerpulse"]||[]).push([[203],{2203:function(t,a,e){e.r(a),e.d(a,{default:function(){return Mt}});e(8111),e(2489),e(7588),e(1701),e(8237);var l=e(6768),i=e(144),s=e(5130),r=e(4232),n=e(2674),u=e(5384),o=e(8077),c=e(1010),v=e(17),d=e(3408);const p=["innerHTML"],y={class:"text-start px-4 pt-3"},g=["innerHTML"],m=["innerHTML"],k={class:"numeralia d-flex py-3"},h={class:"num-circle"},b={class:"circle-black b-48-gray p-3"},L={class:"m-auto"},f={class:"data-rec b-20-gray w-100"},x=["innerHTML"],_={class:"numeralia d-flex py-3"},R={key:0,class:"num-circle"},E={class:"circle-black b-20-gray p-3"},C={class:"m-auto"},M={key:1,class:"num-circle"},w={class:"circle-black b-20-gray p-3"},F={class:"m-auto"},W={key:2,class:"num-circle"},X={class:"circle-black b-20-gray p-3"},T={class:"m-auto"},q={class:"data-rec b-20-gray w-100"},H=["innerHTML"],S={class:"card p-4 mt-4 shadow-sm"},j=["innerHTML"],K={class:"d-flex align-items-center mb-3"},B={style:{height:"300px",width:"100%"}},$={key:1,class:"d-flex justify-content-center align-items-center h-100"},A={class:"text-muted"},I={class:"py-3 px-4"},O=["innerHTML"],N={class:"pila-table"},P={key:0,class:"bloque-celda-wrapper"},J=["onClick"],Q={key:0,class:"custom-tooltip"},V={style:{"font-size":"12px"}},z={class:"d-flex justify-content-start pt-4"},D={class:"ps-3"},U={class:"b-14-gray text-start"},G={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},Z={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},Y={class:"d-flex justify-content-start pt-4"},tt={class:"ps-3"},at={class:"b-14-gray text-start"},et={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},lt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},it={class:"d-flex justify-content-start pt-3"},st={class:"ps-3"},rt={class:"b-14-gray text-start"},nt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},ut={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},ot={class:"d-flex justify-content-start pt-3"},ct={class:"ps-3"},vt={class:"b-14-gray text-start"},dt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},pt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},yt={class:"d-flex justify-content-start pt-3"},gt={class:"ps-3"},mt={class:"b-14-gray text-start"},kt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},ht={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},bt={class:"d-flex justify-content-start pt-3 pb-4"},Lt={class:"ps-3"},ft={class:"b-14-gray text-start"},xt={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}},_t={class:"r-12-gray text-start",style:{"padding-right":"10px",width:"fit-content",cursor:"help"}};var Rt={__name:"AngerDashboard",setup(t){v.t1.register(v.hE,v.m_,v.s$,v.E8,v.PP,v.kc,d.A);const{t:a,locale:e}=(0,u.s9)(),Rt=(0,i.KR)(1),Et=(0,i.KR)(1),Ct=(0,i.KR)(0),Mt=(0,i.KR)(0),wt=(0,i.KR)(0),Ft=(0,i.KR)([]),Wt=(0,i.KR)(null),Xt=["#efefef","#E3FCFF","#FFE4B3","#FFC4B3","#FF9797","#fb5353"];function Tt(t){Rt.value=t,Et.value=t,qt()}async function qt(){try{const t=localStorage.getItem("token");if(!t)return;const a=await fetch(`${n.J}/api/config/GetUserMoments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,temporalidad:Rt.value,mes:Ct.value,semana:Mt.value,dia:wt.value})}),e=await a.json(),l="string"===typeof e.data?JSON.parse(e.data):e.data;Ft.value=Array.isArray(l)?l:[]}catch(t){console.error("Error momentos",t)}}(0,l.sV)((()=>{qt(),window.addEventListener("click",Ht)})),(0,l.hi)((()=>{window.removeEventListener("click",Ht)}));const Ht=t=>{t.target.closest(".bloque-celda")||(Wt.value=null)},St=t=>{if(0===t||!t)return"0s";if(t<60)return`${t}s`;if(t<3600){const a=Math.floor(t/60),e=t%60;return 0===e?`${a}m`:`${a}m ${e}s`}{const a=Math.floor(t/3600),e=Math.floor(t%3600/60);return 0===e?`${a}h`:`${a}h ${e}m`}},jt=(0,l.EW)((()=>Ft.value&&0!==Ft.value.length?Ft.value.reduce(((t,a)=>t+(a.Cantidad||0)),0):0)),Kt=(0,l.EW)((()=>{const t=Ft.value.reduce(((t,a)=>t+(a.Tiempo||0)),0);return{h:Math.floor(t/3600),m:Math.floor(t%3600/60),s:t%60}})),Bt=(0,l.EW)((()=>{const t=Ft.value.reduce(((t,a)=>{const l=a.Numero;return t[l]||(t[l]={label:e.value.startsWith("es")?a.Etiqueta:a.Label,cantidad:0,numero:l}),t[l].cantidad+=a.Cantidad||0,t}),{}),l=Object.values(t).sort(((t,a)=>t.numero-a.numero));return{labels:l.map((t=>t.label)),rawItems:l,datasets:[{label:a("activity.cantidadAudios"),data:l.map((t=>t.cantidad)),backgroundColor:"#177e99",borderRadius:4,barThickness:25}]}})),$t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1},datalabels:{anchor:"end",align:"top",formatter:Math.round,font:{weight:"bold",size:12},color:"#333"}},layout:{padding:{top:20}},scales:{y:{beginAtZero:!0,grid:{display:!1},ticks:{display:!1}},x:{grid:{display:!1}}},onClick:(t,a)=>{if(a.length>0){const t=a[0].index,e=Bt.value.rawItems[t];At(e.numero)}},onHover:(t,a)=>{t.native.target.style.cursor=a[0]?"pointer":"default"}},At=t=>{3==Rt.value?(Ct.value=t,Rt.value=2):2==Rt.value?(Mt.value=t,Rt.value=1):1==Rt.value&&(wt.value=t,Rt.value=1),Et.value=Rt.value,qt()},It=()=>{1==Rt.value&&0==wt.value?(Rt.value=2,Mt.value=0,wt.value=0):1==Rt.value&&wt.value>0?(Rt.value=1,wt.value=0):2==Rt.value&&(Rt.value=3,Ct.value=0),Et.value=Rt.value,qt()},Ot=(0,l.EW)((()=>{if(!Ft.value.length)return[];const t=Ft.value.map((t=>({name:e.value.startsWith("es")?t.Etiqueta:t.Label,numero:t.Numero}))),a=t.filter(((t,a,e)=>a===e.findIndex((a=>a.name===t.name))));return a.sort(((t,a)=>t.numero-a.numero))})),Nt=t=>Xt[t]||"#FFFFFF",Pt=(0,l.EW)((()=>{if(!Ft.value.length||!Ot.value.length)return{};const t={};return Ot.value.forEach((a=>{const l=Ft.value.filter((t=>{const l=e.value.startsWith("es")?t.Etiqueta:t.Label;return l===a.name&&t.Bloque}));t[a.name]=l.sort(((t,a)=>t.Bloque.localeCompare(a.Bloque)))})),t})),Jt=(0,l.EW)((()=>{const t=Object.values(Pt.value).map((t=>t.length));return t.length?Math.max(...t):0})),Qt=t=>{Wt.value===t?Wt.value=null:Wt.value=t},Vt=(0,l.EW)((()=>{const t={};return Ft.value.forEach((a=>{const e=a.Momento;void 0!==e&&null!==e&&(t[e]||(t[e]=0),t[e]+=a.Cantidad||0)})),t})),zt=(0,l.EW)((()=>{const t={};return Ft.value.forEach((a=>{const e=a.Momento;void 0!==e&&null!==e&&(t[e]||(t[e]=0),t[e]+=a.Tiempo||0)})),t})),Dt={mounted(t,a){t._tooltip=new o.m_(t,{title:a.value,placement:"top",trigger:"hover"})},updated(t,a){t._tooltip&&a.value!==a.oldValue&&t._tooltip.setContent({".tooltip-inner":a.value})},unmounted(t){t._tooltip&&(t._tooltip.dispose(),delete t._tooltip)}};return(t,e)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.Lk)("label",{class:"b-24-black",innerHTML:(0,i.R1)(a)("activity.title")},null,8,p),e[2]||(e[2]=(0,l.Lk)("br",null,null,-1))]),(0,l.Lk)("div",y,[(0,l.Lk)("p",{class:"b-16-gray",innerHTML:(0,i.R1)(a)("activity.temporalidad")},null,8,g),(0,l.bo)((0,l.Lk)("select",{id:"FilterTempo",class:"form-control w-100 select-ap","onUpdate:modelValue":e[0]||(e[0]=t=>Et.value=t),onChange:e[1]||(e[1]=t=>Tt(Et.value)),innerHTML:(0,i.R1)(a)("activity.ultsem")},null,40,m),[[s.u1,Et.value]]),(0,l.Lk)("div",k,[(0,l.Lk)("div",h,[(0,l.Lk)("div",b,[(0,l.Lk)("label",L,(0,r.v_)(jt.value),1)])]),(0,l.Lk)("div",f,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,i.R1)(a)("activity.audio")},null,8,x)])]),(0,l.Lk)("div",_,[Kt.value.h>0?((0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("div",E,[(0,l.Lk)("label",C,(0,r.v_)(Kt.value.h)+":"+(0,r.v_)(Kt.value.m.toString().padStart(2,"0"))+":"+(0,r.v_)(Kt.value.s.toString().padStart(2,"0"))+"h ",1)])])):Kt.value.m>0?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",w,[(0,l.Lk)("label",F,(0,r.v_)(Kt.value.m)+":"+(0,r.v_)(Kt.value.s.toString().padStart(2,"0"))+"m ",1)])])):((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",X,[(0,l.Lk)("label",T,(0,r.v_)(Kt.value.s.toString().padStart(2,"0"))+"s ",1)])])),(0,l.Lk)("div",q,[(0,l.Lk)("label",{class:"m-auto px-3 b-20-gray",innerHTML:(0,i.R1)(a)("activity.horas")},null,8,H)])])]),(0,l.Lk)("div",S,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,i.R1)(a)("activity.dias")},null,8,j),(0,l.Lk)("div",K,[Rt.value<3?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:It,class:"btn btn-sm btn-outline-secondary me-3"}," â† "+(0,r.v_)((0,i.R1)(a)("activity.btnBack")),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",B,[Ft.value.length>0?((0,l.uX)(),(0,l.Wv)((0,i.R1)(c.yP),{key:0,data:Bt.value,options:$t},null,8,["data"])):((0,l.uX)(),(0,l.CE)("div",$,[(0,l.Lk)("p",A,(0,r.v_)((0,i.R1)(a)("common.noData")),1)]))])]),(0,l.Lk)("div",I,[(0,l.Lk)("p",{class:"b-16-gray pt-2 pb-1 text-start",innerHTML:(0,i.R1)(a)("activity.momentos")},null,8,O),(0,l.Lk)("div",null,[(0,l.Lk)("table",N,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Jt.value,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ot.value,(s=>((0,l.uX)(),(0,l.CE)("td",{key:s.name},[Pt.value[s.name][Jt.value-t]?((0,l.uX)(),(0,l.CE)("div",P,[(0,l.Lk)("div",{class:"bloque-celda",style:(0,r.Tr)({backgroundColor:Nt(Pt.value[s.name][Jt.value-t].Momento)}),onClick:a=>Qt(Pt.value[s.name][Jt.value-t],a)},[(0,l.eW)((0,r.v_)(Pt.value[s.name][Jt.value-t].Bloque)+" ",1),Wt.value===Pt.value[s.name][Jt.value-t]?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("strong",null,(0,r.v_)((0,i.R1)(a)("activity.audioMin"))+":",1),(0,l.eW)(" "+(0,r.v_)(Wt.value.Cantidad)+" ",1),e[3]||(e[3]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("strong",null,(0,r.v_)((0,i.R1)(a)("activity.horasMin"))+":",1),(0,l.eW)(" "+(0,r.v_)(St(Wt.value.Tiempo))+" ",1),e[4]||(e[4]=(0,l.Lk)("div",{class:"tooltip-arrow"},null,-1))])):(0,l.Q3)("",!0)],12,J)])):(0,l.Q3)("",!0)])))),128))])))),128))]),(0,l.Lk)("tfoot",V,[(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ot.value,(t=>((0,l.uX)(),(0,l.CE)("th",{key:t.name},(0,r.v_)(t.name),1)))),128))])])])]),(0,l.Lk)("div",z,[e[5]||(e[5]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#efefef","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",D,[(0,l.Lk)("div",U,(0,r.v_)((0,i.R1)(a)("activity.registro")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",G,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Vt.value[0]||0),1)])),[[Dt,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",Z,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(St(zt.value?.[0]||0)),1)])),[[Dt,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",Y,[e[6]||(e[6]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#E3FCFF","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",tt,[(0,l.Lk)("div",at,(0,r.v_)((0,i.R1)(a)("activity.act")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",et,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Vt.value[1]||0),1)])),[[Dt,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",lt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(St(zt.value?.[1]||0)),1)])),[[Dt,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",it,[e[7]||(e[7]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFE4B3","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",st,[(0,l.Lk)("div",rt,(0,r.v_)((0,i.R1)(a)("activity.mente")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",nt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Vt.value[2]||0),1)])),[[Dt,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",ut,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(St(zt.value?.[2]||0)),1)])),[[Dt,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",ot,[e[8]||(e[8]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FFC4B3","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",ct,[(0,l.Lk)("div",vt,(0,r.v_)((0,i.R1)(a)("activity.lugares")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",dt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Vt.value[3]||0),1)])),[[Dt,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",pt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(St(zt.value?.[3]||0)),1)])),[[Dt,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",yt,[e[9]||(e[9]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#FF9797","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",gt,[(0,l.Lk)("div",mt,(0,r.v_)((0,i.R1)(a)("activity.palabras")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",kt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Vt.value[4]||0),1)])),[[Dt,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",ht,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(St(zt.value?.[4]||0)),1)])),[[Dt,(0,i.R1)(a)("activity.horas")]])])]),(0,l.Lk)("div",bt,[e[10]||(e[10]=(0,l.Lk)("div",{class:"mini-square",style:{"background-color":"#fb5353","margin-top":"2px"}},null,-1)),(0,l.Lk)("div",Lt,[(0,l.Lk)("div",ft,(0,r.v_)((0,i.R1)(a)("activity.hablar")),1),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",xt,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.audioMin"))+": "+(0,r.v_)(Vt.value[5]||0),1)])),[[Dt,(0,i.R1)(a)("activity.audio")]]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",_t,[(0,l.eW)((0,r.v_)((0,i.R1)(a)("activity.horasMin"))+": "+(0,r.v_)(St(zt.value?.[5]||0)),1)])),[[Dt,(0,i.R1)(a)("activity.horas")]])])])])],64))}},Et=e(1241);const Ct=(0,Et.A)(Rt,[["__scopeId","data-v-eec29328"]]);var Mt=Ct}}]);
//# sourceMappingURL=203.85e7b85e.js.map